(this["webpackJsonppubnub-moderation-tool"]=this["webpackJsonppubnub-moderation-tool"]||[]).push([[0],{228:function(e){e.exports=JSON.parse('{"a":"1.0.2"}')},399:function(e,t,a){},400:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(19),c=a.n(s),i=a(2),o=a(26),l=a(231),u=a(104),d=a(32),b=a(20),j=a(434),h=a(0),m=function(e){var t=e.children;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{}),t]})},g=a(6),p=a.n(g),x=a(10),f=a(7),O=a(437),v=a(79),y=a(484),k=a(446),w=a(447),C=a(441),F=a(442),S=a(443),N=a(444),T=a(445),M=a(436),R=Object(M.a)({form:{padding:"35px 5px 70px 5px",margin:"5px",background:"#FFFFFF 0% 0% no-repeat padding-box",borderRadius:"8px",opacity:1},loginTextField:{"& .MuiOutlinedInput-root":{borderRadius:"8px",background:"white"},"& .MuiOutlinedInput-adornedEnd":{background:"white"},"& .MuiOutlinedInput-adornedStart":{background:"white"},opacity:1},textfieldIcon:{opacity:.2,fontSize:"21px"},maskPasswordIcon:{cursor:"pointer",opacity:.3,fontSize:"21px"},root:{display:"table",backgroundImage:"url(images/Bg.svg)",backgroundRepeat:"no-repeat",backgroundSize:"auto",position:"absolute",top:0,left:0,height:"100%",width:"100%"},middle:{display:"table-cell",verticalAlign:"middle"},inner:{marginLeft:"auto",marginRight:"auto",width:"100%"},logSubtitle:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) 13.32px/16px var(--unnamed-font-family-proxima-nova)",textAlign:"center",letterSpacing:"0px",color:"#414141",opacity:.6},button:{background:"#6387ED 0% 0% no-repeat padding-box",borderRadius:"8px",opacity:1,width:"100%",fontWeight:"500",height:"49px",textTransform:"none",color:"white","&:hover":{fontWeight:"500",background:"#6387ED 0% 0% no-repeat padding-box",color:"white"}},disabledButton:{color:"white!important",backgroundColor:"#9eb4f3"},logIconContainer:{textAlign:"center",margin:"0px 0px 10px 0px"},floatIcon:{backgroundColor:"#ecebeb",borderRadius:"0x 0px 0px 0px",padding:"0px 0px 0px 0px"},loader:{color:"white"}}),I=a(217),A=a.n(I).a.create({baseURL:"https://admin.pubnub.com/api",validateStatus:function(e){return e<500}});function D(e){return P.apply(this,arguments)}function P(){return(P=Object(x.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("/me",t);case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:throw new Error(a.data.error||"Something went wrong");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=a(137),E=a.n(L),B=function(e){return E.a.get(e)},U=function(e,t){localStorage.setItem(e,JSON.stringify(t))},q=function(e,t){var a,n;a="token",n=e.token,E.a.set(a,n,{expires:1}),U("user",e.user),t()},W=function(){if(B("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},_=a(60),z=a(138),K=a.n(z);function H(e,t){return V.apply(this,arguments)}function V(){return(V=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/accounts?user_id=".concat(t),{headers:{"X-Session-Token":"".concat(a)}});case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.data);case 5:throw new Error("Failed to fetch accounts");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t){return J.apply(this,arguments)}function J(){return(J=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/apps?owner_id=".concat(t),{headers:{"X-Session-Token":"".concat(a)}});case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.data);case 5:throw new Error("Failed to fetch applications");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,a){return G.apply(this,arguments)}function G(){return(G=Object(x.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.objects.getAllChannelMetadata({include:{totalCount:!0},limit:25,page:{next:a,prev:n},sort:{updated:"desc"}});case 2:if(200!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",r);case 5:throw new Error("Failed to get PubNub channels");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t,a,n){return Z.apply(this,arguments)}function Z(){return(Z=Object(x.a)(p.a.mark((function e(t,a,n,r){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.objects.getAllUUIDMetadata({include:{totalCount:!0,customFields:!0},limit:25,page:{next:a,prev:n},sort:{updated:"desc"},filter:r});case 2:if(200!==(s=e.sent).status){e.next=5;break}return e.abrupt("return",s);case 5:throw new Error("Failed to get PubNub users");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t,a,n){return ee.apply(this,arguments)}function ee(){return(ee=Object(x.a)(p.a.mark((function e(t,a,n,r){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.objects.setChannelMetadata({channel:r,data:{name:a,description:n}});case 2:if(200!==(s=e.sent).status){e.next=5;break}return e.abrupt("return",s);case 5:throw new Error("Failed to add channel metadata");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t,a,n,r){return ae.apply(this,arguments)}function ae(){return(ae=Object(x.a)(p.a.mark((function e(t,a,n,r,s){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n||(n=null),s||(s=null),e.next=4,t.objects.setUUIDMetadata({uuid:r,data:{name:a,email:n,profileUrl:s}});case 4:if(200!==(c=e.sent).status){e.next=7;break}return e.abrupt("return",c);case 7:throw new Error(c.message);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t){return re.apply(this,arguments)}function re(){return(re=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.objects.removeChannelMetadata({channel:a});case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new Error("Failed to add user metadata");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t){return ce.apply(this,arguments)}function ce(){return(ce=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.objects.removeUUIDMetadata({uuid:a});case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n);case 5:throw new Error("Failed to add user metadata");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e,t,a,n,r){return oe.apply(this,arguments)}function oe(){return(oe=Object(x.a)(p.a.mark((function e(t,a,n,r,s){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n||(n=null),s||(s=null),e.next=4,t.objects.setUUIDMetadata({uuid:r,data:{name:a,email:n,profileUrl:s}});case 4:if(200!==(c=e.sent).status){e.next=7;break}return e.abrupt("return",c);case 7:throw new Error("Failed to edit user metadata");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,t,a,n){return ue.apply(this,arguments)}function ue(){return(ue=Object(x.a)(p.a.mark((function e(t,a,n,r){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.objects.setChannelMetadata({channel:r,data:{name:a,description:n}});case 2:if(200!==(s=e.sent).status){e.next=5;break}return e.abrupt("return",s);case 5:throw new Error("Failed to add channel metadata");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,t){return be.apply(this,arguments)}function be(){return(be=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchMessages({channels:[a],includeMeta:!0,includeMessageActions:!0,count:100});case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n.channels[a]);case 5:throw new Error("Failed to get messages");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e,t){return he.apply(this,arguments)}function he(){return(he=Object(x.a)(p.a.mark((function e(t,a){var n,r,s,c,i,o,l=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]&&l[2],e.next=3,A.get("/v1/blocks/key/".concat(t,"/block"),{headers:{"X-Session-Token":"".concat(a)}});case 3:if(200!==(r=e.sent).status){e.next=24;break}if(s=r.data,!n){e.next=23;break}c=Object(_.a)(s.payload),e.prev=8,o=p.a.mark((function e(){var n,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.value,r=n.id,e.next=4,A.get("/v1/blocks/key/".concat(t,"/block/").concat(r),{headers:{"X-Session-Token":"".concat(a)}});case 4:s=e.sent,n.event_handlers=s.data.payload.find((function(e){return e.id===r})).event_handlers;case 6:case"end":return e.stop()}}),e)})),c.s();case 11:if((i=c.n()).done){e.next=15;break}return e.delegateYield(o(),"t0",13);case 13:e.next=11;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(8),c.e(e.t1);case 20:return e.prev=20,c.f(),e.finish(20);case 23:return e.abrupt("return",s);case 24:throw new Error("Failed to fetch PubNub functions");case 25:case"end":return e.stop()}}),e,null,[[8,17,20,23]])})))).apply(this,arguments)}function me(e,t){return ge.apply(this,arguments)}function ge(){return(ge=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"==typeof t.code&&(t.code=K()(t.code,{indent_size:4,space_in_empty_paren:!0})),e.next=3,A.post("/v1/blocks/key/".concat(t.key_id,"/block"),t,{headers:{"X-Session-Token":"".concat(a)}});case 3:if(200!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",n.data);case 6:throw new Error(n.data.message||"Something went wrong. Please try later");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t){return xe.apply(this,arguments)}function xe(){return(xe=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("v1/blocks/key/".concat(t.key_id,"/block/").concat(t.block_id,"/start"),t,{headers:{"X-Session-Token":"".concat(a)}});case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.data);case 5:throw new Error(n.data.error);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("v1/blocks/key/".concat(t.key_id,"/block/").concat(t.block_id,"/stop"),t,{headers:{"X-Session-Token":"".concat(a)}});case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.data);case 5:throw new Error(n.data.error);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e,t){return ye.apply(this,arguments)}function ye(){return(ye=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"==typeof t.code&&(t.code=K()(t.code,{indent_size:4,space_in_empty_paren:!0})),e.next=3,A.post("v1/blocks/key/".concat(t.key_id,"/event_handler"),t,{headers:{"X-Session-Token":"".concat(a)}});case 3:if(200!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",n.data);case 6:if(!n.data.message){e.next=10;break}throw new Error(n.data.message);case 10:throw new Error("PubNub create function request failed with code: ".concat(n.status));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t){return we.apply(this,arguments)}function we(){return(we=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"==typeof t.code&&(t.code=K()(t.code,{indent_size:4,space_in_empty_paren:!0})),e.next=3,A.put("/v1/blocks/key/".concat(t.key_id,"/event_handler/").concat(t.id),t,{headers:{"X-Session-Token":"".concat(a)}});case 3:if(200!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",n.data);case 6:if("string"!=typeof n.data.message){e.next=10;break}throw new Error(n.data.message);case 10:if("string"!=typeof n.data.message.text){e.next=14;break}throw new Error(n.data.message.text);case 14:throw new Error("PubNub update function request failed with code: ".concat(n.status));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.objects.getAllUUIDMetadata({filter:"name LIKE '*".concat(a,"*'")});case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.data);case 5:throw new Error("Failed to get PubNub users");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e,t){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.objects.getAllChannelMetadata({filter:"name LIKE '*".concat(a,"*'")});case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.data);case 5:throw new Error("Failed to get PubNub users");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,t,a){return Me.apply(this,arguments)}function Me(){return(Me=Object(x.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.objects.getChannelMembers({channel:a,include:{UUIDFields:!0,customUUIDFields:!0,totalCount:!0},limit:100,page:{next:n}});case 2:if(200!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",r);case 5:throw new Error("Failed to get PubNub channel memebers");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.hereNow({channels:[a]});case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n.channels[a].occupants);case 5:throw new Error("Failed to get PubNub online members");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){return De.apply(this,arguments)}function De(){return(De=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.objects.getChannelMetadata({channel:a});case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.data);case 5:throw new Error("Failed to get PubNub channel");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,t,a){return Le.apply(this,arguments)}function Le(){return(Le=Object(x.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.messageCounts({channels:[a],channelTimetokens:[n]});case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r.channels&&r.channels[a]);case 5:throw new Error("Failed to get total messages Count");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e,t){return Be.apply(this,arguments)}function Be(){return(Be=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.hereNow({channels:a,includeUUIDs:!1,includeState:!1});case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n.channels||[]);case 5:throw new Error("Failed to get online users");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e,t){return qe.apply(this,arguments)}function qe(){return(qe=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.objects.getAllChannelMetadata({filter:'id == "'+a+'"'});case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.data);case 5:throw new Error("Failed to get PubNub channel");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e,t){return _e.apply(this,arguments)}function _e(){return(_e=Object(x.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.objects.getAllUUIDMetadata({filter:'id == "'+a+'"'});case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",n.data);case 5:throw new Error("Failed to get PubNub user");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e,t,a){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(x.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.addMessageAction({channel:a,messageTimetoken:n,action:{type:"deleted",value:"."}});case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r.data);case 5:throw new Error("Failed to delete the message");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e,t,a,n){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(x.a)(p.a.mark((function e(t,a,n,r){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.removeMessageAction({channel:a,messageTimetoken:n,actionTimetoken:r});case 2:if(!(s=e.sent)){e.next=5;break}return e.abrupt("return",s.data);case 5:throw new Error("Failed to undo delete action");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e,t,a,n){return Je.apply(this,arguments)}function Je(){return(Je=Object(x.a)(p.a.mark((function e(t,a,n,r){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.addMessageAction({channel:a,messageTimetoken:n,action:{type:"updated",value:r}});case 2:if(!(s=e.sent)){e.next=5;break}return e.abrupt("return",s.data);case 5:throw new Error("Failed to undo delete action");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(e,t,a){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(x.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.objects.setUUIDMetadata({uuid:a,data:{custom:n}});case 2:if(200!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",r.data);case 5:throw new Error("Failed to set metadata of PubNub user");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xe=a(483),Ze=a(129),Qe=a.n(Ze),et=function(){var e=R(),t=Object(b.g)(),a=Qe.a.generateUUID(),r=Object(n.useState)({success:{status:!1,msg:""},error:{status:!1,msg:""},loading:!1}),s=Object(f.a)(r,2),c=s[0],o=s[1],l=Object(n.useState)({email:"",password:""}),u=Object(f.a)(l,2),d=u[0],j=u[1],m=Object(n.useState)(!0),g=Object(f.a)(m,2),M=g[0],I=g[1],A=function(e){return function(t){switch(e){case"email":j(Object(i.a)(Object(i.a)({},d),{},{email:t.target.value}));break;case"password":j(Object(i.a)(Object(i.a)({},d),{},{password:t.target.value}));break;default:return}}},P=function(){var e=Object(x.a)(p.a.mark((function e(n){var r,s,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,o(Object(i.a)(Object(i.a)({},c),{},{loading:!0})),e.next=5,D(d);case 5:r=e.sent,s=r.result,l=s.user,u=s.token,o(Object(i.a)(Object(i.a)({},c),{},{success:{status:!0,msg:"Successfully Authenticated"},error:{status:!1,msg:""}})),q({user:l,token:u},Object(x.a)(p.a.mark((function e(){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(l.id,u);case 3:return n=e.sent,e.next=6,Y(n.result.accounts[0].id,u);case 6:r=e.sent,U("PubNubAccounts",n.result.accounts),U("PubNubSelectedAccount",n.result.accounts[0]),U("PubNubApplications",r),U("uuid",a),o(Object(i.a)(Object(i.a)({},c),{},{success:{status:!0,msg:""},error:{status:!1,msg:""},loading:!1})),t.push("/dashboard"),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),new Error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),o(Object(i.a)(Object(i.a)({},c),{},{error:{status:!0,msg:e.t0.message},loading:!1,success:{status:!1,msg:""}}));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){I((function(e){return!e}))};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:e.root,children:Object(h.jsx)("div",{className:e.middle,children:Object(h.jsx)("div",{className:e.inner,children:Object(h.jsx)(O.a,{container:!0,justify:"center",children:Object(h.jsx)(O.a,{item:!0,xs:12,sm:6,md:4,children:Object(h.jsxs)("div",{className:e.form,children:[Object(h.jsxs)(O.a,{container:!0,justify:"center",children:[Object(h.jsx)(O.a,{item:!0,sm:12,md:12,xs:12,children:Object(h.jsx)("div",{className:e.logIconContainer,children:Object(h.jsx)("span",{className:e.logIcon,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/Pubnub logo.svg",alt:"Pubnub Logo",width:160})})})}),Object(h.jsx)(O.a,{item:!0,sm:12,md:12,xs:12,children:Object(h.jsx)(v.a,{className:e.logSubtitle,align:"center",children:"Login with your PubNub account to continue"})})]}),Object(h.jsxs)("form",{onSubmit:P,children:[Object(h.jsxs)(O.a,{container:!0,justify:"center",spacing:3,children:[Object(h.jsxs)(O.a,{xs:10,sm:12,md:10,item:!0,children:[Object(h.jsxs)("div",{className:e.alertCard,children:[c.success.status&&Object(h.jsx)(Xe.a,{severity:"success",children:c.success.msg}),c.error.status&&Object(h.jsx)(Xe.a,{severity:"error",children:c.error.msg})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{})]}),Object(h.jsx)(O.a,{xs:10,sm:12,md:10,item:!0,children:Object(h.jsx)(y.a,{type:"text",variant:"outlined",name:"email",fullWidth:!0,autoComplete:"email",className:e.loginTextField,InputProps:{startAdornment:Object(h.jsx)(C.a,{position:"start",children:Object(h.jsx)(F.a,{className:e.textfieldIcon})})},placeholder:"E-mail address",required:!0,onChange:A("email"),value:d.email,autoFocus:!0})}),Object(h.jsx)(O.a,{xs:10,sm:12,md:10,item:!0,children:Object(h.jsx)(y.a,{type:M?"password":"text",autoComplete:"password",variant:"outlined",className:e.loginTextField,name:"password",InputProps:{endAdornment:Object(h.jsx)(C.a,{position:"end",children:M?Object(h.jsx)(S.a,{className:e.maskPasswordIcon,onClick:L}):Object(h.jsx)(N.a,{className:e.textfieldIcon,onClick:L})}),startAdornment:Object(h.jsx)(C.a,{position:"start",children:Object(h.jsx)(T.a,{className:e.textfieldIcon})})},fullWidth:!0,placeholder:"Password",required:!0,onChange:A("password"),value:d.password})})]}),Object(h.jsx)("br",{}),Object(h.jsx)(O.a,{container:!0,justify:"center",children:Object(h.jsx)(O.a,{item:!0,sm:12,md:10,xs:10,children:Object(h.jsx)(k.a,{className:e.button,fullWidth:!0,classes:{disabled:e.disabledButton},disabled:c.loading,type:"submit",startIcon:c.loading?Object(h.jsx)(w.a,{className:e.loader,size:30}):null,children:c.loading?"Submitting":"LOGIN TO CONTINUE"})})})]})]})})})})})})})},tt=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(m,{children:Object(h.jsx)(et,{})})})},at=a(85),nt=["component"],rt=function(e){var t=e.component,a=Object(at.a)(e,nt);return Object(h.jsx)(b.b,Object(i.a)(Object(i.a)({},a),{},{render:function(e){return W()?Object(h.jsx)(t,Object(i.a)({},e)):Object(h.jsx)(b.a,{to:{pathname:"/",state:{from:e.location}}})}}))},st=["component"],ct=function(e){var t=e.component,a=Object(at.a)(e,st);return Object(h.jsx)(b.b,Object(i.a)(Object(i.a)({},a),{},{render:function(e){return W()?Object(h.jsx)(b.a,{to:{pathname:"/dashboard",state:{from:e.location}}}):Object(h.jsx)(t,Object(i.a)({},e))}}))},it=a(487),ot=a(454),lt=a(455),ut=a(456),dt=a(159),bt=a(489),jt=a(408),ht=a(404),mt=a(100),gt=a(450),pt=a(440),xt=a(490),ft=a(452),Ot=a(448),vt=a(449),yt=Object(M.a)({avatar:{backgroundColor:"#FCF0EF",color:"#E66E68",borderRadius:"8px",margin:"0px 5px 0px 0px"},button:{textTransform:"none",fontSize:"15px"},paperRoot:{minWidth:"250px",zIndex:2},logoutIcon:{color:"#C2C2C2"}}),kt=a(218),wt=a.n(kt),Ct=Object(M.a)({cardRoot:{cursor:"pointer"},checkIcon:{color:"#C2C2C2"},email:{fontSize:"12px"},avatarText:{fontSize:"12px"},avatar:{}}),Ft=a(73),St=a.n(Ft),Nt=function(e){return e.split(" ").map((function(e){return e[0].toUpperCase()+e.substring(1)})).join(" ")},Tt=function(){return!!localStorage.getItem("PubNubSelectedAccount")&&JSON.parse(localStorage.getItem("PubNubSelectedAccount"))},Mt=function(){return!!localStorage.getItem("PubNubApplications")&&JSON.parse(localStorage.getItem("PubNubApplications"))},Rt=function(){return!!localStorage.getItem("PubNubSelectedApp")&&JSON.parse(localStorage.getItem("PubNubSelectedApp"))},It=function(){return!!localStorage.getItem("PubNubApplicationsWithKey")&&JSON.parse(localStorage.getItem("PubNubApplicationsWithKey"))},At=function(e,t){return e%5===0?{backgroundColor:"#FCF0EF",width:"30px",height:"30px",color:"#E66E68",borderRadius:"8px"}:e%3===0?{backgroundColor:"#FFFABB",width:"30px",height:"30px",color:"#FFD502",borderRadius:"8px"}:e%2===0?{backgroundColor:"#CAFFE6",width:"30px",height:"30px",color:"#34F89C",borderRadius:"8px"}:e%1===0?{backgroundColor:"#CAF0FF",width:"30px",height:"30px",color:"#3BC8FF",borderRadius:"8px"}:e===t().email?{color:"#6387ED"}:void 0},Dt=function(e){if(e){var t=e.split(" "),a=t[0].substring(0,1).toUpperCase();return t.length>1?a+=t[t.length-1].substring(0,1).toUpperCase():t[0].substring(0,2).toUpperCase()}return!1},Pt=function(e){return e?St()(new Date(e)).format("MMMM Do YYYY, h:mm a"):null},Lt=function(e){return"Forbidden"===e.message?"Not permitted to Access manager":e.message?"Method not allowed":e.error.message},Et=function(e,t){if(e)return e.payload.filter((function(e){return e.name==="KEY-".concat(t.id)}))},Bt=function(e,t){if(e)return e.filter((function(e){return e.name==="BLOCK-".concat(t[0].id)}))},Ut=function(e,t){if(e)return e.payload.filter((function(e){return e.name==="KEY-".concat(t.id,"-IMAGE-MODERATION")}))},qt=function(e){return new Function("return "+e)()()},Wt=function(e,t){return e[t]},_t=function(e){return e?St.a.unix(e/1e7).format("LT"):null},zt=function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):null},Kt=function(e){return e||"/moderation-dashboard/images/default-user.svg"},Ht=function(e){return e||"Unknown"},Vt=function(){return!!localStorage.getItem("PubNubSelectedChannel")&&JSON.parse(localStorage.getItem("PubNubSelectedChannel"))},Yt=function(e){var t=Object.values(e).filter((function(e){return 0!==e.length}));return t.length>0?t.reduce((function(e,t){return e+","+t})).split(",").join("|"):""};function Jt(e){return e?e.split(",").join("|").replace(/(\r\n|\n|\r)/gm,""):e}function $t(e){return"string"===typeof e?"true"===e:e}var Gt=function(e){return e?"Moderated message: "+e:null},Xt=function(e,t){return!!(e&&e.uuid.custom&&e.uuid.custom.mutedChannels&&e.uuid.custom.mutedChannels.includes(t))},Zt=function(e,t){return!!(e&&e.uuid.custom&&e.uuid.custom.blockedChannels&&e.uuid.custom.blockedChannels.includes(t))},Qt=function(e,t,a,n){if(t.message&&t.message.file&&t.message.file.id&&t.message.file.name&&!t.message.file.url){var r=a.getFileUrl({channel:n,id:t.message.file.id,name:t.message.file.name});e.file.url=r}return e},ea=function(e){return e.file&&e.file.url&&(e.image=e.file.url),e.file&&e.file.reason&&(e.imageReason=e.file.reason),e.message&&e.message.originalMessage&&(e.originalMessage=e.message.originalMessage),e.message&&e.message.moderatedMessage&&(e.moderatedMessage=e.message.moderatedMessage),e.message&&e.message.reason&&(e.reason=e.message.reason),e},ta=function(e,t){return e.actions&&e.actions.updated&&Object.keys(e.actions.updated)[0]||t.text||t.message&&t.message.text},aa=function(e){var t=e.account,a=e.handleClick,n=e.index,r=Ct();return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Ot.a,{testid:"".concat(n),onClick:function(){return a(t)},children:Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,xs:2,sm:2,children:Object(h.jsx)(bt.a,{className:r.avatar,style:At(n),variant:"square",children:Object(h.jsx)(v.a,{testid:"capitalChar",className:r.avatarText,children:t&&t.email?Nt(t.email.slice(0,2)):null})})}),Object(h.jsx)(O.a,{item:!0,xs:9,sm:9,children:Object(h.jsx)(v.a,{testid:"email",noWrap:!0,className:r.email,children:t.email})}),Object(h.jsx)(O.a,{item:!0,xs:1,sm:1,children:Object(h.jsx)(wt.a,{style:At(t.email,Tt),className:r.checkIcon})})]})})})},na=function(e){var t=e.accounts,a=B("token"),n=Object(b.g)(),r=function(){var e=Object(x.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y(t.id,a);case 3:r=e.sent,U("PubNubSelectedAccount",t),U("PubNubApplications",r),n.push("/dashboard"),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();function s(){return t.map((function(e,t){return Object(h.jsx)(aa,{account:e,handleClick:r,index:t},t)}))}return Object(h.jsx)(s,{})};function ra(e){var t=e.accounts,a=yt(),r=Object(n.useState)(!1),s=Object(f.a)(r,2),c=s[0],o=s[1],l=Object(n.useRef)(c),u=Object(n.useRef)(null),d=Object(b.g)(),j=function(e){u.current&&u.current.contains(e.target)||o(!1)};function m(e){"Tab"===e.key&&(e.preventDefault(),o(!1))}return Object(n.useEffect)((function(){!0===l.current&&!1===c&&u.current.focus(),l.current=c}),[c]),Object(h.jsx)("div",{children:Object(h.jsxs)("div",{children:[Object(h.jsxs)(k.a,{ref:u,"aria-controls":c?"menu-list-grow":void 0,"aria-haspopup":"true",className:a.button,endIcon:Object(h.jsx)(vt.a,{}),onClick:function(){o((function(e){return!e}))},children:[Object(h.jsx)(bt.a,{className:a.avatar,variant:"square",children:Nt(Tt().email.slice(0,2))}),Tt().email]}),Object(h.jsx)(jt.a,{open:c,anchorEl:u.current,role:void 0,transition:!0,disablePortal:!0,className:a.paperRoot,children:function(e){var a=e.TransitionProps,n=e.placement;return Object(h.jsx)(ht.a,Object(i.a)(Object(i.a)({},a),{},{style:{transformOrigin:"bottom"===n?"center top":"center bottom"},children:Object(h.jsx)(mt.a,{children:Object(h.jsx)(gt.a,{onClickAway:j,children:Object(h.jsxs)(pt.a,{autoFocusItem:c,id:"menu-list-grow",onKeyDown:m,children:[Object(h.jsx)(na,{accounts:t}),Object(h.jsx)(xt.a,{pl:2,pr:2,children:Object(h.jsx)(ft.a,{})}),Object(h.jsxs)(Ot.a,{onClick:function(){return e=function(){return d.push("/")},localStorage.clear(),void e();var e},children:[Object(h.jsx)("img",{src:"/moderation-dashboard/images/sign-out.svg",alt:"Signout"}),Object(h.jsx)(xt.a,{pl:1,children:Object(h.jsx)("small",{children:"Logout"})})]})]})})})}))}})]})})}var sa=Object(M.a)({grow:{flexGrow:1},root:{backgroundColor:"white",boxShadow:"0px 0px 0px 0px rgb(0 0 0 / 0%), 0px 0px 0px 1px rgb(0 0 0 / 4%), 0px 0px 0px 0px rgb(0 0 0 / 0%)"},headerMenu:{color:"black",margin:"15px"},button:{textTransform:"none",fontSize:"15px"},verticalLine:{marginLeft:"10px",marginRight:"20px",borderLeft:"2px solid lightgrey",height:"20px"}}),ca=a(453);function ia(e){var t=Rt();return Object(h.jsx)("div",{children:Object(h.jsxs)(it.a,{separator:Object(h.jsx)(ca.a,{fontSize:"small"}),"aria-label":"breadcrumb",children:[Object(h.jsx)(ot.a,{color:"primary",component:d.b,to:"/dashboard",children:Object(h.jsx)(v.a,{variant:"body2",children:"Applications"})}),e.currentPage?Object(h.jsx)(ot.a,{color:"primary",component:d.b,to:"/overview",children:Object(h.jsx)(v.a,{color:"primary",variant:"body2",children:t&&t.name})}):Object(h.jsx)(v.a,{color:"inherit",variant:"body2",children:t&&t.name}),e.currentPage?Object(h.jsx)(v.a,{color:"inherit",variant:"body2",children:e.currentPage}):null]})})}function oa(){var e=sa(),t=Object(b.g)(),a=Object(n.useState)([]),r=Object(f.a)(a,2),s=r[0],c=r[1],i=Rt(),o=Vt();Object(n.useEffect)((function(){c(!!localStorage.getItem("PubNubAccounts")&&JSON.parse(localStorage.getItem("PubNubAccounts")))}),[]);return Object(h.jsx)("div",{className:e.grow,children:Object(h.jsx)(lt.a,{position:"static",className:e.root,children:Object(h.jsxs)(ut.a,{children:[Object(h.jsx)(dt.a,{id:"toDashboard",edge:"start",onClick:function(){return t.push("/dashboard")},className:e.menuButton,color:"inherit","aria-label":"open drawer",children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/Pubnub logo.svg",width:90,alt:""})}),Object(h.jsx)("div",{className:e.verticalLine}),"/dashboard"===t.location.pathname?Object(h.jsx)(it.a,{"aria-label":"breadcrumb",children:Object(h.jsx)(v.a,{color:"inherit",variant:"body2",children:"Applications"})}):"/channels"===t.location.pathname?Object(h.jsx)(ia,{currentPage:"Channels"}):"/overview"===t.location.pathname?Object(h.jsx)(ia,{currentPage:""}):"/users"===t.location.pathname?Object(h.jsx)(ia,{currentPage:"Users"}):"/text-moderation"===t.location.pathname?Object(h.jsx)(ia,{currentPage:"Text Moderation"}):"/image-moderation"===t.location.pathname?Object(h.jsx)(ia,{currentPage:"Image Moderation"}):"/channels/messages"===t.location.pathname?Object(h.jsxs)(it.a,{separator:Object(h.jsx)(ca.a,{fontSize:"small"}),"aria-label":"breadcrumb",children:[Object(h.jsx)(ot.a,{color:"primary",component:d.b,to:"/dashboard",children:Object(h.jsx)(v.a,{variant:"body2",children:"Applications"})}),Object(h.jsx)(ot.a,{color:"primary",component:d.b,to:"/overview",children:Object(h.jsx)(v.a,{color:"primary",variant:"body2",children:i&&i.name})}),Object(h.jsx)(ot.a,{color:"primary",component:d.b,to:"/channels",children:Object(h.jsx)(v.a,{color:"primary",variant:"body2",children:"Channels"})}),Object(h.jsx)(v.a,{color:"inherit",variant:"body2",children:o})]}):void 0,Object(h.jsx)("div",{className:e.grow}),Object(h.jsx)(O.a,{item:!0,className:e.headerMenu,children:Object(h.jsx)(ra,{accounts:s})})]})})})}var la=a(52),ua=a(459),da=a(460),ba=a(458),ja=a(491),ha=a(461),ma=a(462),ga=a(463),pa=Object(M.a)({tableRow:{background:"#FFFFFF 0% 0% no-repeat padding-box",margin:"10px",boxShadow:"0px 1px 3px 0px rgb(0 0 0 / 8%)",opacity:1,"& button":{visibility:"hidden"},"&:hover":{"& button":{visibility:"visible"}}},tableRowClickable:{cursor:"pointer"},tablehead:{"& .MuiTableHead-root":{},"& .MuiTableRow-root":{backgroundColor:"#fafafa",borderBottom:"0px solid white"},"& .MuiTableCell-head":{minWidth:"180px"}},headLabel:{fontSize:"11px",fontWeight:"600"},keyName:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-20)/var(--unnamed-line-spacing-24) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#414141",opacity:"1"},appName:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-16)/var(--unnamed-line-spacing-19) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",fontSize:"12px",color:"#C2C2C2",opacity:1},icons:{padding:"0px"},tableConatiner:{scrollbarWidth:"none",overflow:"auto",overflowX:"hidden"},table:{borderCollapse:"separate",borderSpacing:"0 10px"},alertMessage:{background:"transparent"},tableCellIcon:{width:"1px",whiteSpace:"nowrap"},tablePagination:{"& .MuiTablePagination-actions":{background:"#E7EDFF 0% 0% no-repeat padding-box",borderRadius:"5px",opacity:1}}}),xa=a(457),fa=a(9),Oa=Object(fa.a)((function(e){return{tooltip:{backgroundColor:e.palette.common.white,boxShadow:e.shadows[1],font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-14)/var(--unnamed-line-spacing-17) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#414141",opacity:1}}}))(xa.a);function va(e){var t=e.row,a=pa(),n=e.row&&e.row.custom&&e.row.custom.flag,r=e.row&&e.row.custom&&e.row.custom.ban;return Object(h.jsxs)("div",{children:[!e.isUser||n||r?e.isUser&&!r?Object(h.jsx)(Oa,{title:"Unflag",children:Object(h.jsx)(dt.a,{edge:"start",className:a.icons,onClick:function(a){return e.unFlagUser(a,t)},children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/flag.svg",alt:"flag"})})}):void 0:Object(h.jsx)(Oa,{title:"Flag",children:Object(h.jsx)(dt.a,{edge:"start",className:a.icons,onClick:function(a){return e.flagUser(a,t)},children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/flag.svg",alt:"flag"})})}),e.isUser&&!r?Object(h.jsx)(Oa,{title:"Ban",children:Object(h.jsx)(dt.a,{edge:"start",className:a.icons,onClick:function(a){return e.banUser(a,t)},children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/ban.svg",alt:"block"})})}):e.isUser?Object(h.jsx)(Oa,{title:"Unban",children:Object(h.jsx)(dt.a,{edge:"start",className:a.icons,onClick:function(a){return e.unbanUser(a,t)},children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/ban.svg",alt:"block"})})}):void 0,e.isUser?null:Object(h.jsx)(Oa,{title:"View",children:Object(h.jsx)(dt.a,{edge:"start",label:"view",className:a.icons,onClick:function(a){return e.viewRow(a,t.id)},children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/watch.svg",alt:"view"})})}),Object(h.jsx)(Oa,{title:"Edit",children:Object(h.jsx)(dt.a,{edge:"start",className:a.icons,onMouseOver:function(){return e.setOver(!0)},onMouseOut:function(){return e.setOver(!1)},onClick:function(a){return e.editRow(a,t)},children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/edit.svg",alt:"edit"})})}),Object(h.jsx)(Oa,{title:"Delete",children:Object(h.jsx)(dt.a,{edge:"start",label:"delete",className:a.icons,onMouseOver:function(){return e.setOver(!0)},onMouseOut:function(){return e.setOver(!1)},onClick:function(a){return e.deleteRow(a,t.id)},children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/delete.svg",alt:"delete"})})})]})}var ya=a(485);function ka(e){var t=pa(),a=e.tableCount>e.rowsPerPage?e.tableCount:e.tableData.length;return e.tableData.length?Object(h.jsx)(ya.a,{className:t.tablePagination,rowsPerPageOptions:[e.rowsPerPage],component:"div",count:a,page:e.page,rowsPerPage:e.rowsPerPage,onChangePage:e.handleChangePage,labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return"".concat(t,"-").concat(a," of ").concat(n)},backIconButtonProps:{color:"primary"},nextIconButtonProps:{color:"primary"}}):null}function wa(e){var t=e.row&&e.row.custom&&e.row.custom.flag,a=e.row&&e.row.custom&&e.row.custom.ban;return Object(h.jsxs)(h.Fragment,{children:[e.isUser&&t?Object(h.jsx)(Oa,{title:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(v.a,{children:"Reason: ".concat(e.row.custom.reason)}),Object(h.jsx)("br",{}),Object(h.jsx)(v.a,{children:"Flagged By: ".concat(e.row.custom.flaggedBy)}),Object(h.jsx)("br",{}),Object(h.jsx)(v.a,{children:"Flagged At: ".concat(Pt(e.row.custom.flaggedAt))})]}),children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/flagged.svg",alt:"flagged"})}):null,e.isUser&&a?Object(h.jsx)("img",{src:"/moderation-dashboard/images/banned.svg",alt:"banned"}):null]})}function Ca(e,t){return e&&!t||e>t?-1:t&&!e||t>e?1:0}function Fa(e,t){return"desc"===e?function(e,a){return Ca(e[t],a[t])}:function(e,a){return-Ca(e[t],a[t])}}function Sa(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}function Na(e){var t=e.headCells,a=e.data,n=r.a.useState("asc"),s=Object(f.a)(n,2),c=s[0],i=s[1],o=r.a.useState(""),l=Object(f.a)(o,2),u=l[0],d=l[1],b=pa(),j=r.a.useState(0),m=Object(f.a)(j,2),g=m[0],p=m[1],x=r.a.useState(25),v=Object(f.a)(x,1)[0],y=r.a.useState(!1),k=Object(f.a)(y,2),w=k[0],C=k[1];r.a.useEffect((function(){p(e.number)}),[e.number]);var F=function(e,t,a){return e.length>a?e.slice(t*a,t*a+a):e}(a,g,v);function S(e){var a=e.headOrder,n=e.headOrderBy,r=e.onRequestSort;return Object(h.jsx)(ua.a,{className:b.tablehead,children:Object(h.jsx)(da.a,{children:t.map((function(e){return Object(h.jsx)(ba.a,{align:e.alignment,padding:e.disablePadding?"none":"default",sortDirection:n===e.id&&a,children:Object(h.jsx)(ja.a,{className:b.headLabel,active:n===e.id,direction:n===e.id?a:"asc",onClick:(t=e.id,function(e){r(e,t)}),children:e.label})},e.id);var t}))})})}var N=function(e){return e%5===0?{backgroundColor:"#FFFABB",color:"#FFD502",borderRadius:"8px"}:e%3===0?{backgroundColor:"#FCF0EF",color:"#E66E68",borderRadius:"8px"}:e%2===0?{backgroundColor:"#CAFFE6",color:"#34F89C",borderRadius:"8px"}:{backgroundColor:"#CAF0FF",color:"#3BC8FF",borderRadius:"8px"}};return Object(h.jsxs)("div",{children:[Object(h.jsx)(ka,{tableCount:e.tableCount,handleChangePage:function(t,n){a.length<=v&&e.getNewPage(n),p(n)},page:g,tableData:a,rowsPerPage:v}),Object(h.jsx)(ha.a,{className:b.tableContainer,children:Object(h.jsxs)(ma.a,{"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table",className:b.table,children:[Object(h.jsx)(S,{headOrder:c,headOrderBy:u,onRequestSort:function(e,t){i(u===t&&"asc"===c?"desc":"asc"),d(t)},rowCount:a.length}),a.length?Object(h.jsx)(ga.a,{children:Sa(F,Fa(c,u)).map((function(a,n){return Object(h.jsx)(da.a,{hover:!!e.handleRowClick,className:"\n                          ".concat(b.tableRow,"\n                          ").concat(e.handleRowClick?b.tableRowClickable:"","\n                        "),role:"checkbox",tabIndex:-1,onClick:function(t){return e.handleRowClick&&e.handleRowClick(t,a,w)},children:t.map((function(t,r){return t.avatar?Object(h.jsx)(ba.a,{align:"left",className:b.tableCell,children:Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(xt.a,{mr:1,children:Object(h.jsx)(bt.a,{variant:"square",style:N(n),src:a.profileUrl,children:Dt(a.name)})}),Object(h.jsxs)(xt.a,{children:[Object(h.jsx)("small",{className:b.keyName,children:a.name}),Object(h.jsx)("br",{}),Object(h.jsx)("small",{className:b.appName,children:a.appName||a.uuid||a.id})]}),Object(h.jsx)(xt.a,{ml:1,pt:1,children:Object(h.jsx)(wa,{isUser:t.user,row:a})})]})},"".concat(a.id,"-").concat(n,"-").concat(r)):t.icons?Object(h.jsx)(ba.a,{align:"left",className:b.tableCellIcon,children:Object(h.jsx)(va,{row:a,editRow:e.editRow,deleteRow:e.deleteRow,viewRow:e.viewRow,isUser:t.user,flagUser:e.flagUser,banUser:e.banUser,unFlagUser:e.unFlagUser,unbanUser:e.unbanUser,setOver:C})},"".concat(a.id,"-").concat(n,"-").concat(r)):Object(h.jsx)(ba.a,{align:"left",className:b.tableCell,children:(s=a[t.id],t.id,s&&s.length>50?s.substring(0,48)+"...":s||"-")},"".concat(a.id,"-").concat(n,"-").concat(r));var s}))},"".concat(a.id,"-").concat(n))}))}):e.message?Object(h.jsx)(ga.a,{children:Object(h.jsx)(da.a,{children:Object(h.jsx)(ba.a,{children:Object(h.jsx)(Xe.a,{severity:"info",className:b.alertMessage,children:e.message})})})}):null]})})]})}function Ta(e){var t=e.searchResult,a=Object(n.useState)([]),r=Object(f.a)(a,2),s=r[0],c=r[1],i=Object(b.g)();Object(n.useEffect)((function(){var e=Mt()&&Mt().result||[],t=[],a={};e.map((function(e,n){return e.keys.map((function(n,r){return(a=n).appName=e.name,a.created=n.created&&St()(new Date(1e3*n.created)).format("MMMM Do YYYY, h:mm a"),a.modified=n.modified&&St()(new Date(1e3*n.modified)).format("MMMM Do YYYY, h:mm a"),a.name=n.properties.name,t.push(a),!1})),!1})),c(t),U("PubNubApplicationsWithKey",t)}),[]),Object(n.useEffect)((function(){t.length&&c(t)}),[t]);return Object(h.jsx)(Na,{data:s,headCells:[{id:"name",alignment:"left",label:"NAME",avatar:!0},{id:"publish_key",alignment:"left",label:"PUBLISH KEY"},{id:"subscribe_key",alignment:"left",label:"SUBSCRIBE KEY"},{id:"created",alignment:"left",label:"CREATED ON"}],handleRowClick:function(e,t){try{var a=s.filter((function(e){return e.subscribe_key===t.subscribe_key}));U("PubNubSelectedApp",a[0]),i.push("/overview")}catch(n){throw new Error(n)}},message:"No data Found",number:0})}var Ma=a(41),Ra=Object(M.a)((function(e){return{grow:{flexGrow:1},title:{font:"var(--unnamed-font-style-normal) normal medium var(--unnamed-font-size-26)/var(--unnamed-line-spacing-31) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",color:"#414141",fontSize:"20px"},search:Object(Ma.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:"white",marginRight:e.spacing(2),marginLeft:0,border:"1px solid #e8eaf6",width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(Ma.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),searchInput:{background:" #FFFFFF 0% 0% no-repeat padding-box",borderRadius:"5px",opacity:1},labelStyle:{color:"#606060"},methodNotSelected:{background:"white",cursor:"pointer",boxShadow:"0px 3px 6px #00000014",border:"0px solid #6387ED",borderRadius:"10px",color:"black",opacity:1,padding:"20px 0px 20px 0px",width:"170px"},methodSelected:{background:"#E7EDFF 0% 0% no-repeat padding-box",cursor:"pointer",boxShadow:"0px 3px 6px #00000014",border:"1px solid #6387ED",borderRadius:"10px",color:"#6387ED",opacity:1,padding:"20px 0px 20px 0px",width:"170px"},profanityCardRoot:{padding:"20px"},cancelButton:{width:"150px",margin:"3px",height:"37px",boxShadow:"0px 0px 0px white",backgroundColor:"white",border:"1px solid #707070",borderRadius:"8px",opacity:1,font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) 13px/16px var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",color:"#707070",fontSize:"13px"},saveButton:{background:"#6387ED 0% 0% no-repeat padding-box",borderRadius:"8px",opacity:1,color:"white",width:"150px",margin:"8px",height:"37px",fontSize:"13px","&:hover":{background:"#6387ED 0% 0% no-repeat padding-box",color:"white"}},addButton:{fontSize:"17px"},addButtonContainer:{marginTop:"3px",background:"#E7EDFF",color:"#6387ED",opacity:1,"&:hover":{background:"#E7EDFF",color:"#6387ED"}},defaultText:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-16)/var(--unnamed-line-spacing-19) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textDecoration:"underline",color:"#6387ED",cursor:"pointer",opacity:1,"&:hover":{background:"#E7EDFF",color:"#6387ED"}},loader:{marginRight:"5px"},reroute:{textTransform:"none",marginLeft:"8px",backgroundColor:"#FCF0EF",color:"#FB6340",marginTop:"5px"},subTitle:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-18)/var(--unnamed-line-spacing-23) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#606060",opacity:1,paddingBottom:"12px"},infoIcon:{padding:"3px 0px 0px 5px"}}})),Ia=a(222),Aa=a.n(Ia);function Da(e){var t=Ra();return Object(h.jsx)(Aa.a,{id:"searchBar",value:e.searched,onRequestSearch:function(t){return e.requestSearch(t)},onChange:function(t){return function(t){t||e.cancelSearch()}(t)},onCancelSearch:function(){return e.cancelSearch()},placeholder:e.placeholder,className:t.searchInput,searchIcon:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/search.svg",alt:""})}),disabled:e.disabled,autoComplete:"off"})}var Pa=a(492);var La=function(e){var t=e.status,a=e.msg,s=r.a.useState(!0),c=Object(f.a)(s,2),i=c[0],o=c[1];function l(e,t){"clickaway"!==t&&o(!1)}return Object(n.useEffect)((function(){o(!0)}),[t]),Object(h.jsx)(Pa.a,{id:"snackBar",anchorOrigin:{vertical:"top",horizontal:"right"},open:i,autoHideDuration:9e3,onClose:l,children:Object(h.jsx)(Xe.a,{onClose:l,severity:t,children:a})})};var Ea=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),o=Object(f.a)(c,2),l=o[0],u=o[1],d=Object(n.useState)({success:{status:!1,msg:""},error:{status:!1,msg:""}}),b=Object(f.a)(d,2),j=b[0],m=b[1],g=function(e){m(Object(i.a)(Object(i.a)({},j),{},{success:{status:!1,msg:""},error:{status:!1,msg:""}}));var t=It().filter((function(t){return t.publish_key.toLowerCase().includes(e.toLowerCase())||t.subscribe_key.toLowerCase().includes(e.toLowerCase())}));t.length||m(Object(i.a)(Object(i.a)({},j),{},{success:{status:!1,msg:""},error:{status:!0,msg:"No applications found"}})),s(t)};return Object(n.useEffect)((function(){s(It())}),[]),Object(h.jsxs)(r.a.Fragment,{children:[Object(h.jsx)(la.a,{title:"Applications"}),Object(h.jsx)(O.a,{justify:"center",container:!0,children:Object(h.jsx)(O.a,{item:!0,sm:11,md:11,lg:11,children:Object(h.jsxs)(O.a,{justify:"space-between",container:!0,spacing:0,children:[Object(h.jsx)(O.a,{item:!0,sm:8,md:8,xs:12,children:Object(h.jsx)(xt.a,{pl:1,pt:4,pb:2,children:Object(h.jsx)(v.a,{testid:"AppListingHeader",variant:"h5",children:"Applications"})})}),Object(h.jsx)(O.a,{item:!0,sm:4,md:4,xs:12,children:Object(h.jsx)(xt.a,{pl:8,pt:4,pb:2,children:Object(h.jsx)(Da,{testId:"AppListingSearchText",searched:l,requestSearch:g,cancelSearch:function(){u(""),g(l)},placeholder:"Search for publish or subscribe key"})})})]})})}),Object(h.jsx)("br",{}),Object(h.jsx)(O.a,{container:!0,spacing:0,justify:"center",children:Object(h.jsx)(O.a,{item:!0,xs:12,sm:11,md:11,lg:11,children:Object(h.jsx)(Ta,{searchResult:a})})}),j.error.status&&Object(h.jsx)(La,{msg:j.error.msg,status:"info"}),j.success.status&&Object(h.jsx)(La,{msg:j.success.msg,status:"success"})]})},Ba=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{}),Object(h.jsx)(oa,{}),Object(h.jsx)(Ea,{})]})},Ua=a(406),qa=a(407),Wa=a(464),_a=a(466),za=a(470),Ka=Object(M.a)((function(e){return{root:{display:"flex",padding:"10px"},textModerationIcon:{color:"#00e676"},overviewIcon:{color:"#673ab7"},channelIcon:{color:"#e91e63"},settingsIcon:{color:"#f44336"},chatIcon:{color:"#ffc400"},userIcon:{color:"#00e5ff"},drawer:Object(Ma.a)({},e.breakpoints.up("xs"),{width:220,flexShrink:0}),listItemRoot:{minWidth:"40px"},content:{flexGrow:1,padding:e.spacing(3)}}})),Ha=a(465),Va=a(467),Ya=a(468),Ja=a(469),$a=a(471),Ga=a(472),Xa=a(473),Za=a(474);var Qa=function(e){var t=e.content,a=Ka(),n=Object(b.g)(),s=r.a.useState(!1),c=Object(f.a)(s,2),i=c[0],o=c[1],l=Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:a.toolbar}),Object(h.jsxs)(Ua.a,{disablePadding:!0,children:[Object(h.jsxs)(qa.a,{id:"overviewItem",onClick:function(){return n.push("/overview")},selected:"/overview"===n.location.pathname,button:!0,children:[Object(h.jsx)(Wa.a,{className:a.listItemRoot,children:Object(h.jsx)(Ha.a,{className:a.overviewIcon})}),Object(h.jsx)(_a.a,{children:Object(h.jsx)(v.a,{variant:"body2",children:"Overview"})})]}),Object(h.jsxs)(qa.a,{id:"settingsItem",button:!0,onClick:function(){o(!i)},children:[Object(h.jsx)(Wa.a,{className:a.listItemRoot,children:Object(h.jsx)(Va.a,{className:a.settingsIcon})}),Object(h.jsx)(_a.a,{children:Object(h.jsx)(v.a,{variant:"body2",children:"Settings"})}),i?Object(h.jsx)(Ya.a,{}):Object(h.jsx)(Ja.a,{})]}),Object(h.jsx)(za.a,{in:i,timeout:"auto",unmountOnExit:!0,children:Object(h.jsxs)(Ua.a,{component:"div",disablePadding:!0,children:[Object(h.jsxs)(qa.a,{button:!0,onClick:function(){return n.push("/text-moderation")},selected:"/text-moderation"===n.location.pathname,children:[Object(h.jsx)(Wa.a,{className:a.settingsItemRoot,children:Object(h.jsx)($a.a,{className:a.textModerationIcon})}),Object(h.jsx)(_a.a,{children:Object(h.jsx)(v.a,{variant:"body2",children:"Text Moderation"})})]}),Object(h.jsxs)(qa.a,{button:!0,onClick:function(){return n.push("/image-moderation")},children:[Object(h.jsx)(Wa.a,{className:a.settingsItemRoot,children:Object(h.jsx)(Ga.a,{className:a.chatIcon})}),Object(h.jsx)(_a.a,{children:Object(h.jsx)(v.a,{variant:"body2",children:"Image Moderation"})})]})]})}),Object(h.jsxs)(qa.a,{id:"usersItem",button:!0,onClick:function(){return n.push("/users")},selected:"/users"===n.location.pathname,children:[Object(h.jsx)(Wa.a,{className:a.listItemRoot,children:Object(h.jsx)(Xa.a,{className:a.userIcon})}),Object(h.jsx)(_a.a,{children:Object(h.jsx)(v.a,{variant:"body2",children:"Users"})})]}),Object(h.jsxs)(qa.a,{id:"channelsItem",button:!0,onClick:function(){return n.push("/channels")},selected:"/channels"===n.location.pathname,children:[Object(h.jsx)(Wa.a,{className:a.listItemRoot,children:Object(h.jsx)(Za.a,{className:a.channelIcon})}),Object(h.jsx)(_a.a,{children:Object(h.jsx)(v.a,{variant:"body2",children:"Channels"})})]})]})]});return Object(h.jsxs)("div",{className:a.root,children:[Object(h.jsx)("nav",{className:a.drawer,children:l}),Object(h.jsx)("main",{className:a.content,children:t})]})},en=function(e){var t=e.children;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j.a,{}),Object(h.jsx)(oa,{}),Object(h.jsx)(Qa,{content:t})]})},tn=a(475),an=a(486),nn=a(439),rn=a(482),sn=a(493),cn=function(e){var t=e.setState,a=e.state,n=e.profanityList,r=e.setProfanityList,s=e.name;return function(e){"wordListChannel"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{channelOnChange:!0,wordList:Object(i.a)(Object(i.a)({},a.wordList),{},{wordListChannel:e.target.value})})):"wordListLanguage"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{wordList:Object(i.a)(Object(i.a)({},a.wordList),{},{wordListLanguage:e.target.value})})):"wordListLanguageWords"===e.target.name?r(Object(i.a)(Object(i.a)({},n),{},Object(Ma.a)({},a.wordList.wordListLanguage,e.target.value))):"wordListModtype"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{wordList:Object(i.a)(Object(i.a)({},a.wordList),{},{wordListModType:e.target.value})})):"wordListCharacterToMaskWith"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{wordList:Object(i.a)(Object(i.a)({},a.wordList),{},{wordListCharacterToMaskWith:e.target.value})})):"wordListRerouteMessage"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{wordList:Object(i.a)(Object(i.a)({},a.wordList),{},{wordListReRouteMessages:e.target.checked})})):"applyToAllChannelIdsWordlist"===s&&(e.target.checked?t(Object(i.a)(Object(i.a)({},a),{},{wordList:Object(i.a)(Object(i.a)({},a.wordList),{},{wordListChannel:"*",applyToAllChannelIdsWordlist:e.target.checked})})):t(Object(i.a)(Object(i.a)({},a),{},{wordList:Object(i.a)(Object(i.a)({},a.wordList),{},{applyToAllChannelIdsWordlist:e.target.checked})})))}},on=function(e){var t=e.handleSave,a=e.defaultWords,n=e.state,r=e.setState,s=e.profanityList,c=e.setProfanityList,i=Ra(),o=n.wordList,l=o.wordListChannel,u=o.wordListLanguage,d=o.wordListModType,b=o.wordsListPatternError,j=o.wordListReRouteMessages,m=o.wordsListMaskCharError,g=o.wordsListChannelError,p=o.applyToAllChannelIdsWordlist,x=o.wordListCharacterToMaskWith,f=$t(j),C=$t(p);return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(tn.a,{className:i.profanityCardRoot,children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)("label",{testId:"Channel_Id",className:i.labelStyle,children:"Channel ID"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{className:i.infoIcon,children:Object(h.jsx)(Oa,{title:"Note: Please add a Channel ID or a Channel pattern. eg. channel.* OR pubNub. Channel ID pattern applies to BOTH text & image moderation if both are enabled.",children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info-circle.svg",alt:"info-circle"})})})})]}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(y.a,{id:"channelId",placeholder:"Channel",name:"wordListChannel",disabled:C,error:g,variant:"outlined",size:"small",fullWidth:!0,value:l,onChange:cn({setState:r,state:n,profanityList:s,setProfanityList:c})})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(O.a,{container:!0,justify:"flex-start",children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(an.a,{id:"allChannelIdcheckBox",checked:C,onChange:cn({setState:r,state:n,name:"applyToAllChannelIdsWordlist"})})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{pt:1,children:Object(h.jsx)(v.a,{testid:"allChannelIdText",variant:"body1",children:"Apply to All Channel IDs"})})})]})}),Object(h.jsx)("br",{}),Object(h.jsx)(O.a,{container:!0,justify:"flex-start",children:Object(h.jsxs)(O.a,{item:!0,sm:5,children:[Object(h.jsx)("label",{testId:"language",className:i.labelStyle,children:"Language"}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(nn.a,{className:i.formControl,size:"small",placeholder:"Langauge",fullWidth:!0,children:Object(h.jsx)(rn.a,{id:"wordListLanguage",variant:"outlined",MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null},name:"wordListLanguage",value:u,onChange:cn({setState:r,state:n,profanityList:s,setProfanityList:c}),inputProps:{"aria-label":"Without label"},children:["English","Hindi","Spanish","Portugese","French"].map((function(e,t){return Object(h.jsx)(Ot.a,{value:e,children:e},t)}))})})})]})}),Object(h.jsx)("br",{}),Object(h.jsxs)(O.a,{container:!0,justify:"space-between",children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)("label",{testId:"WordList",className:i.labelStyle,children:"Word List"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{className:i.infoIcon,children:Object(h.jsx)(Oa,{title:"Note: Please add comma after a every word. No spaces are allowed",children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info-circle.svg",alt:"info-circle"})})})})]})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(v.a,{testid:"defaultWordsLabel",align:"right",className:i.defaultText,onClick:function(){return a(u)},children:"Use Default words"})})]}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(y.a,{id:"defaultWordsBox",placeholder:"comma,separated,list,of,words",className:i.languageWords,multiline:!0,error:b,rowsMax:6,name:"wordListLanguageWords",value:Wt(s,u),onChange:cn({setState:r,state:n,profanityList:s,setProfanityList:c}),fullWidth:!0,variant:"outlined"})}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsxs)(O.a,{container:!0,justify:"flex-start",spacing:6,children:[Object(h.jsxs)(O.a,{item:!0,sm:6,md:6,children:[Object(h.jsx)("label",{testId:"MaskOrBlock",className:i.labelStyle,children:"When Profanity is detected"}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(nn.a,{className:i.formControl,size:"small",fullWidth:!0,children:Object(h.jsxs)(rn.a,{id:"MaskOrBlockOption",variant:"outlined",MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null},name:"wordListModtype",onChange:cn({setState:r,state:n,profanityList:s,setProfanityList:c}),value:d,inputProps:{"aria-label":"Without label"},children:[Object(h.jsx)(Ot.a,{value:"Mask-word",children:"Mask Word"}),Object(h.jsx)(Ot.a,{value:"Block-message",children:"Block Message"})]})})})]}),Object(h.jsx)(O.a,{item:!0,sm:6,md:6,children:"Mask-word"===d&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)("label",{testId:"maskLabel",className:i.label,children:"Set a masking character"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{className:i.infoIcon,children:Object(h.jsx)(Oa,{title:"Note: Default value will be *",children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info-circle.svg",alt:"info-circle"})})})})]}),Object(h.jsx)(xt.a,{pt:1,children:Object(h.jsx)(y.a,{id:"maskChar",size:"small",placeholder:"Set",inputProps:{maxLength:1},error:m,className:i.languageWords,value:x,onChange:cn({setState:r,state:n,profanityList:s,setProfanityList:c}),fullWidth:!0,name:"wordListCharacterToMaskWith",variant:"outlined"})})]})})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(O.a,{container:!0,justify:"flex-start",children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(an.a,{id:"reRouteCheckBox",name:"wordListRerouteMessage",onChange:cn({setState:r,state:n,profanityList:s,setProfanityList:c}),checked:f})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{pt:1,children:Object(h.jsx)(v.a,{testid:"ReRouteLabel",variant:"body1",children:"Route messages to"})})})]})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{children:Object(h.jsx)(sn.a,{className:i.reroute,label:"banned."+l})})})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(O.a,{container:!0,justify:"space-between",spacing:2,children:[Object(h.jsx)(O.a,{item:!0}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(k.a,{id:"save",disabled:n.saveLoading,className:i.saveButton,onClick:t,variant:"contained",children:[n.saveLoading?Object(h.jsx)(w.a,{size:25,thickness:4,color:"primary",className:i.loader}):Object(h.jsx)(h.Fragment,{}),"Save"]})})]})]})})},ln=Object(M.a)((function(e){return{filterText:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) 24px/16px Graphik",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#606060",opacity:1,fontSize:"18px"},label:{color:"#606060"},cardRoot:{padding:"20px"},cancelButtonStyle:{width:"150px",margin:"3px",height:"37px",boxShadow:"0px 0px 0px white",backgroundColor:"white",border:"1px solid #707070",borderRadius:"8px",opacity:1,font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) 13px/16px var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",color:"#707070",fontSize:"13px"},saveButtonStyle:{background:"#6387ED 0% 0% no-repeat padding-box",borderRadius:"8px",opacity:1,color:"white",width:"150px",margin:"8px",height:"37px",fontSize:"13px","&:hover":{background:"#6387ED 0% 0% no-repeat padding-box",color:"white"}},testText:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-16)/var(--unnamed-line-spacing-19) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textDecoration:"underline",color:"#6387ED",cursor:"pointer",opacity:1,"&:hover":{background:"#E7EDFF",color:"#6387ED"}},loaderStyle:{marginRight:"5px"},reroute:{textTransform:"none",marginLeft:"8px",backgroundColor:"#FCF0EF",color:"#FB6340",marginTop:"5px"},infoIcon:{padding:"3px 0px 0px 5px"}}})),un=Object(fa.a)({root:{color:"#6387ED",height:8},thumb:{height:15,width:15,backgroundColor:"#6387ED",border:"2px solid currentColor",marginTop:-4,marginLeft:-4,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}}),dn=Object(M.a)((function(e){return{root:{width:"100%"},margin:{height:e.spacing(3)}}})),bn=un(a(494).a);function jn(e){var t=e.value,a=e.onChange,n=e.name,r=dn(),s=[{value:0,label:"tisane"===n?"None":0},{value:.25,label:"tisane"===n?"Extreme":.25},{value:.5,label:"tisane"===n?"High":.5},{value:.75,label:"tisane"===n?"Medium":.75},{value:1,label:"tisane"===n?"Low":1}];return Object(h.jsx)("div",{className:r.root,children:Object(h.jsx)(bn,{value:t,min:0,getAriaValueText:function(e){return"".concat(e)},"aria-labelledby":"discrete-slider",step:.25,marks:s,max:1,onChange:a})})}var hn=function(e){var t=e.setState,a=e.state,n=e.name;return function(e,r){"toolForAutomaticDetection"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{toolForAutomaticDetection:e.target.value})})):"automaticDetectionChannel"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{channelOnChange:!0,automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{automaticDetectionChannel:e.target.value})})):"automaticDetectionReRouteMessages"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{automaticDetectionReRouteMessages:e.target.checked})})):"automaticDetectionModType"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{automaticDetectionModType:e.target.value})})):"riskFactorThresholdForVulgar"===n?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{siftNinjaRiskFactorThresholdVulgar:r})})):"riskFactorThresholdForSexting"===n?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{siftNinjaRiskFactorThresholdSexting:r})})):"riskFactorThresholdForRacism"===n?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{siftNinjaRiskFactorThresholdRacism:r})})):"siftNinjaAccountName"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{siftNinjaAccountName:e.target.value})})):"siftNinjaChannelName"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{siftNinjaChannelName:e.target.value})})):"siftNinjaApiKey"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{siftNinjaApiKey:e.target.value})})):"automaticDetectionCharacterToMaskWith"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{automaticDetectionCharacterToMaskWith:e.target.value})})):"applyToAllChannelIdsAutomatic"===n&&(e.target.checked?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{automaticDetectionChannel:"*",applyToAllChannelIdsAutomatic:e.target.checked})})):t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{applyToAllChannelIdsAutomatic:e.target.checked})})))}},mn=function(e){var t=e.setState,a=e.state,n=e.name;return function(e,r){"tisaneApiKey"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{tisaneApiKey:e.target.value})})):"tisaneLanguage"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{tisaneLanguage:e.target.value})})):"riskFactorThresholdForBigotry"===n?t(Object(i.a)(Object(i.a)({},a),{},{channelOnChange:!0,automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{tisaneRiskFactorThresholdBigotry:r})})):"riskFactorThresholdForCyberBullying"===n?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{tisaneRiskFactorThresholdCyberBullying:r})})):"riskFactorThresholdForCriminalActivity"===n?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{tisaneRiskFactorThresholdCriminalActivity:r})})):"riskFactorThresholdForSexualAdvances"===n?t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{tisaneRiskFactorThresholdSexualAdvances:r})})):"riskFactorThresholdForProfanity"===n&&t(Object(i.a)(Object(i.a)({},a),{},{automaticDetection:Object(i.a)(Object(i.a)({},a.automaticDetection),{},{tisaneRiskFactorThresholdProfanity:r})}))}},gn=function(e){var t=e.state,a=e.setState,n=e.handleSave,r=t.automaticDetection,s=r.toolForAutomaticDetection,c=r.siftNinjaRiskFactorThresholdVulgar,i=r.siftNinjaRiskFactorThresholdSexting,o=r.siftNinjaRiskFactorThresholdRacism,l=r.siftNinjaAccountName,u=r.siftNinjaChannelName,d=r.siftNinjaApiKey,b=r.automaticMaskCharError,j=r.automaticChannelError,m=r.automaticDetectionChannel,g=r.automaticDetectionReRouteMessages,p=r.automaticDetectionModType,x=r.applyToAllChannelIdsAutomatic,f=r.automaticDetectionCharacterToMaskWith,C=r.tisaneRiskFactorThresholdBigotry,F=r.tisaneRiskFactorThresholdCyberBullying,S=r.tisaneRiskFactorThresholdCriminalActivity,N=r.tisaneRiskFactorThresholdSexualAdvances,T=r.tisaneRiskFactorThresholdProfanity,M=r.tisaneApiKey,R=r.tisaneLanguage,I=ln(),A=$t(g),D=$t(x),P=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{children:"Sign up with "}),Object(h.jsx)("a",{style:{fontWeight:600,color:"black",textDecorationLine:"none"},href:"https://tisane.ai/signup/",children:"Tisane.ai"}),Object(h.jsx)("span",{children:" locate your key under your "}),Object(h.jsx)("a",{style:{fontWeight:600,color:"black",textDecorationLine:"none"},href:"https://tisane.ai/developer/",children:"Developer Profile."}),Object(h.jsx)("span",{children:" Use primary or secondary key. "})]});return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(tn.a,{className:I.cardRoot,children:[Object(h.jsxs)(xt.a,{children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)("label",{testId:"Channel_Id",className:I.label,children:"Channel ID"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{className:I.infoIcon,children:Object(h.jsx)(Oa,{title:"Note: Please add a Channel ID or a Channel pattern. eg. channel.* OR pubNub. Channel ID pattern applies to BOTH text & image moderation if both are enabled.",children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info-circle.svg",alt:"info-circle"})})})})]}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(y.a,{id:"channelId",variant:"outlined",placeholder:"Enter channel or channel pattern here Under18.*, Under18",size:"small",fullWidth:!0,disabled:D,error:j,name:"automaticDetectionChannel",value:m,onChange:hn({setState:a,state:t})})})]}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(O.a,{container:!0,justify:"flex-start",children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(an.a,{id:"applyAll",checked:D,onChange:hn({setState:a,state:t,name:"applyToAllChannelIdsAutomatic"})})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{pt:1,pl:1,children:Object(h.jsx)(v.a,{testId:"applyAll_channel",variant:"body1",children:"Apply to All Channel IDs"})})})]})}),Object(h.jsx)("br",{}),Object(h.jsx)(O.a,{container:!0,justify:"flex-start",children:Object(h.jsxs)(O.a,{item:!0,sm:12,children:[Object(h.jsx)("label",{testId:"SelectToolLabel",className:I.label,children:"Select third party tool for Automatic Detection"}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(nn.a,{size:"small",fullWidth:!0,children:Object(h.jsxs)(rn.a,{id:"selectTool",variant:"outlined",name:"toolForAutomaticDetection",value:s,onChange:hn({setState:a,state:t}),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null},children:[Object(h.jsx)(Ot.a,{value:"tisane",children:"Tisane.ai"}),Object(h.jsx)(Ot.a,{value:"siftninja",children:"SiftNinja"})]})})})]})}),Object(h.jsx)("br",{}),"siftninja"===s&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(xt.a,{pt:1,children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)("label",{testid:"accountName",className:I.label,children:"SiftNinja Account Name"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{className:I.infoIcon,children:Object(h.jsx)(Oa,{title:"This option is only available for users who have an existing SiftNinja account",children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info-circle.svg",alt:"info-circle"})})})})]}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(y.a,{id:"siftAccountName",variant:"outlined",size:"small",placeholder:"SiftNinja Account Name",fullWidth:!0,name:"siftNinjaAccountName",value:l,onChange:hn({setState:a,state:t})})})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(xt.a,{pt:1,children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)("label",{testId:"siftChannelName",className:I.label,children:"SiftNinja Channel Name"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{className:I.infoIcon,children:Object(h.jsx)(Oa,{title:"This option is only available for users who have an existing SiftNinja account",children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info-circle.svg",alt:"info-circle"})})})})]}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(y.a,{id:"siftChannelName",variant:"outlined",size:"small",fullWidth:!0,name:"siftNinjaChannelName",placeholder:"SiftNinja Channel Name",value:u,onChange:hn({setState:a,state:t})})})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(xt.a,{pt:1,children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)("label",{testid:"siftApiKey",className:I.label,children:"SiftNinja API Key"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{className:I.infoIcon,children:Object(h.jsx)(Oa,{title:"This option is only available for users who have an existing SiftNinja account",children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info-circle.svg",alt:"info-circle"})})})})]}),Object(h.jsxs)(xt.a,{pt:1,mb:2,children:[Object(h.jsx)(y.a,{id:"siftApiKey",variant:"outlined",size:"small",fullWidth:!0,name:"siftNinjaApiKey",placeholder:"SiftNinja API key",value:d,onChange:hn({setState:a,state:t})}),Object(h.jsx)(v.a,{testid:"connectivity",align:"right",className:I.testText,children:"Test Conectivity"})]})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(O.a,{container:!0,justify:"space-between",spacing:6,children:[Object(h.jsx)(O.a,{item:!0,sm:6,xs:12,md:6,lg:6,children:Object(h.jsxs)(xt.a,{children:[Object(h.jsx)("label",{testid:"vulgarRiskFactor",className:I.label,children:"SiftNinja Risk Factor Threshold For Vulgarity"}),Object(h.jsx)(xt.a,{pt:1,children:Object(h.jsx)(jn,{id:"vulgarRiskFactor",name:s,value:c,onChange:hn({setState:a,state:t,name:"riskFactorThresholdForVulgar"})})})]})}),Object(h.jsx)(O.a,{item:!0,sm:6,xs:6,md:6,lg:6,children:Object(h.jsxs)(xt.a,{children:[Object(h.jsx)("label",{testId:"SextingRisk",className:I.label,children:"SiftNinja Risk Factor Threshold For Sexting"}),Object(h.jsx)(xt.a,{pt:1,children:Object(h.jsx)(jn,{id:"SextingRisk",name:s,value:i,onChange:hn({setState:a,state:t,name:"riskFactorThresholdForSexting"})})})]})}),Object(h.jsx)(O.a,{item:!0,sm:6,xs:6,md:6,lg:6,children:Object(h.jsxs)(xt.a,{children:[Object(h.jsx)("label",{testid:"racismRisk",className:I.label,children:"SiftNinja Risk Factor Threshold For Racism"}),Object(h.jsx)(xt.a,{pt:1,children:Object(h.jsx)(jn,{id:"racismRisk",name:s,value:o,onChange:hn({setState:a,state:t,name:"riskFactorThresholdForRacism"})})})]})})]})]}),"tisane"===s&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(xt.a,{pt:1,children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)("label",{testid:"tisaneApiKey",className:I.label,children:"Tisane.ai API Key"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{className:I.infoIcon,children:Object(h.jsx)(Oa,{title:P,interactive:!0,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info-circle.svg",alt:"info-circle"})})})})]}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(y.a,{id:"tisaneApiKey",variant:"outlined",size:"small",fullWidth:!0,name:"tisaneApiKey",value:M,placeholder:"Tisane.ai API key",onChange:mn({setState:a,state:t})})})]}),Object(h.jsx)("br",{}),Object(h.jsx)(O.a,{container:!0,justify:"flex-start",children:Object(h.jsxs)(O.a,{item:!0,sm:5,children:[Object(h.jsx)("label",{testid:"lang",className:I.labelStyle,children:"Language"}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(nn.a,{className:I.formControl,size:"small",placeholder:"Langauge",fullWidth:!0,children:Object(h.jsx)(rn.a,{id:"lang",variant:"outlined",MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null},value:R,name:"tisaneLanguage",inputProps:{"aria-label":"Without label"},onChange:mn({setState:a,state:t}),children:["Autodetect","English","Spanish","Portugese","French"].map((function(e,t){return Object(h.jsx)(Ot.a,{value:e,children:e},t)}))})})})]})}),Object(h.jsx)("br",{}),Object(h.jsxs)(O.a,{container:!0,justify:"space-between",spacing:6,children:[Object(h.jsx)(O.a,{item:!0,sm:6,xs:12,md:6,lg:6,children:Object(h.jsxs)(xt.a,{pl:1,children:[Object(h.jsx)("label",{testid:"BigotryLevel",className:I.label,children:"Filter Level For Bigotry (Hate Speech)"}),Object(h.jsx)(xt.a,{pt:1,children:Object(h.jsx)(jn,{id:"BigotryLevel",value:C,name:s,onChange:mn({setState:a,state:t,name:"riskFactorThresholdForBigotry"})})})]})}),Object(h.jsx)(O.a,{item:!0,sm:6,xs:6,md:6,lg:6,children:Object(h.jsxs)(xt.a,{pl:1,children:[Object(h.jsx)("label",{testid:"CyberBullying",className:I.label,children:"Filter Level For Personal Attacks (Cyberbullying)"}),Object(h.jsx)(xt.a,{pt:1,children:Object(h.jsx)(jn,{id:"CyberBullying",value:F,name:s,onChange:mn({setState:a,state:t,name:"riskFactorThresholdForCyberBullying"})})})]})}),Object(h.jsx)(O.a,{item:!0,sm:6,xs:12,md:6,lg:6,children:Object(h.jsxs)(xt.a,{pl:1,children:[Object(h.jsx)("label",{testid:"criminalLevel",className:I.label,children:"Filter Level For Criminal Activity"}),Object(h.jsx)(xt.a,{pt:1,children:Object(h.jsx)(jn,{id:"criminalLevel",value:S,name:s,onChange:mn({setState:a,state:t,name:"riskFactorThresholdForCriminalActivity"})})})]})}),Object(h.jsx)(O.a,{item:!0,sm:6,xs:6,md:6,lg:6,children:Object(h.jsxs)(xt.a,{pl:1,children:[Object(h.jsx)("label",{testid:"sexualLevel",className:I.label,children:"Filter Level For Sexual Advances"}),Object(h.jsx)(xt.a,{pt:1,children:Object(h.jsx)(jn,{id:"sexualLevel",value:N,name:s,onChange:mn({setState:a,state:t,name:"riskFactorThresholdForSexualAdvances"})})})]})}),Object(h.jsx)(O.a,{item:!0,sm:6,xs:12,md:6,lg:6,children:Object(h.jsxs)(xt.a,{pl:1,children:[Object(h.jsx)("label",{testid:"ProfanityLevel",className:I.label,children:"Filter Level For Profanity"}),Object(h.jsx)(xt.a,{pt:1,children:Object(h.jsx)(jn,{id:"ProfanityLevel",value:T,name:s,onChange:mn({setState:a,state:t,name:"riskFactorThresholdForProfanity"})})})]})})]})]}),Object(h.jsxs)(O.a,{container:!0,justify:"flex-start",spacing:6,children:[Object(h.jsxs)(O.a,{item:!0,sm:6,md:6,children:[Object(h.jsx)("label",{testid:"blockOrMask",className:I.label,children:"When profanity is detected"}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(nn.a,{size:"small",fullWidth:!0,children:Object(h.jsxs)(rn.a,{id:"blockOrMask",variant:"outlined",value:p,name:"automaticDetectionModType",onChange:hn({setState:a,state:t}),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null},inputProps:{"aria-label":"Without label"},children:[Object(h.jsx)(Ot.a,{value:"mask-message",children:"Mask Message"}),Object(h.jsx)(Ot.a,{value:"block-message",children:"Block Message"})]})})})]}),Object(h.jsx)(O.a,{item:!0,sm:6,md:6,children:"mask-message"===p&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)("label",{testid:"setChar",className:I.label,children:"Set a masking character"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{className:I.infoIcon,children:Object(h.jsx)(Oa,{title:"Note: Default value will be *",children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info-circle.svg",alt:"info-circle"})})})})]}),Object(h.jsx)(xt.a,{pt:1,children:Object(h.jsx)(y.a,{id:"setChar",size:"small",placeholder:"Set",error:b,inputProps:{maxLength:1},className:I.languageWords,value:f,name:"automaticDetectionCharacterToMaskWith",onChange:hn({setState:a,state:t}),fullWidth:!0,variant:"outlined"})})]})})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(O.a,{container:!0,justify:"flex-start",children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(an.a,{id:"reRoute",name:"automaticDetectionReRouteMessages",onChange:hn({setState:a,state:t}),checked:A})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{pt:1,pl:1,children:Object(h.jsx)(v.a,{testid:"reRouteMsg",variant:"body1",children:"Route messages to"})})})]})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{children:Object(h.jsx)(sn.a,{className:I.reroute,label:"banned."+m})})})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(O.a,{container:!0,justify:"space-between",spacing:3,children:[Object(h.jsx)(O.a,{item:!0}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(k.a,{id:"save",disabled:t.saveLoading,className:I.saveButtonStyle,onClick:n,variant:"contained",children:[t.saveLoading?Object(h.jsx)(w.a,{size:25,thickness:4,color:"primary",className:I.loaderStyle}):Object(h.jsx)(h.Fragment,{}),"Save"]})})]})]})})},pn=function(e){var t=e.handleSave,a=e.defaultWords,n=e.state,r=e.setState,s=e.profanityList,c=e.setProfanityList;return"true"===n.wordListProfanity?Object(h.jsx)(on,{handleSave:t,defaultWords:a,state:n,setState:r,profanityList:s,setProfanityList:c}):"true"===n.automaticProfanity?Object(h.jsx)(gn,{state:n,setState:r,handleSave:t}):Object(h.jsx)(h.Fragment,{})},xn=a(476),fn=Object(fa.a)((function(e){return{root:{width:49,height:24,padding:0,marginLeft:"15px",margin:e.spacing(0)},switchBase:{padding:1,"&$checked":{transform:"translateX(23px)",color:e.palette.common.white,"& + $track":{backgroundColor:"#6387ED",opacity:1,border:"none"}},"&$focusVisible $thumb":{color:"#52d869",border:"6px solid #fff"}},thumb:{width:24,height:22},track:{borderRadius:12,border:"1px solid ".concat(e.palette.grey[400]),backgroundColor:e.palette.grey[50],opacity:1,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{}}})),On=["classes"],vn=fn((function(e){var t=e.classes,a=Object(at.a)(e,On);return Object(h.jsx)(xn.a,Object(i.a)({focusVisibleClassName:t.focusVisible,disableRipple:!0,classes:{root:t.root,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked}},a))})),yn=function(e){var t=e.state,a=e.handleClick,n=Ra();return Object(h.jsxs)(O.a,{container:!0,justify:"flex-start",spacing:3,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(xt.a,{className:"true"===t.wordListProfanity?n.methodSelected:n.methodNotSelected,onClick:a("wordListMethod"),children:[Object(h.jsx)(O.a,{container:!0,justify:"center",children:Object(h.jsx)(xt.a,{p:1,children:Object(h.jsx)("img",{alt:"",src:"true"===t.wordListProfanity?"/moderation-dashboard/images/selected-word-list.svg":"/moderation-dashboard/images/word-list-not-selected.svg"})})}),Object(h.jsx)(v.a,{variant:"body1",align:"center",children:"Word List"})]})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(xt.a,{className:"true"===t.automaticProfanity?n.methodSelected:n.methodNotSelected,onClick:a("automaticMethod"),children:[Object(h.jsx)(O.a,{container:!0,justify:"center",children:Object(h.jsx)(xt.a,{p:1,children:Object(h.jsx)("img",{alt:"",src:"true"===t.automaticProfanity?"/moderation-dashboard/images/automatic-profanity-selected.svg":"/moderation-dashboard/images/automatic-detection.svg"})})}),Object(h.jsx)(v.a,{testid:"autoDetection",variant:"body1",align:"center",children:"Automatic Detection"})]})})]})},kn='"\\b(banned)\\b"'.replace(/\\/g,"\\\\");function wn(e){var t,a,n,r,s,c,i,o,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";if("default"===l)t=e.wordListCharacterToMaskWith,a=e.wordListModType,n=e.wordListReRouteMessages,r=e.englishProfanity,s=e.hindiProfanity,c=e.frenchProfanity,i=e.spanishProfanity,o=e.portugeseProfanity;else{var u=e.wordList;t=u.wordListCharacterToMaskWith,a=u.wordListModType,n=u.wordListReRouteMessages,r=u.englishProfanity,s=u.hindiProfanity,c=u.frenchProfanity,i=u.spanishProfanity,o=u.portugeseProfanity}var d="Mask-word"===a,b="Block-message"===a,j=$t(n),h={};h=e.profanityList?e.profanityList:{English:r.split("|").join(","),Hindi:s.split("|").join(","),Portugese:o.split("|").join(","),French:c.split("|").join(","),Spanish:i.split("|").join(",")};var m=Yt(h).replace(/(\r\n|\n|\r)/gm,""),g='"\\b('.concat(m,')\\b"').replace(/\\/g,"\\\\");return d?j?Fn({regex:g,wordListCharacterToMaskWith:t,type:l}):Cn({regex:g,wordListCharacterToMaskWith:t,type:l}):b?j?Nn({regex:g,type:l}):Sn({regex:g,type:l}):"default"===l?"if(request && request.ok){\n        return request.ok();\n      }":"return Promise.resolve(false)"}function Cn(e){var t=e.regex,a=e.wordListCharacterToMaskWith;return"default"===e.type?"if (request && request.ok) {\n      var badWords = new RegExp(".concat(t,', "g")\n      var bannedChannel = new RegExp(').concat(kn,', "g");\n      if (\n        request.message &&\n        request.message.text &&\n        badWords.test(request.message.text) &&\n        !bannedChannel.test(request.channels[0])\n      ) {\n        var newString = request.message.text;\n        newString = newString.replace(badWords, ($1) => \'').concat(a,'\'.repeat($1.length));\n        request.message.text = newString;\n        return request.ok();\n      }\n        request.message.type = "text"\n        return request.ok();\n     }'):"return new Promise((resolve, reject) => {\n    const badWords = new RegExp(".concat(t,', "g");\n    if (\n      message &&\n      message.text &&\n      badWords.test(message.text)\n    ) {\n      let newString = message.text;\n      newString = newString.replace(badWords, ($1) => \'').concat(a,'\'.repeat($1.length));\n      message.text = newString;\n      return resolve(true)\n    }\n    message.type = "text"\n      return resolve(true)\n   })')}function Fn(e){var t=e.regex,a=e.wordListCharacterToMaskWith;return"default"===e.type?"\n  if (request && request.ok) {\n    const pubnub = require('pubnub');\n    let badWords = new RegExp(".concat(t,', "g")\n    let bannedChannel = new RegExp(').concat(kn,', "g");\n    if (\n      request.message &&\n      request.message.text &&\n      badWords.test(request.message.text) &&\n      !bannedChannel.test(request.channels[0])\n    ) {\n      const originalMessage = request.message.text;\n      const senderUuid = request.params.uuid;\n      const moderatedMessage = originalMessage.replace(badWords, ($1) => \'').concat(a,'\'.repeat($1.length));\n      request.message.text = moderatedMessage;\n      pubnub.publish({\n      "channel": \'banned.\'+request.channels[0],\n      "message":{ "type":"text", originalMessage, moderatedMessage, senderUuid }\n      }).then((publishResponse) => {\n        console.log(publishResponse)\n      }).catch((err) => {\n          console.error(err);\n      });\n    }\n      request.message.type = "text"\n      return request.ok();\n   }'):"return new Promise((resolve, reject) => {\n    const badWords = new RegExp(".concat(t,', "g");\n    if (\n      message &&\n      message.text &&\n      badWords.test(message.text)\n    ) {\n      originalMessage = message.text\n      moderatedMessage = originalMessage.replace(badWords, ($1) => \'').concat(a,'\'.repeat($1.length));\n      message.text = moderatedMessage;\n      textReouteFlag = true;\n      return resolve(true)\n    }\n    message.type = "text"\n      return resolve(true)\n   })')}function Sn(e){var t=e.regex;return"default"===e.type?"if (request && request.ok) {\n    let badWords = new RegExp(".concat(t,', "g");\n    let bannedChannel = new RegExp(').concat(kn,', "g");\n    if(badWords.test(request["message"]["text"]) && !bannedChannel.test(request.channels[0])) {\n      console.log("Blocked message with word(s) from restricted word list");\n       return request.abort("wordlist moderation blocked message");\n   }\n      return request.ok();\n  }'):"return new Promise((resolve, reject) => {\n    const badWords = new RegExp(".concat(t,', "g");\n    if (\n      message &&\n      message.text &&\n      badWords.test(message.text)\n    ) {\n      textBlockedFlag = true;\n      return resolve(true)\n    }\n    message.type = "text"\n      return resolve(true)\n   })')}function Nn(e){var t=e.regex;return"default"===e.type?"if (request && request.ok) {\n    const pubnub = require('pubnub');\n    let badWords = new RegExp(".concat(t,', "g")\n    let bannedChannel = new RegExp(').concat(kn,', "g");\n    let message = request.message;\n    console.log("received wordlist based text moderation request: ", message);\n\n    if(badWords.test(message["text"]) && !bannedChannel.test(request.channels[0])) {\n      console.log("Found word(s) from moderation list. Publishing to banned channel");\n      pubnub.publish({\n      "channel": \'banned.\'+request.channels[0],\n      "message": {\n        type: "text",\n        originalMessage: message.text,\n        senderUuid: request.params.uuid\n      }\n      }).then((publishResponse) => {\n        console.log(publishResponse)\n      }).catch((err) => {\n          console.error(err);\n      });\n       return request.abort("wordlist moderation blocked message");\n   }\n      request.message.type = "text"\n      return request.ok();\n  }'):"return new Promise((resolve, reject) => {\n    const badWords = new RegExp(".concat(t,', "g");\n    if (\n      message &&\n      message.text &&\n      badWords.test(message.text)\n    ) {\n      originalMessage = message.text;\n      textBlockedFlag = true;\n      textReouteFlag = true;\n      return resolve(true);\n    }\n    message.type = "text"\n      return resolve(true);\n   })')}var Tn=function(e){if("tisane"===e.toolForAutomaticDetection){var t=Mn(e.tisaneLanguage);return"const apiKey = '".concat(e.tisaneApiKey,"';\n      const abuseTypes = ['bigotry', 'personal_attack', 'criminal_activity', 'sexual_advances', 'profanity'];\n      const serverityTypeObject = {\n        extreme:0.25,\n        high:0.50,\n        medium:0.75,\n        low:1,\n        none:0\n      };\n      const abuseTypeObject = {\n        bigotry:").concat(e.tisaneRiskFactorThresholdBigotry,",\n        criminal_activity:").concat(e.tisaneRiskFactorThresholdCriminalActivity,",\n        sexual_advances:").concat(e.tisaneRiskFactorThresholdSexualAdvances,",\n        personal_attack:").concat(e.tisaneRiskFactorThresholdCyberBullying,",\n        profanity:").concat(e.tisaneRiskFactorThresholdProfanity,'\n      };\n      const url = "https://api.tisane.ai/parse";\n      const http_options = {\n        "method": "POST",\n        "headers": {\n          "Ocp-Apim-Subscription-Key": apiKey\n        },\n        "body": JSON.stringify({\n          "language": "').concat(t,'", // or whatever language you use\n          "content": message.text,\n          "settings": {"snippets": true, "format":"dialogue"}\n        }),\n        "timeout" : 5000\n    };\n\n    return xhr.fetch(url, http_options).then(response => {\n\n      const body = JSON.parse(response.body);\n      const thirdPartyResponse = (response.status === 200 ? body : { error: body });\n      let checkThresholdForThirdParty = false;\n      const reasons = [];\n      const serverityTypes = [];\n\n      // Check each abuse type returned against the threshold\n      if (thirdPartyResponse.abuse && Array.isArray(thirdPartyResponse.abuse) && thirdPartyResponse.abuse.length) {\n        console.log(\'text moderation abuse analysis: \', thirdPartyResponse.abuse);\n        thirdPartyResponse.abuse.forEach((element)=>{\n          serverityTypes.push(element.severity);\n          if (abuseTypeObject[element.type] !== 0) {\n            if (abuseTypes.includes(element.type) && abuseTypeObject[element.type] >= serverityTypeObject[element.severity]) {\n              const abuse = element.type.replace(/_/g, \' \');\n              reasons.push(abuse+\'; \'+ element.severity);\n              if (!checkThresholdForThirdParty) {\n                console.log("Message was flagged by automatic text moderation.");\n                checkThresholdForThirdParty = true;\n              }\n            }\n          }\n        });\n      }')}return"const accountName = '".concat(e.siftNinjaAccountName,"';\n  const channelName = '").concat(e.siftNinjaChannelName,"';\n  const apiKey = '").concat(e.siftNinjaApiKey,'\'\n  const basicAuth = require(\'codec/auth\');\n  const authorization = basicAuth.basic(accountName + \'/\' + channelName,apiKey);\n  const http_options = {\n    "method": "POST",\n    "headers": {\n        "Content-Type": "application/json",\n        "Authorization": authorization\n    },\n    "body": JSON.stringify({\n        "text": message.text,\n        "user_id": message.user_id,\n        "user_display_name": message.user_display_name\n    })\n  };\n  const reasons = [];\n  const url = "https://" + accountName + ".siftninja.com/api/v1/channel/" + channelName + "/sifted_data";\n  return xhr.fetch(url, http_options).then(response => {\n\n  var body = JSON.parse(response.body);\n  var thirdPartyResponse = (response.status === 200 ? body : { error: body });\n\n  const vulgarity = thirdPartyResponse.tags.vulgar === null?0:thirdPartyResponse.tags.vulgar;\n  const racist = thirdPartyResponse.tags.racist === null?0:thirdPartyResponse.tags.racist;\n  const sexting = thirdPartyResponse.tags.sexting === null?0:thirdPartyResponse.tags.sexting;\n\n  console.log(\'Vulgarity score :\', vulgarity, \'Racism score :\', racist, \'Sexting score :\', sexting);\n\n  const checkThresholdForThirdParty = vulgarity>\'').concat(e.siftNinjaRiskFactorThresholdVulgar,"'\n  || racist>'").concat(e.siftNinjaRiskFactorThresholdRacism,"'\n  || sexting>'").concat(e.siftNinjaRiskFactorThresholdSexting,"';")},Mn=function(e){return{Autodetect:"*",English:"en",Spanish:"es",Portugese:"pt",French:"fr"}[e]},Rn='"\\b(banned)\\b"'.replace(/\\/g,"\\\\");function In(e){var t,a,n,r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";if("default"===s)t=e.automaticDetectionModType,a=e.automaticDetectionReRouteMessages,n=e.automaticDetectionCharacterToMaskWith,r=Tn(e);else{var c=e.automaticDetection;t=c.automaticDetectionModType,a=c.automaticDetectionReRouteMessages,n=c.automaticDetectionCharacterToMaskWith,r=Tn(e.automaticDetection)}var i="mask-message"===t,o="block-message"===t,l=$t(a);return i?l?Dn({selectedDetectionTool:r,automaticDetectionCharacterToMaskWith:n,type:s}):An({selectedDetectionTool:r,automaticDetectionCharacterToMaskWith:n,type:s}):o?l?Ln({selectedDetectionTool:r,type:s}):Pn({selectedDetectionTool:r,type:s}):"default"===s?"if(request && request.ok){\n      return request.ok()\n    }":"return Promise.resolve(false)"}function An(e){var t=e.selectedDetectionTool,a=e.automaticDetectionCharacterToMaskWith;return"default"===e.type?"if(request && request.ok){\n      const bannedChannel = new RegExp(".concat(Rn,", \"g\");\n      const console = require('console');\n      const xhr = require(\"xhr\");\n      const pubnub = require('pubnub');\n      let message = request.message;\n\n      if (!message.text) {\n        return request.ok();\n      }\n\n      if(bannedChannel.test(request.channels[0])){\n        console.log('Skipping moderation on message sent to banned channel: '  + request.channels[0]);\n        return request.ok();\n      }\n\n      console.log(\"received text moderation request: \", message);\n\n      ").concat(t,"\n    if(checkThresholdForThirdParty){\n               message.text = message.text.replace(/[a-z-A-Z-!]/g, '").concat(a,'\');\n               console.log("Replacing original text with a masked version of the message.");\n              return request.ok(message);\n          }\n         request.message.type = "text";\n         return request.ok(message);\n\n     }).catch(err => {\n         var thirdPartyResponse = { error: err };\n         Object.assign(message, { thirdPartyResponse });\n\n         return request.ok(message);\n     });\n      }'):"return new Promise((resolve, reject) => {\n    ".concat(t,"\n    if(checkThresholdForThirdParty){\n        message.text = message.text.replace(/[a-z-A-Z-!]/g, '").concat(a,'\');\n        return resolve(true);\n    }\n    message.type = "text"\n    return resolve(true);\n    }).catch(err => {\n      var thirdPartyResponse = { error: err };\n      Object.assign(message, { thirdPartyResponse });\n      return reject(message);\n  })\n   })')}function Dn(e){var t=e.selectedDetectionTool,a=e.automaticDetectionCharacterToMaskWith;return"default"===e.type?"if(request && request.ok) {\n      const bannedChannel = new RegExp(".concat(Rn,", \"g\");\n      const console = require('console');\n      const xhr = require(\"xhr\");\n      const pubnub = require('pubnub');\n      let message = request.message;\n\n      if (!message.text) {\n        return request.ok();\n      }\n\n      if(bannedChannel.test(request.channels[0])){\n        console.log('Skipping moderation on message sent to banned channel: '  + request.channels[0]);\n        return request.ok();\n      }\n\n      console.log(\"received text moderation request: \", message);\n      const originalMessage = message.text;\n      const senderUuid = request.params.uuid;\n\n      ").concat(t,"\n      if(checkThresholdForThirdParty){\n             const moderatedMessage = originalMessage.replace(/[a-z-A-Z-!]/g, '").concat(a,'\');\n             let payload = {"type":"text", originalMessage, moderatedMessage, senderUuid};\n             if (reasons && reasons.length) {\n               payload.reason = reasons.join(", ");\n             }\n              pubnub.publish({\n              "channel": \'banned.\'+request.channels[0],\n              "message": payload\n              }).then((publishResponse) => {\n                console.log(\'Sending original message to banned.\' + request.channels[0]);\n                console.log(publishResponse);\n              }).catch((err) => {\n                  console.error(err);\n              });\n             message.type = \'text\';\n             message.text = moderatedMessage;\n             console.log(\'Sending moderated message to channel: \' + request.channels[0]);\n             return request.ok(message);\n         }\n        return request.ok(message);\n\n    }).catch(err => {\n        var thirdPartyResponse = { error: err };\n        Object.assign(message, { thirdPartyResponse });\n\n        return request.ok(message);\n    });\n\n     }'):"return new Promise((resolve, reject) => {\n    ".concat(t,"\n    if(checkThresholdForThirdParty){\n      originalMessage = message.text;\n      moderatedMessage = message.text.replace(/[a-z-A-Z-!]/g, '").concat(a,'\');\n      message.text = moderatedMessage;\n      textReouteFlag = true;\n      if (reasons && reasons.length) {\n        reasonForModeration = reasons.join(", ");\n      }\n      return resolve(true);\n    }\n    message.type = "text";\n    return resolve(true);\n    }).catch(err => {\n      var thirdPartyResponse = { error: err };\n      Object.assign(message, { thirdPartyResponse });\n      return reject(message);\n  });\n   })')}function Pn(e){var t=e.selectedDetectionTool;return"default"===e.type?"if(request && request.ok){\n    const bannedChannel = new RegExp(".concat(Rn,", \"g\");\n    const console = require('console');\n    const xhr = require(\"xhr\");\n    const pubnub = require('pubnub');\n    let message = request.message;\n\n    if (!message.text) {\n      return request.ok()\n    }\n\n    if(bannedChannel.test(request.channels[0])){\n      console.log('Skipping moderation on message sent to banned channel: '  + request.channels[0]);\n      return request.ok();\n    }\n\n    const originalMessage = message.text;\n    console.log(\"received text moderation request: \", message);\n\n    ").concat(t,'\n    if(checkThresholdForThirdParty){\n      console.log("automatic text moderation blocked message");  \n      return request.abort();  \n    }\n  return request.ok(message);\n\n  }).catch(err => {\n      var thirdPartyResponse = { error: err };\n      Object.assign(message, { thirdPartyResponse });\n\n      return request.ok(message);\n  });\n\n   }'):"return new Promise((resolve, reject) => {\n    ".concat(t,'\n    if(checkThresholdForThirdParty){\n       textBlockedFlag = true;\n       return resolve(true);\n    }\n    message.type = "text"\n    return resolve(true);\n  }).catch(err => {\n    var thirdPartyResponse = { error: err };\n    Object.assign(message, { thirdPartyResponse });\n    return reject(message);\n});\n   })')}function Ln(e){var t=e.selectedDetectionTool;return"default"===e.type?"if(request && request.ok){\n    const xhr = require(\"xhr\");\n    const console = require('console');\n    const pubnub = require('pubnub');\n    const bannedChannel = new RegExp(".concat(Rn,', "g");\n\n    let message = request.message;\n\n    if (!message.text) {\n      return request.ok()\n    }\n\n    if(bannedChannel.test(request.channels[0])){\n      console.log(\'Skipping moderation on message sent to banned channel: \'  + request.channels[0]);\n      return request.ok();\n    }\n\n    const originalMessage = message.text;\n    const senderUuid = request.params.uuid;\n    console.log("received text moderation request: ", message);\n\n    ').concat(t,'\n\n         if(checkThresholdForThirdParty){\n              let payload = {"type":"text", originalMessage, senderUuid};\n              if (reasons && reasons.length) {\n                payload.reason = reasons.join(", ");\n              }\n              console.log(\'Sending original message to banned.\' + request.channels[0]);\n              pubnub.publish({\n               "channel": \'banned.\'+request.channels[0],\n               "message": payload\n               }).then((publishResponse) => {\n                 console.log(publishResponse);\n               }).catch((err) => {\n                   console.error(err);\n               });\n               console.log("automatic text moderation blocked message");  \n               return request.abort();  \n         }\n\n        console.log(\'Sending moderated message to channel: \' + request.channels[0]);\n        return request.ok(message);\n\n    }).catch(err => {\n        var thirdPartyResponse = { error: err };\n        Object.assign(message, { thirdPartyResponse });\n\n        return request.ok(message);\n    });\n\n     }'):"return new Promise((resolve, reject) => {\n    ".concat(t,'\n    if(checkThresholdForThirdParty){\n        originalMessage = message.text;\n        textBlockedFlag = true;\n        textReouteFlag = true;\n        if (reasons && reasons.length) {\n          reasonForModeration = reasons.join(", ");\n        }\n        return resolve(true);\n    }\n    message.type = "text"\n    return resolve(true);\n  }).catch(err => {\n    var thirdPartyResponse = { error: err };\n    Object.assign(message, { thirdPartyResponse });\n    return reject(message);\n});\n   })')}function En(e){var t=e.wordListModType,a=e.wordListReRouteMessages,n=e.applyToAllChannelIdsWordlist,r=e.applyToAllChannelIdsAutomatic,s=e.wordListCharacterToMaskWith,c=e.automaticDetectionModType,i=e.automaticDetectionReRouteMessages,o=e.automaticDetectionCharacterToMaskWith,l=e.toolForAutomaticDetection,u=e.siftNinjaRiskFactorThresholdVulgar,d=e.siftNinjaRiskFactorThresholdSexting,b=e.siftNinjaRiskFactorThresholdRacism,j=e.siftNinjaAccountName,h=e.siftNinjaChannelName,m=e.siftNinjaApiKey,g=e.wordListProfanity,p=e.automaticProfanity,x=e.textModerationToggle,f=e.tisaneRiskFactorThresholdBigotry,O=e.tisaneRiskFactorThresholdCyberBullying,v=e.tisaneRiskFactorThresholdCriminalActivity,y=e.tisaneRiskFactorThresholdSexualAdvances,k=e.tisaneRiskFactorThresholdProfanity,w=e.tisaneApiKey,C=e.tisaneLanguage,F=e.profanityList.English,S=e.profanityList.Hindi,N=e.profanityList.Spanish,T=e.profanityList.French,M=e.profanityList.Portugese;var R=$t(g)&&$t(x),I=$t(p)&&$t(x);return"function runProfanity(request){\n     ".concat(R?wn(e):I?In(e):"if(request && request.ok){\n        return request.ok();\n    }","\n     return {\n       wordListProfanity: '").concat(g,"',\n       automaticProfanity: '").concat(p,"',\n       textModerationToggle: '").concat(x,"',\n       wordList:{\n         applyToAllChannelIdsWordlist:'").concat(n,"',\n         wordListReRouteMessages: '").concat(a,"',\n         wordListModType: '").concat(t,"',\n         wordListCharacterToMaskWith:'").concat(s,"',\n         englishProfanity:'").concat(Jt(F),"',\n         hindiProfanity: '").concat(Jt(S),"',\n         frenchProfanity: '").concat(Jt(T),"',\n         spanishProfanity: '").concat(Jt(N),"',\n         portugeseProfanity: '").concat(Jt(M),"'\n       },\n       automaticDetection:{\n         applyToAllChannelIdsAutomatic: '").concat(r,"',\n         automaticDetectionReRouteMessages: '").concat(i,"',\n         automaticDetectionModType: '").concat(c,"',\n         automaticDetectionCharacterToMaskWith:'").concat(o,"',\n         toolForAutomaticDetection:'").concat(l,"',\n         siftNinjaRiskFactorThresholdVulgar:'").concat(u,"',\n         siftNinjaRiskFactorThresholdSexting:'").concat(d,"',\n         siftNinjaRiskFactorThresholdRacism:'").concat(b,"',\n         siftNinjaAccountName:'").concat(j,"',\n         siftNinjaChannelName:'").concat(h,"',\n         siftNinjaApiKey:'").concat(m,"',\n         tisaneRiskFactorThresholdBigotry:'").concat(f,"',\n         tisaneRiskFactorThresholdCyberBullying:'").concat(O,"',\n         tisaneRiskFactorThresholdCriminalActivity:'").concat(v,"',\n         tisaneRiskFactorThresholdSexualAdvances:'").concat(y,"',\n         tisaneRiskFactorThresholdProfanity:'").concat(k,"',\n         tisaneApiKey:'").concat(w,"',\n         tisaneLanguage:'").concat(C,"'\n       },\n     };\n  }")}function Bn(e){var t=e.imageModerationToggle,a=e.toolForImageModeration,n=e.sightengineAPIUser,r=e.sightengineAPIKey,s=e.sightengineWorkflowId,c=e.sightengineRiskFactorThreshold,i=e.reRouteMessages,o=e.applyToAllChannelIds,l=e.textPnFnStatusdata,u='"\\b(banned)\\b"'.replace(/\\/g,"\\\\"),d=function(){return $t(l.textModerationToggle)?$t(l.wordListProfanity)?wn(l,"image"):$t(l.automaticProfanity)?In(l,"image"):'console.log("skipping text moderation it has never been enabled");\n    return true;':'console.log("skipping text moderation it is toggled off");\n      return true;'};return"function runProfanity(request){\n            ".concat(function(){var e="block";return $t(i)&&(e="reroute"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"block",t=" imageBannedFlag = true; ",a=d();return"reroute"===e&&(t=" imageBannedReouteFlag = true;"),"if (request && request.ok) {\n      const bannedChannel = new RegExp(".concat(u,', "g");\n      const console = require("console");\n      const query = require("codec/query_string");\n      const xhr = require("xhr");\n      const pubnub = require("pubnub");\n\n      if (bannedChannel.test(request.channels[0])) {\n        console.log(\'Skipping moderation on file sent to banned channel: \' + request.channels[0]);\n        return request.ok();\n      }\n\n      let envelope = request.message;\n      let message = envelope.message;\n      let file = envelope.file;\n\n      let originalMessage;\n      let moderatedMessage;\n      let fileUrl;\n      let imageBannedFlag = false;\n      let imageBannedReouteFlag = false;\n      let textBlockedFlag = false;\n      let textReouteFlag = false;\n      let reasonForModeration;\n\n      console.log("received image moderation request: ", envelope);\n\n      // A message that contains both text and a file generates a Before Publish File event.\n      // Perform text moderation if configured and the message contains text\n      const textmoderation = () => {\n        if (message && message.text) {\n          ').concat(a,'\n        } else {\n          console.log("skipping text moderation, either the message or the text field is missing");\n          return true;\n        }\n      };\n\n      // Perform image moderation\n      const imageModerationFunction = () => {\n          if (file) {\n            const apiUrl = "https://api.sightengine.com/1.0/check-workflow.json";\n            const channel = request.channels[0];\n            fileUrl = pubnub.getFileUrl({\n              channel: channel,\n              id: file.id,\n              name: file.name,\n            });\n            const queryParams = {\n              \'api_secret\': \'').concat(r,"',\n              'workflow': '").concat(s,"',\n              'api_user': '").concat(n,'\',\n              url: fileUrl\n            };\n\n            return new Promise((resolve, reject) => {\n              xhr\n                .fetch(apiUrl + "?" + query.stringify(queryParams))\n                .then(function (r) {\n                  const body = JSON.parse(r.body || r);\n                  return resolve(body);\n                })\n                .catch(function (e) {\n                  console.error(e);\n                  return reject(e);\n                });\n            });\n        } else {\n            console.log("image moderation skipping API call because there is no file in the message!");\n            return true;\n        }\n      };\n\n      // Process the responses from both the text and image moderation\n      return Promise.all([imageModerationFunction(), textmoderation()])\n        .then((values) => {\n          console.log("image moderation result: ", values[0].summary);\n          let payload = {};\n\n          if (\n            values[0] &&\n            values[0].summary &&\n            values[0].summary.reject_prob &&\n            \'').concat(c,"' < values[0].summary.reject_prob\n          ) {\n              ").concat(t,'\n            }\n\n          if (imageBannedReouteFlag) {\n            payload["file"] = {\n              url: fileUrl,\n              id: file.id,\n              name: file.name,\n              reason: values[0].summary.reject_reason,\n            };\n          }\n\n          if (textReouteFlag) {\n            payload["message"] = { type: "text" };\n            payload.message.originalMessage = originalMessage || message.text;\n\n            if (moderatedMessage) {\n                payload.message.moderatedMessage = moderatedMessage;\n            }\n            if (reasonForModeration) {\n                payload.message.reason = reasonForModeration;\n            }\n          }\n\n          // this block handles re-routing\n          if (payload.file || payload.message) {\n            payload.senderUuid = request.params.uuid;\n            return pubnub.publish({\n              channel: "banned." + request.channels[0],\n              message: payload,\n            })\n            .then((publishResponse) => {\n              if (textBlockedFlag && (imageBannedFlag || imageBannedReouteFlag)) {\n                console.log("aborting reason 1 (both text and image were re-routed)");\n                return request.abort("moderated message");\n              }\n\n              if (textBlockedFlag) {\n                console.log("text sent with image will be blocked");\n                delete envelope.message;\n              }\n\n              if (imageBannedFlag || imageBannedReouteFlag) {\n                console.log("image will be blocked");\n                // If text passed but image didn\'t, repackage as a plain text message\n                if (envelope.message && envelope.message.text) {\n                    const text = envelope.message.text += "\\n - Image blocked by moderation -";\n                    request.message = {\n                        type: "text",\n                        text\n                    };\n                } else {\n                  delete envelope.file;\n                }\n            }\n\n            if (!envelope.text && !envelope.message && !envelope.file) {\n                console.log("aborting reason 2 (message was empty or blocked, image was re-routed)");\n                return request.abort("moderated message");\n            }\n\n              console.log(\n                "passing reason 1 (only one of message or file was re-routed)",\n                request.message\n              );\n              return request.ok();\n            })\n            .catch((err) => {\n              console.error(err);\n            });\n          }\n\n          // this block handles blocking (no re-routing enabled)\n          if (values[0] || values[1]) {\n            if (textBlockedFlag && imageBannedFlag) {\n              console.log("aborting reason 3 (both text and image were blocked)");\n              return request.abort("moderated message");\n            }\n\n            if (textBlockedFlag) {\n              delete envelope.message;\n            }\n\n            if (imageBannedFlag || imageBannedReouteFlag) {\n              delete envelope.file;\n            }\n\n            if (!envelope.message && !envelope.file) {\n              console.log("aborting function (message was empty or blocked, image was blocked)");\n              return request.abort("moderated message");\n            }\n\n            console.log("passing function (file not blocked and message is ok or masked)", request.message);\n            return request.ok();\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          return request.abort(err);\n        });\n    }\n    ')}(e)}(),"\n        return {\n          imageModerationToggle: '").concat(t,"',\n          toolForImageModeration: '").concat(a,"',\n          sightengineAPIUser: '").concat(n,"',\n          sightengineAPIKey: '").concat(r,"',\n          sightengineWorkflowId: '").concat(s,"',\n          sightengineRiskFactorThreshold: '").concat(c,"',\n          reRouteMessages: '").concat(i,"',\n          applyToAllChannelIds: '").concat(o,"'\n        };\n    }")}function Un(){return(Un=Object(x.a)(p.a.mark((function e(t){var a,n,r,s,c,o,l,u,d,b,j,h,m,g,x,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.blockId,n=t.keyId,r=t.token,s=t.state,c=t.setState,o=t.textPnFnStatusdata,l=s.imageModerationToggle,u=s.channelId,d=s.applyToAllChannelIds,b=s.toolForImageModeration,j=s.sightengineAPIUser,h=s.sightengineAPIKey,m=s.sightengineWorkflowId,g=s.sightengineRiskFactorThreshold,x=s.reRouteMessages,f={type:"js",key_id:n,block_id:a,channels:u,code:"".concat(Bn({imageModerationToggle:l,channelId:u,applyToAllChannelIds:d,toolForImageModeration:b,sightengineAPIUser:j,sightengineAPIKey:h,sightengineWorkflowId:m,sightengineRiskFactorThreshold:g,reRouteMessages:x,textPnFnStatusdata:o})),event:"js-before-publish-file",log_level:"debug",name:"BLOCK-".concat(a,"-IMAGE-MODERATION"),output:"output-0.5823105682419438"},e.prev=3,e.next=6,ve(f,r);case 6:if(!l){e.next=9;break}return e.next=9,pe({key_id:n,block_id:a},r);case 9:c((function(e){return Object(i.a)(Object(i.a)({},e),{},{saveLoading:!1})})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),c((function(t){return Object(i.a)(Object(i.a)({},t),{},{errorStatus:!0,saveLoading:!1,errorMsg:e.t0.message,successMsg:"",successStatus:!1})}));case 15:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}var qn=function(e){return Un.apply(this,arguments)};function Wn(){return(Wn=Object(x.a)(p.a.mark((function e(t){var a,n,r,s,c,o,l,u,d,b,j,h,m,g,x,f,O,v;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.eventHandler,n=t.blockId,r=t.keyId,s=t.token,c=t.setState,o=t.state,l=t.textPnFnStatusdata,u=t.uiPagecall,d=o.imageModerationToggle,b=o.channelId,j=o.applyToAllChannelIds,h=o.toolForImageModeration,m=o.sightengineAPIUser,g=o.sightengineAPIKey,x=o.sightengineWorkflowId,f=o.sightengineRiskFactorThreshold,O=o.reRouteMessages,v={type:"js",key_id:r,block_id:n,id:a[0].id,channels:b,code:"".concat(Bn({imageModerationToggle:d,channelId:b,applyToAllChannelIds:j,toolForImageModeration:h,sightengineAPIUser:m,sightengineAPIKey:g,sightengineWorkflowId:x,sightengineRiskFactorThreshold:f,reRouteMessages:O,textPnFnStatusdata:l})),event:"js-before-publish-file",log_level:"debug",name:"BLOCK-".concat(n,"-IMAGE-MODERATION"),output:"output-0.5823105682419438"},e.prev=3,e.next=6,ke(v,s);case 6:if(d){e.next=12;break}return e.next=9,fe({key_id:r,block_id:n},s);case 9:if("textModeration"!==u){e.next=11;break}return e.abrupt("return",!0);case 11:return e.abrupt("return",c((function(e){return Object(i.a)(Object(i.a)({},e),{},{saveLoading:!1,successStatus:!0,errorStatus:!1,errorMsg:"",successMsg:"Successfully Updated."})})));case 12:return e.next=14,pe({key_id:r,block_id:n},s);case 14:if("textModeration"!==u){e.next=16;break}return e.abrupt("return",!0);case 16:c((function(e){return Object(i.a)(Object(i.a)({},e),{},{saveLoading:!1,successStatus:!0,errorStatus:!1,errorMsg:"",successMsg:"Successfully Updated."})})),e.next=24;break;case 19:if(e.prev=19,e.t0=e.catch(3),"textModeration"!==u){e.next=23;break}return e.abrupt("return",!0);case 23:c((function(t){return Object(i.a)(Object(i.a)({},t),{},{errorStatus:!0,saveLoading:!1,errorMsg:e.t0.message,successMsg:"",successStatus:!1})}));case 24:case"end":return e.stop()}}),e,null,[[3,19]])})))).apply(this,arguments)}var _n=function(e){return Wn.apply(this,arguments)},zn=function(e,t){var a,n,r=Et(t,e),s=[];r.length&&(a=r[0].id,n=r[0].event_handlers,s=Bt(n,r));var c,i=[],o=!1,l=!1,u=!1;if(s.length){var d=i=qt(s[0].code);o=d.wordListProfanity,l=d.automaticProfanity,u=d.textModerationToggle,c=s[0].channels}return{findTextModerationFunction:r,blockId:a,eventHandlerList:n,eventHandler:s,wordListProfanity:o,automaticProfanity:l,textModerationToggle:$t(u),textPnFnStatusdata:i,textChannelId:c}},Kn=function(e){var t=e.eventHandler,a=e.blockId,n=e.token,r=e.state,s=e.setState,c=e.keyId,i=e.textPnFnStatusdata,o=e.uiPagecall;return 0===t.length?qn({blockId:a,token:n,state:r,setState:s,keyId:c,textPnFnStatusdata:i}):_n({eventHandler:t,blockId:a,state:r,setState:s,keyId:c,token:n,textPnFnStatusdata:i,uiPagecall:o})},Hn=function(){var e=Object(x.a)(p.a.mark((function e(t,a,n){var r,s,c,o,l,u,d,b,j,h,m,g,x,f,O,v,y,k;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state,s=n.setState,c=n.uiPagecall,o=void 0===c?"imageModeration":c,e.next=3,je(t.id,a,!0);case 3:if(l=e.sent,u=Vn(t,l),d=u.findImageFunction,b=u.eventHandler,j=u.blockId,h=zn(t,l),m=h.textPnFnStatusdata,g=h.textChannelId,x=h.textModerationToggle,"textModeration"!==o){e.next=17;break}if(!b.length){e.next=15;break}if((f=qt(b[0].code)).imageModerationToggle){e.next=11;break}return e.abrupt("return",!0);case 11:return f.channelId=g,f.isState=!1,e.next=15,_n({eventHandler:b,blockId:j,state:f,setState:s,keyId:t.id,token:a,textPnFnStatusdata:m,uiPagecall:o});case 15:e.next=34;break;case 17:if(!x||!g||g===r.channelId){e.next=19;break}return e.abrupt("return",s((function(e){return Object(i.a)(Object(i.a)({},e),{},{saveLoading:!1,successStatus:!1,errorStatus:!0,errorMsg:"Channel ID is not same as Text moderation",successMsg:""})})));case 19:if(O=t.id,!d.length){e.next=25;break}return e.next=23,Kn({eventHandler:b,blockId:j,state:r,setState:s,keyId:O,token:a,textPnFnStatusdata:m,uiPagecall:o});case 23:e.next=34;break;case 25:return v={key_id:t.id,name:"KEY-".concat(t.id,"-IMAGE-MODERATION"),description:"Image moderation function"},e.next=28,me(v,a);case 28:return e.next=30,je(t.id,a);case 30:return y=e.sent,k=Ut(y,t)[0].id,e.next=34,qn({blockId:k,token:a,state:r,setState:s,keyId:t.id,textPnFnStatusdata:m});case 34:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Vn=function(e,t){var a,n,r=Ut(t,e),s=[];return r.length&&(a=r[0].id,s=function(e,t){if(e)return e.filter((function(e){return e.name==="BLOCK-".concat(t[0].id,"-IMAGE-MODERATION")}))}(n=r[0].event_handlers,r)),{findImageFunction:r,blockId:a,eventHandlerList:n,eventHandler:s}},Yn=function(){var e=Ra(),t=Object(n.useState)({English:"",Hindi:"",French:"",Portugese:"",Spanish:""}),a=Object(f.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)({wordList:{wordListChannel:"*",applyToAllChannelIdsWordlist:!0,wordsListPatternError:!1,wordListLanguage:"English",wordListModType:"Mask-word",wordListReRouteMessages:!1,wordsListMaskCharError:!1,wordsListChannelError:!1,wordListCharacterToMaskWith:"*"},automaticDetection:{applyToAllChannelIdsAutomatic:!0,toolForAutomaticDetection:"tisane",siftNinjaRiskFactorThresholdVulgar:0,siftNinjaRiskFactorThresholdSexting:0,siftNinjaRiskFactorThresholdRacism:0,siftNinjaAccountName:"",siftNinjaChannelName:"",siftNinjaApiKey:"",tisaneRiskFactorThresholdBigotry:0,tisaneRiskFactorThresholdCyberBullying:0,tisaneRiskFactorThresholdCriminalActivity:0,tisaneRiskFactorThresholdSexualAdvances:0,tisaneRiskFactorThresholdProfanity:0,tisaneApiKey:"",tisaneLanguage:"Autodetect",automaticDetectionChannel:"*",automaticChannelError:!1,automaticMaskCharError:!1,automaticDetectionReRouteMessages:!1,automaticDetectionModType:"mask-message",automaticDetectionCharacterToMaskWith:"*"},textModerationToggle:!1,wordListProfanity:!1,automaticProfanity:!1,channelOnChange:!1,saveLoading:!1,initialLoading:!0,errorStatus:!1,successStatus:!1,errorMsg:"",successMsg:""}),o=Object(f.a)(c,2),l=o[0],u=o[1],d=$t(l.wordListProfanity),b=$t(l.textModerationToggle),j=Wt(r,l.wordList.wordListLanguage);function m(e,t,a,n){return g.apply(this,arguments)}function g(){return(g=Object(x.a)(p.a.mark((function e(t,a,n,s){var c,o,j,h,m,g,x,f,O,v,y,k,w,C,F,S,N,T,M,R,I,A,D,P,L,E,B,U,q,W;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=l.wordList,o=c.wordListChannel,j=c.applyToAllChannelIdsWordlist,h=c.wordListCharacterToMaskWith,m=c.wordListModType,g=c.wordListReRouteMessages,x=l.automaticDetection,f=x.automaticDetectionModType,O=x.automaticDetectionChannel,v=x.applyToAllChannelIdsAutomatic,y=x.automaticDetectionReRouteMessages,k=x.automaticDetectionCharacterToMaskWith,w=x.toolForAutomaticDetection,C=x.siftNinjaRiskFactorThresholdVulgar,F=x.siftNinjaRiskFactorThresholdSexting,S=x.siftNinjaRiskFactorThresholdRacism,N=x.siftNinjaAccountName,T=x.siftNinjaChannelName,M=x.siftNinjaApiKey,R=x.tisaneRiskFactorThresholdBigotry,I=x.tisaneRiskFactorThresholdCyberBullying,A=x.tisaneRiskFactorThresholdCriminalActivity,D=x.tisaneRiskFactorThresholdSexualAdvances,P=x.tisaneRiskFactorThresholdProfanity,L=x.tisaneApiKey,E=x.tisaneLanguage,B=l.wordListProfanity,U=l.automaticProfanity,q=l.textModerationToggle,W={type:"js",key_id:n,block_id:a,channels:d?o:O,code:"".concat(En({wordListProfanity:B,automaticProfanity:U,applyToAllChannelIdsAutomatic:v,applyToAllChannelIdsWordlist:j,textModerationToggle:q,profanityList:r,wordListModType:m,wordListReRouteMessages:g,wordListCharacterToMaskWith:h,automaticDetectionModType:f,automaticDetectionReRouteMessages:y,automaticDetectionCharacterToMaskWith:k,toolForAutomaticDetection:w,siftNinjaRiskFactorThresholdVulgar:C,siftNinjaRiskFactorThresholdSexting:F,siftNinjaRiskFactorThresholdRacism:S,siftNinjaAccountName:N,siftNinjaChannelName:T,siftNinjaApiKey:M,tisaneRiskFactorThresholdBigotry:R,tisaneRiskFactorThresholdCyberBullying:I,tisaneRiskFactorThresholdCriminalActivity:A,tisaneRiskFactorThresholdSexualAdvances:D,tisaneRiskFactorThresholdProfanity:P,tisaneApiKey:L,tisaneLanguage:E})),event:"js-before-publish",log_level:"debug",name:"BLOCK-".concat(a),output:"output-0.5823105682419438"},e.prev=4,e.next=7,ve(W,s);case 7:if(!b){e.next=10;break}return e.next=10,pe({key_id:n,block_id:a},s);case 10:return e.next=12,Hn(t,s,{state:l,setState:u,uiPagecall:"textModeration"});case 12:u(Object(i.a)(Object(i.a)({},l),{},{errorStatus:!1,saveLoading:!1,errorMsg:"",successMsg:"Successfully updated",successStatus:!0})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),u(Object(i.a)(Object(i.a)({},l),{},{errorStatus:!0,saveLoading:!1,errorMsg:e.t0.message,successMsg:"",successStatus:!1}));case 18:case"end":return e.stop()}}),e,null,[[4,15]])})))).apply(this,arguments)}function y(e,t,a,n,r){return k.apply(this,arguments)}function k(){return(k=Object(x.a)(p.a.mark((function e(t,a,n,s,c){var o,j,h,m,g,x,f,O,v,y,k,w,C,F,S,N,T,M,R,I,A,D,P,L,E,B,U,q,W,_;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=l.wordList,j=o.wordListChannel,h=o.applyToAllChannelIdsWordlist,m=o.wordListCharacterToMaskWith,g=o.wordListModType,x=o.wordListReRouteMessages,f=l.automaticDetection,O=f.automaticDetectionModType,v=f.automaticDetectionChannel,y=f.applyToAllChannelIdsAutomatic,k=f.automaticDetectionReRouteMessages,w=f.automaticDetectionCharacterToMaskWith,C=f.toolForAutomaticDetection,F=f.siftNinjaRiskFactorThresholdVulgar,S=f.siftNinjaRiskFactorThresholdSexting,N=f.siftNinjaRiskFactorThresholdRacism,T=f.siftNinjaAccountName,M=f.siftNinjaChannelName,R=f.siftNinjaApiKey,I=f.tisaneRiskFactorThresholdBigotry,A=f.tisaneRiskFactorThresholdCyberBullying,D=f.tisaneRiskFactorThresholdCriminalActivity,P=f.tisaneRiskFactorThresholdSexualAdvances,L=f.tisaneRiskFactorThresholdProfanity,E=f.tisaneApiKey,B=f.tisaneLanguage,U=l.wordListProfanity,q=l.automaticProfanity,W=l.textModerationToggle,_={type:"js",key_id:s,block_id:n,id:a[0].id,channels:d?j:v,code:"".concat(En({wordListProfanity:U,applyToAllChannelIdsAutomatic:y,applyToAllChannelIdsWordlist:h,automaticProfanity:q,textModerationToggle:W,wordListCharacterToMaskWith:m,profanityList:r,wordListModType:g,wordListReRouteMessages:x,automaticDetectionModType:O,automaticDetectionReRouteMessages:k,automaticDetectionCharacterToMaskWith:w,toolForAutomaticDetection:C,siftNinjaRiskFactorThresholdVulgar:F,siftNinjaRiskFactorThresholdSexting:S,siftNinjaRiskFactorThresholdRacism:N,siftNinjaAccountName:T,siftNinjaChannelName:M,siftNinjaApiKey:R,tisaneRiskFactorThresholdBigotry:I,tisaneRiskFactorThresholdCyberBullying:A,tisaneRiskFactorThresholdCriminalActivity:D,tisaneRiskFactorThresholdSexualAdvances:P,tisaneRiskFactorThresholdProfanity:L,tisaneApiKey:E,tisaneLanguage:B})),event:"js-before-publish",log_level:"debug",name:"BLOCK-".concat(n),output:"output-0.5823105682419438"},e.prev=4,e.next=7,ke(_,c);case 7:if(b){e.next=13;break}return e.next=10,fe({key_id:s,block_id:n},c);case 10:return e.next=12,Hn(t,c,{state:l,setState:u,uiPagecall:"textModeration"});case 12:return e.abrupt("return",u(Object(i.a)(Object(i.a)({},l),{},{errorStatus:!1,saveLoading:!1,errorMsg:"",successMsg:"Successfully updated",successStatus:!0})));case 13:return e.next=15,pe({key_id:s,block_id:n},c);case 15:return e.next=17,Hn(t,c,{state:l,setState:u,uiPagecall:"textModeration"});case 17:u(Object(i.a)(Object(i.a)({},l),{},{errorStatus:!1,saveLoading:!1,errorMsg:"",successMsg:"Successfully updated",successStatus:!0})),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),u(Object(i.a)(Object(i.a)({},l),{},{errorStatus:!0,saveLoading:!1,errorMsg:e.t0.message,successMsg:"",successStatus:!1}));case 23:case"end":return e.stop()}}),e,null,[[4,20]])})))).apply(this,arguments)}Object(n.useEffect)((function(){u((function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!1,errorMsg:"",successStatus:!1,successMsg:""})}))}),[l.wordListProfanity,l.automaticProfanity]),Object(n.useEffect)((function(){var e=/^.*?[,.]$/.test(j.trim());u(e?function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!0,errorMsg:"Invalid word list pattern, word list\n          should not end with period or delimiter",wordList:Object(i.a)(Object(i.a)({},e.wordList),{},{wordsListPatternError:!0})})}:function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!1,errorMsg:"",wordList:Object(i.a)(Object(i.a)({},e.wordList),{},{wordsListPatternError:!1})})})}),[j]),Object(n.useEffect)((function(){u((function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!1,errorMsg:"",wordList:Object(i.a)(Object(i.a)({},e.wordList),{},{wordsListMaskCharError:!1})})})),!l.wordList.wordListCharacterToMaskWith.trim()&&l.wordListProfanity&&"Mask-word"===l.wordList.wordListModType&&u((function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!0,errorMsg:"Please set a making character",wordList:Object(i.a)(Object(i.a)({},e.wordList),{},{wordsListMaskCharError:!0})})}))}),[l.wordList.wordListCharacterToMaskWith,l.wordListProfanity,l.wordList.wordListModType]),Object(n.useEffect)((function(){u((function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!1,errorMsg:"Please set a making character",automaticDetection:Object(i.a)(Object(i.a)({},e.automaticDetection),{},{automaticMaskCharError:!1})})})),!l.automaticDetection.automaticDetectionCharacterToMaskWith.trim()&&l.automaticProfanity&&"mask-message"===l.automaticDetection.automaticDetectionModType&&u((function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!0,errorMsg:"Please set a making character",automaticDetection:Object(i.a)(Object(i.a)({},e.automaticDetection),{},{automaticMaskCharError:!0})})}))}),[l.automaticDetection.automaticDetectionCharacterToMaskWith,l.automaticProfanity,l.automaticDetection.automaticDetectionModType]),Object(n.useEffect)((function(){l.channelOnChange&&((d?l.wordList.wordListChannel.length:l.automaticDetection.automaticDetectionChannel.length)?u((function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!1,saveLoading:!1,errorMsg:"",successMsg:"",wordList:Object(i.a)(Object(i.a)({},e.wordList),{},{wordsListChannelError:!1}),automaticDetection:Object(i.a)(Object(i.a)({},e.automaticDetection),{},{automaticChannelError:!1}),successStatus:!1})})):u((function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!0,saveLoading:!1,wordList:Object(i.a)(Object(i.a)({},e.wordList),{},{wordsListChannelError:!!d}),automaticDetection:Object(i.a)(Object(i.a)({},e.automaticDetection),{},{automaticChannelError:!d}),errorMsg:"Channel name is required",successMsg:"",successStatus:!1})})))}),[l.wordList.wordListChannel,d,l.channelOnChange,l.automaticDetection.automaticDetectionChannel]),Object(n.useEffect)((function(){var e=Rt(),t=B("token");Object(x.a)(p.a.mark((function a(){var n,r,c,o,d,b,j,h,m,g,x,f,O,v,y,k,w,C,F,S,N,T,M,R,I,A,D,P,L,E,B,U,q,W,_,z;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=11;break}return a.prev=1,a.next=4,je(e.id,t,!0);case 4:n=a.sent,Et(n,e).length?(r=Et(n,e)[0].event_handlers,(c=Bt(r,Et(n,e))).length>0?(o=qt(c[0].code),d=o.wordListProfanity,b=o.automaticProfanity,j=o.textModerationToggle,h=o.wordList,m=h.wordListReRouteMessages,g=h.wordListModType,x=h.applyToAllChannelIdsWordlist,f=h.wordListCharacterToMaskWith,O=h.englishProfanity,v=h.hindiProfanity,y=h.frenchProfanity,k=h.spanishProfanity,w=h.portugeseProfanity,C=o.automaticDetection,F=C.automaticDetectionReRouteMessages,S=C.automaticDetectionModType,N=C.applyToAllChannelIdsAutomatic,T=C.automaticDetectionCharacterToMaskWith,M=C.toolForAutomaticDetection,R=C.siftNinjaRiskFactorThresholdVulgar,I=C.siftNinjaRiskFactorThresholdSexting,A=C.siftNinjaRiskFactorThresholdRacism,D=C.siftNinjaAccountName,P=C.siftNinjaChannelName,L=C.siftNinjaApiKey,E=C.tisaneRiskFactorThresholdBigotry,B=C.tisaneRiskFactorThresholdCyberBullying,U=C.tisaneRiskFactorThresholdCriminalActivity,q=C.tisaneRiskFactorThresholdSexualAdvances,W=C.tisaneRiskFactorThresholdProfanity,_=C.tisaneApiKey,z=C.tisaneLanguage,u((function(e){return Object(i.a)(Object(i.a)({},e),{},{wordList:Object(i.a)(Object(i.a)({},e.wordList),{},{wordListChannel:c[0].channels,wordListModType:g,applyToAllChannelIdsWordlist:x,wordListCharacterToMaskWith:f,wordListReRouteMessages:m}),automaticDetection:{automaticDetectionChannel:c[0].channels,automaticDetectionReRouteMessages:F,automaticDetectionModType:S,applyToAllChannelIdsAutomatic:N,automaticDetectionCharacterToMaskWith:T,toolForAutomaticDetection:M,siftNinjaRiskFactorThresholdVulgar:R,siftNinjaRiskFactorThresholdSexting:I,siftNinjaRiskFactorThresholdRacism:A,siftNinjaAccountName:D,siftNinjaChannelName:P,siftNinjaApiKey:L,tisaneRiskFactorThresholdBigotry:E,tisaneRiskFactorThresholdCyberBullying:B,tisaneRiskFactorThresholdCriminalActivity:U,tisaneRiskFactorThresholdSexualAdvances:q,tisaneRiskFactorThresholdProfanity:W,tisaneApiKey:_,tisaneLanguage:z},initialLoading:!1,textModerationToggle:j,wordListProfanity:d,automaticProfanity:b})})),s((function(e){return Object(i.a)(Object(i.a)({},e),{},{English:O.split("|").join(","),Hindi:v.split("|").join(","),Portugese:w.split("|").join(","),French:y.split("|").join(","),Spanish:k.split("|").join(",")})}))):u((function(e){return Object(i.a)(Object(i.a)({},e),{},{wordList:Object(i.a)({},e.wordList),initialLoading:!1})}))):u((function(e){return Object(i.a)(Object(i.a)({},e),{},{wordList:Object(i.a)({},e.wordList),initialLoading:!1})})),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),u(Object(i.a)(Object(i.a)({},l),{},{errorStatus:!0,saveLoading:!1,errorMsg:a.t0.message,successMsg:"",successStatus:!1,initialLoading:!1}));case 11:case"end":return a.stop()}}),a,null,[[1,8]])})))()}),[]);var C=function(){var e=Object(x.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n="".concat("/moderation-dashboard","/words/").concat(t,".txt"),fetch(n).then((function(e){return e.text()})).then((function(e){return e}));case 2:a=e.sent,s(Object(i.a)(Object(i.a)({},r),{},Object(Ma.a)({},t,a)));case 4:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(x.a)(p.a.mark((function e(t){var a,n,r,s,c,o,d,b,j,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!l.errorStatus){e.next=3;break}return e.abrupt("return");case 3:if(u(Object(i.a)(Object(i.a)({},l),{},{saveLoading:!0})),a=B("token"),!(n=Rt())){e.next=40;break}return e.prev=7,e.next=10,je(n.id,a);case 10:if(r=e.sent,s=n.id,!Et(r,n).length){e.next=25;break}if(c=Et(r,n)[0].id,o=Et(r,n)[0].event_handlers,0!==(d=Bt(o,Et(r,n))).length){e.next=21;break}return e.next=19,m(n,c,s,a);case 19:e.next=23;break;case 21:return e.next=23,y(n,d,c,s,a);case 23:e.next=35;break;case 25:return b={key_id:n.id,name:"KEY-".concat(n.id),description:"This is a profanity function"},e.next=28,me(b,a);case 28:return e.next=30,je(n.id,a);case 30:return j=e.sent,h=Et(j,n)[0].id,e.next=34,m(n,h,s,a);case 34:u((function(e){return Object(i.a)(Object(i.a)({},e),{},{initialLoading:!1})}));case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(7),u(Object(i.a)(Object(i.a)({},l),{},{errorStatus:!0,saveLoading:!1,errorMsg:e.t0.message,successMsg:"",successStatus:!1}));case 40:case"end":return e.stop()}}),e,null,[[7,37]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[l.successStatus&&Object(h.jsx)(La,{status:"success",msg:l.successMsg}),l.errorStatus&&Object(h.jsx)(La,{status:"error",msg:l.errorMsg}),Object(h.jsxs)(v.a,{testid:"title",variant:"h6",className:e.title,children:["Text Moderation",Object(h.jsx)(vn,{checked:$t(l.textModerationToggle),onChange:function(e){u(Object(i.a)(Object(i.a)({},l),{},{textModerationToggle:e.target.checked}))}})]}),Object(h.jsx)("br",{}),Object(h.jsx)(v.a,{testid:"sub_title",className:e.subTitle,children:"Profanity detection method"}),Object(h.jsx)(yn,{state:l,handleClick:function(e){return function(t){t.preventDefault(),"wordListMethod"===e?u(Object(i.a)(Object(i.a)({},l),{},{wordListProfanity:"true",automaticProfanity:"false"})):"automaticMethod"===e&&u(Object(i.a)(Object(i.a)({},l),{},{wordListProfanity:"false",automaticProfanity:"true"}))}}}),Object(h.jsx)("br",{}),l.initialLoading&&Object(h.jsx)(O.a,{container:!0,justify:"center",children:Object(h.jsx)(w.a,{size:65,thickness:4,color:"primary",className:e.loader})}),Object(h.jsx)("br",{}),Object(h.jsx)(pn,{handleSave:F,state:l,profanityList:r,defaultWords:C,setState:u,setProfanityList:s})]})},Jn=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(en,{children:Object(h.jsx)(Yn,{})})})},$n=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(na,{})})},Gn=a(477),Xn=a(480),Zn=a(479),Qn=a(478),er=Object(M.a)({confirmButton:{background:"#F53C56 0% 0% no-repeat padding-box",borderRadius:"8px",opacity:1,font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-16)/var(--unnamed-line-spacing-19) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#FFFFFF","&:hover":{backgroundColor:"#F53C56"},width:"150px",height:"45px",textTransform:"none"},cancelButton:{background:" #FFFFFF 0% 0% no-repeat padding-box",border:"1px solid #172B4D",borderRadius:"8px",opacity:1,"&:hover":{backgroundColor:"#FFFFFF"},width:"100px",height:"45px"},confirmDialog:{boxShadow:"0px 3px 6px #2C28281C",borderRadius:"10px",opacity:1}}),tr=function(e){var t=e.title,a=e.children,n=e.open,r=e.setOpen,s=e.onConfirm,c=er();return Object(h.jsxs)(Gn.a,{id:"dialog",open:n,onClose:function(){return r(!1)},"aria-labelledby":"confirm-dialog",fullWidth:!0,maxWidth:"xs",className:c.confirmDialog,children:[Object(h.jsx)(Qn.a,{id:"confirm-dialog",children:t}),Object(h.jsx)(Zn.a,{id:"content",children:a}),Object(h.jsxs)(Xn.a,{children:[Object(h.jsx)(k.a,{id:"confirm",onClick:function(){r(!1),s()},className:c.confirmButton,children:Object(h.jsx)(v.a,{children:e.actionMessage})}),Object(h.jsx)(k.a,{id:"cancel",variant:"contained",onClick:function(){return r(!1)},className:c.cancelButton,children:"Cancel"})]})]})},ar=a(47),nr=a.n(ar),rr=Object(M.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},button:Object(Ma.a)({backgroundColor:"#7082e4",fontSize:"14px",padding:"5px 15px 5px 15px"},e.breakpoints.down("sm"),{fontSize:"10px"}),closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},joinChannelButton:{transition:e.transitions.create("width"),background:"#6387ED",borderRadius:"8px","&:hover":{backgroundColor:"#6387ED"},padding:"10px 25px 10px 25px",height:"49px"},buttonText:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) 13px/16px var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#FFFFFF",textTransform:"uppercase"},inputBox:{background:"#FFFFFF 0% 0% no-repeat padding-box",borderRadius:" 8px",opacity:1,width:"100%"},loader:{color:"white"},modalLayout:{border:"1px solid #F3F3F3",borderRadius:"10px",opacity:1},cancelButton:{border:"1px solid #707070",borderRadius:"8px",opacity:1,width:"140px",height:"45px"},avatar:{width:"70px",height:"70px"},uploadIcon:{bottom:"30px",right:"-30px"},subHeadingFont:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-14)/16px Graphik",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#606060",opacity:1,lineHeight:2.5,paddingLeft:"12px"},headingFont:{font:"normal normal medium 22px/27px Proxima Nova",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#414141",opacity:1},addButton:{transition:e.transitions.create("width"),background:"#6387ED",borderRadius:"8px","&:hover":{backgroundColor:"#6387ED"},width:"140px",height:"45px"},tooltip:{backgroundColor:e.palette.common.white,color:"rgba(0, 0, 0, 0.87)",boxShadow:e.shadows[1],fontSize:11},addChannelButton:{background:"#FFFFFF 0% 0% no-repeat padding-box",border:"1px solid #6387ED67",borderRadius:"5px",opacity:1,"&:hover":{backgroundColor:"#FFFFFF"},padding:"10px 25px 10px 25px",height:"49px"},addChannelButtonFont:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) 13px/16px var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#6387ED",textTransform:"uppercase",opacity:1}}})),sr=a(53);function cr(e){var t=rr();return Object(h.jsxs)("form",{onSubmit:e.formik.handleSubmit,children:[Object(h.jsxs)(Zn.a,{children:[Object(h.jsx)(v.a,{testid:"Channel_Id",className:t.subHeadingFont,children:"Channel ID"}),Object(h.jsx)(y.a,{name:"id",id:"id",disabled:e.disabled,placeholder:"Enter Channel ID",variant:"outlined",className:t.inputBox,autoComplete:"off",onChange:e.formik.handleChange,value:e.formik.values.id,error:e.formik.touched.id&&Boolean(e.formik.errors.id),helperText:e.formik.touched.id&&e.formik.errors.id}),Object(h.jsxs)(xt.a,{pt:1,children:[Object(h.jsx)(v.a,{testid:"Display_Name",className:t.subHeadingFont,children:"Display Name"}),Object(h.jsx)(y.a,{id:"name",name:"name",placeholder:"Enter Display Name",variant:"outlined",className:t.inputBox,autoComplete:"off",onChange:e.formik.handleChange,value:e.formik.values.name,error:e.formik.touched.name&&Boolean(e.formik.errors.name),helperText:e.formik.touched.name&&e.formik.errors.name})]}),Object(h.jsxs)(xt.a,{pt:1,children:[Object(h.jsx)(v.a,{testid:"Description",className:t.subHeadingFont,children:"Description"}),Object(h.jsx)(y.a,{id:"description",name:"description",placeholder:"Enter Channel Description",variant:"outlined",className:t.inputBox,multiline:!0,rows:3,autoComplete:"off",onChange:e.formik.handleChange,value:e.formik.values.description,error:e.formik.touched.description&&Boolean(e.formik.errors.description),helperText:e.formik.touched.description&&e.formik.errors.description})]})]}),Object(h.jsxs)(Xn.a,{children:[Object(h.jsx)(k.a,{autoFocus:!0,className:t.cancelButton,onClick:e.handleClose,children:"CANCEL"}),Object(h.jsx)(k.a,{autoFocus:!0,className:t.addButton,type:"submit",color:"primary",disabled:e.channelAlert.loading,startIcon:e.channelAlert.loading?Object(h.jsx)(w.a,{className:t.loader,size:30}):null,children:Object(h.jsx)(v.a,{className:t.buttonText,children:e.buttonTitle})})]})]})}var ir=a(37),or=ir.b({id:ir.c("Enter channel name").strict(!0).matches(/^\S*$/,"Channel ID must not contain spaces").test("Channel ID not valid","Channel ID not valid",(function(e){return!function(e){for(var t=[",",":","*","/","\\"],a=0;a<=t.length;a++)if(e&&e.includes(t[a]))return!0;return!1}(e)})).required("Channe ID is required"),name:ir.c("Enter display name").required("Display name is required")});function lr(e){var t=e.pubnubObject,a=e.isAdded,r=Object(n.useState)(!1),s=Object(f.a)(r,2),c=s[0],o=s[1],l=Object(n.useState)({success:{status:!1,msg:""},error:{status:!1,msg:""},loading:!1}),u=Object(f.a)(l,2),d=u[0],b=u[1],j=rr(),m=function(){o(!1),g.resetForm()},g=Object(sr.a)({initialValues:{description:"",name:"",id:""},validationSchema:or,onSubmit:function(e){O(e)}}),O=function(e){b(Object(i.a)(Object(i.a)({},d),{},{success:{status:!1,msg:""},error:{status:!1,msg:""},loading:!0})),Object(x.a)(p.a.mark((function n(){var r,s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ue(t,e.id);case 3:if(!(r=n.sent)||!r.length){n.next=8;break}b(Object(i.a)(Object(i.a)({},d),{},{success:{status:!1,msg:""},error:{status:!0,msg:"Channel already exists!"},loading:!1})),n.next=21;break;case 8:return n.prev=8,n.next=11,Q(t,e.name,e.description,e.id);case 11:s=n.sent,m(),b(Object(i.a)(Object(i.a)({},d),{},{success:{status:!0,msg:"Channel added successfully."},error:{status:!1,msg:""},loading:!1})),a(s),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(8),m(),b(Object(i.a)(Object(i.a)({},d),{},{success:{status:!1,msg:""},error:{status:!0,msg:Lt(n.t0.status.errorData)},loading:!1}));case 21:n.next=26;break;case 23:n.prev=23,n.t1=n.catch(0),b(Object(i.a)(Object(i.a)({},d),{},{success:{status:!1,msg:""},error:{status:!0,msg:n.t1.message},loading:!1}));case 26:case"end":return n.stop()}}),n,null,[[0,23],[8,17]])})))()};return Object(h.jsxs)("div",{children:[Object(h.jsx)(k.a,{id:"addChannel",startIcon:Object(h.jsx)("img",{src:"/moderation-dashboard/images/add-channel.svg",alt:"add"}),onClick:function(){o(!0)},className:j.addChannelButton,children:Object(h.jsx)(v.a,{className:j.addChannelButtonFont,children:"Add Channel"})}),Object(h.jsxs)(Gn.a,{id:"dialog",fullWidth:!0,onClose:m,"aria-labelledby":"customized-dialog-title",open:c,className:j.modalLayout,children:[Object(h.jsxs)(Qn.a,{id:"customized-dialog-title",onClose:m,disableTypography:!0,children:[Object(h.jsx)(v.a,{variant:"h6",className:j.headingFont,children:"Add Channel"}),c?Object(h.jsx)(dt.a,{id:"closeButton","aria-label":"close",onClick:m,className:j.closeButton,children:Object(h.jsx)(nr.a,{})}):null]}),Object(h.jsx)(cr,{id:"add",formik:g,channelAlert:d,handleClose:m,buttonTitle:"ADD",disabled:!1})]}),d.error.status&&Object(h.jsx)(La,{msg:d.error.msg,status:"info"}),d.success.status&&Object(h.jsx)(La,{msg:d.success.msg,status:"success"})]})}function ur(e){var t=e.pubnubObject,a=e.open,r=e.setOpen,s=e.data,c=e.channelUpdated,o=Object(n.useState)(""),l=Object(f.a)(o,2),u=l[0],d=l[1],b=Object(n.useState)(null),j=Object(f.a)(b,2),m=j[0],g=j[1],O=Object(n.useState)(""),y=Object(f.a)(O,2),k=y[0],w=y[1],C=Object(n.useState)({success:{status:!1,msg:""},error:{status:!1,msg:""},loading:!1}),F=Object(f.a)(C,2),S=F[0],N=F[1],T=rr();Object(n.useEffect)((function(){d(s.name),g(s.description),w(s.id)}),[s]);var M=function(){r(!1)},R=Object(sr.a)({initialValues:{description:m||"",name:u,id:k},enableReinitialize:!0,validationSchema:or,onSubmit:function(e){I(e)}}),I=function(e){N(Object(i.a)(Object(i.a)({},S),{},{success:{status:!1,msg:""},error:{status:!1,msg:""},loading:!0})),Object(x.a)(p.a.mark((function a(){var n;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,le(t,e.name,e.description,k);case 3:n=a.sent,M(),N(Object(i.a)(Object(i.a)({},S),{},{success:{status:!0,msg:"Channel updated successfully."},error:{status:!1,msg:""},loading:!1})),c(n),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),M(),N(Object(i.a)(Object(i.a)({},S),{},{success:{status:!1,msg:""},error:{status:!0,msg:Lt(a.t0.status.errorData)},loading:!1}));case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))()};return Object(h.jsxs)("div",{children:[Object(h.jsxs)(Gn.a,{fullWidth:!0,onClose:M,"aria-labelledby":"customized-dialog-title",open:a,className:T.modalLayout,children:[Object(h.jsxs)(Qn.a,{id:"customized-dialog-title",onClose:M,disableTypography:!0,children:[Object(h.jsx)(v.a,{testid:"UpdateChannel",variant:"h6",className:T.headingFont,children:"Update Channel Metadata"}),a?Object(h.jsx)(dt.a,{testId:"closeIcon","aria-label":"close",onClick:M,className:T.closeButton,children:Object(h.jsx)(nr.a,{})}):null]}),Object(h.jsx)(cr,{formik:R,channelAlert:S,handleClose:M,buttonTitle:"UPDATE",disabled:!0})]}),S.error.status&&Object(h.jsx)(La,{msg:S.error.msg,status:"info"}),S.success.status&&Object(h.jsx)(La,{msg:S.success.msg,status:"success"})]})}function dr(e){var t=e.searchResult,a=e.setSearchableData,r=e.deleteChannel,s=e.data,c=e.pubnub,i=Object(n.useState)([]),o=Object(f.a)(i,2),l=o[0],u=o[1],d=Object(n.useState)(""),j=Object(f.a)(d,2),m=j[0],g=j[1],v=Object(n.useState)(!1),y=Object(f.a)(v,2),k=y[0],C=y[1],F=Object(n.useState)(!1),S=Object(f.a)(F,2),N=S[0],T=S[1],M=Object(n.useState)(!1),R=Object(f.a)(M,2),I=R[0],A=R[1],D=Object(n.useState)([]),P=Object(f.a)(D,2),L=P[0],E=P[1],B=Object(n.useState)(""),q=Object(f.a)(B,2),W=q[0],_=q[1],z=Object(n.useState)([]),K=Object(f.a)(z,2),H=K[0],V=K[1],Y=Object(n.useState)(0),J=Object(f.a)(Y,2),G=J[0],X=J[1],Z=Object(n.useState)(""),Q=Object(f.a)(Z,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(""),ne=Object(f.a)(ae,2),re=ne[0],se=ne[1],ce=Object(n.useState)(0),ie=Object(f.a)(ce,2),oe=ie[0],le=ie[1],ue=Object(b.g)();Object(n.useEffect)((function(){le(0),de(c,"","")}),[s,H]),Object(n.useEffect)((function(){t.length&&u(t)}),[t]),Object(n.useEffect)((function(){a(l)}),[l]);var de=function(e,t,a){C(!0),u([]),Object(x.a)(p.a.mark((function n(){var r,s,i,o,l;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,$(e,t,a);case 3:return(r=n.sent).data.length||(C(!1),g("No Channel Metadata Found")),X(r.totalCount),se(r.prev),te(r.next),s=[],i=[],o={},r.data.map((function(e,t){return(o=e).updated=Pt(e.updated),s.push(o),i.push(o.id),!1})),n.next=14,Ee(c,i);case 14:l=n.sent,i.forEach((function(e,t){s[t].occupancy=l[e]&&l[e].occupancy})),u(s),U("PubNubChannels",s),C(!1),n.next=26;break;case 21:n.prev=21,n.t0=n.catch(0),C(!1),g("No Channel Metadata Found"),U("PubNubChannels",[]);case 26:case"end":return n.stop()}}),n,null,[[0,21]])})))()},be=function(e,t){ue.push({pathname:"/channels/messages",state:{channel:t}})};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Na,{data:l,headCells:[{id:"id",alignment:"left",label:"CHANNEL",avatar:!0},{id:"description",alignment:"left",label:"DESCRIPTION"},{id:"occupancy",alignment:"left",label:"OCCUPANCY"},{id:"icons",alignment:"left",icons:!0,user:!1}],handleRowClick:function(e,t,a){a||be(e,t.id)},message:m,editRow:function(e,t){A(!0),E(t)},deleteRow:function(e,t){T(!0),_(t)},viewRow:be,getNewPage:function(e){oe<e?(le(e),de(c,ee,"")):(le(oe-1),de(c,"",re))},tableCount:G,number:oe}),k?Object(h.jsx)(O.a,{justify:"center",container:!0,children:Object(h.jsx)(w.a,{})}):null,Object(h.jsx)(tr,{id:"delete",title:"Are you sure?",open:N,setOpen:T,onConfirm:function(){r(W)},actionMessage:"Yes, Delete it",children:"You want to delete this channel?"}),Object(h.jsx)(ur,{open:I,setOpen:A,pubnubObject:c,data:L,channelUpdated:function(e){V(e)}})]})}function br(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),c=Object(f.a)(s,2),i=c[0],o=c[1],l=Object(n.useState)(!1),u=Object(f.a)(l,2),d=u[0],j=u[1],m=Object(b.g)(),g=rr(),p=function(){j(!1),r(!1)};return Object(h.jsxs)("div",{children:[Object(h.jsx)(Oa,{title:"If you have a channel ID, you can directly join in this by clicking on this button and entering the channel ID",children:Object(h.jsx)(k.a,{id:"joinChannelButton",onClick:function(){r(!0)},className:g.joinChannelButton,startIcon:Object(h.jsx)("img",{src:"/moderation-dashboard/images/link.svg",alt:""}),children:Object(h.jsx)(v.a,{className:g.buttonText,children:"Join Channel"})})}),Object(h.jsxs)(Gn.a,{id:"dialog",fullWidth:!0,onClose:p,"aria-labelledby":"customized-dialog-title",open:a,children:[Object(h.jsxs)(Qn.a,{id:"customized-dialog-title",onClose:p,disableTypography:!0,children:[Object(h.jsx)(v.a,{variant:"h6",className:g.headingFont,children:"Join Channel"}),a?Object(h.jsx)(dt.a,{"aria-label":"close",onClick:p,className:g.closeButton,children:Object(h.jsx)(nr.a,{})}):null]}),Object(h.jsxs)(Zn.a,{children:[Object(h.jsx)(v.a,{testid:"channelId",className:g.subHeadingFont,children:"Channel ID"}),Object(h.jsx)(y.a,{id:"channelId",placeholder:"Enter Channel ID",variant:"outlined",className:g.inputBox,onChange:function(e){return o(e.target.value)},error:d,helperText:d?"Channel is Required":"",autoComplete:"off"})]}),Object(h.jsxs)(Xn.a,{children:[Object(h.jsx)(k.a,{id:"cancelButton",onClick:p,className:g.cancelButton,children:"Cancel"}),Object(h.jsx)(k.a,{id:"joinButton",className:g.addButton,onClick:function(){if(!i)return j(!0),!1;m.push({pathname:"/channels/messages",state:{channel:i}})},color:"primary",children:Object(h.jsx)(v.a,{className:g.buttonText,children:"Join Channel"})})]})]})]})}var jr=a(228),hr=function(){var e=Rt(),t=!!localStorage.getItem("uuid")&&JSON.parse(localStorage.getItem("uuid"));if(e&&t){var a=new Qe.a({subscribeKey:e.subscribe_key,secretKey:e.secret_key,publishKey:e.publish_key,uuid:t});return a._config._addPnsdkSuffix("moderation-dashboard","MD/".concat(jr.a)),{pubnub:a}}return{}};var mr=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)([]),c=Object(f.a)(s,2),o=c[0],l=c[1],u=Object(n.useState)(""),d=Object(f.a)(u,1)[0],b=Object(n.useState)({success:{status:!1,msg:""},error:{status:!1,msg:""}}),j=Object(f.a)(b,2),m=j[0],g=j[1],y=hr().pubnub;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(la.a,{title:"Channels"}),Object(h.jsxs)(O.a,{justify:"space-between",container:!0,children:[Object(h.jsx)(O.a,{item:!0,sm:3,children:Object(h.jsx)(xt.a,{pl:1,children:Object(h.jsx)(v.a,{testid:"channelHeader",variant:"h5",children:"Channels"})})}),Object(h.jsx)(O.a,{item:!0,sm:9,children:Object(h.jsxs)(xt.a,{display:"flex",justifyContent:"flex-end",children:[Object(h.jsx)(xt.a,{ml:2,children:Object(h.jsx)(Da,{id:"search",searched:d,requestSearch:function(e){g(Object(i.a)(Object(i.a)({},m),{},{success:{status:!1,msg:""},error:{status:!1,msg:""}})),Object(x.a)(p.a.mark((function t(){var a,n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Se(y,e);case 3:a=t.sent,n=[],s={},a.length||g(Object(i.a)(Object(i.a)({},m),{},{success:{status:!1,msg:""},error:{status:!0,msg:"No channels found"}})),a.map((function(e,t){return(s=e).updated=Pt(e.updated),n.push(s),!1})),r(n),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),g(Object(i.a)(Object(i.a)({},m),{},{success:{status:!1,msg:""},error:{status:!0,msg:"Failed to filter channel"}}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},cancelSearch:function(){r(!!localStorage.getItem("PubNubChannels")&&JSON.parse(localStorage.getItem("PubNubChannels")))},placeholder:"Search for channel name"})}),Object(h.jsx)(xt.a,{ml:2,children:Object(h.jsx)(lr,{pubnubObject:y,isAdded:function(e){l(e)}})}),Object(h.jsx)(xt.a,{ml:2,children:Object(h.jsx)(br,{})})]})})]}),Object(h.jsx)("br",{}),Object(h.jsx)(O.a,{container:!0,spacing:6,children:Object(h.jsx)(O.a,{item:!0,xs:12,children:Object(h.jsx)(dr,{searchResult:a,setSearchableData:function(e){r(e)},deleteChannel:function(e){e&&Object(x.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne(y,e);case 3:l([]),g(Object(i.a)(Object(i.a)({},m),{},{success:{status:!0,msg:"Channel deleted successfully"},error:{status:!1,msg:""}})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),g(Object(i.a)(Object(i.a)({},m),{},{success:{status:!0,msg:Lt(t.t0.status.errorData)},error:{status:!1,msg:""}}));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},data:o,pubnub:y})})}),m.error.status&&Object(h.jsx)(La,{msg:m.error.msg,status:"info"}),m.success.status&&Object(h.jsx)(La,{msg:m.success.msg,status:"success"})]})},gr=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(en,{children:Object(h.jsx)(mr,{})})})},pr=Object(M.a)((function(e){return{root:{flexGrow:1},gridOne:{padding:e.spacing(2),opacity:1,borderRadius:"10px",border:"1px solid #F3F3F3",background:"#FFFFFF 0% 0% no-repeat padding-box",boxShadow:"0px 3px 6px #00000014",height:"100%"},gridTwo:{padding:e.spacing(2),opacity:1,borderRadius:"10px",border:"1px solid #F3F3F3",background:"#FFFFFF 0% 0% no-repeat padding-box",boxShadow:"0px 3px 6px #00000014",height:"100%"},headings:{textAlign:"left",opacity:1,color:"#C2C2C2",textTransform:"uppercase",font:"var(--unnamed-font-style-normal) normal 600 var(--unnamed-font-size-12)/var(--unnamed-line-spacing-15) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)"},values:{color:"#414141",textAlign:"left",opacity:1,font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-18)/var(--unnamed-line-spacing-23) var(--unnamed-font-family-proxima-nova)"},avatar:{background:"#FCF0EF",color:"#E66E68",borderRadius:"8px"},test:{text:"ellipsis"},appName:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-16)/var(--unnamed-line-spacing-19) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",fontSize:"12px",color:"#C2C2C2",opacity:1}}})),xr=function(){var e=pr(),t=Object(n.useState)([]),a=Object(f.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1];Object(n.useEffect)((function(){s(Rt())}),[]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(la.a,{title:"Overview"}),Object(h.jsx)(O.a,{justify:"space-between",container:!0,children:Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{pl:1,children:Object(h.jsx)(v.a,{testid:"overview_Header",variant:"h5",children:"Overview"})})})}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:e.root,children:Object(h.jsxs)(O.a,{container:!0,spacing:3,children:[Object(h.jsx)(O.a,{item:!0,xs:12,children:Object(h.jsxs)(mt.a,{className:e.gridOne,children:[Object(h.jsxs)(O.a,{justify:"flex-start",container:!0,children:[Object(h.jsx)(xt.a,{mr:1,children:Object(h.jsx)(bt.a,{className:e.avatar,variant:"square",children:r.name?Dt(r.name):""})}),Object(h.jsxs)(O.a,{item:!0,sm:6,xs:12,md:6,children:[Object(h.jsx)("small",{className:e.values,children:r.name?r.name:""}),Object(h.jsx)("br",{}),Object(h.jsx)("small",{className:e.appName,children:r.appName?r.appName:""})]})]}),Object(h.jsx)("br",{}),Object(h.jsx)(ft.a,{}),Object(h.jsx)("br",{}),Object(h.jsxs)(O.a,{justify:"space-between",container:!0,children:[Object(h.jsxs)(O.a,{item:!0,xs:12,sm:6,children:[Object(h.jsx)(v.a,{testid:"modified_date",className:e.headings,children:"Modified Date"}),Object(h.jsx)(v.a,{className:e.values,children:r.modified?r.modified:""})]}),Object(h.jsxs)(O.a,{item:!0,xs:12,sm:6,children:[Object(h.jsx)(v.a,{testid:"created_on",className:e.headings,children:"Created on"}),Object(h.jsx)(v.a,{className:e.values,children:r.created?r.created:""})]})]})]})}),Object(h.jsx)(O.a,{item:!0,xs:12,children:Object(h.jsxs)(mt.a,{className:e.gridTwo,children:[Object(h.jsx)(v.a,{testid:"pubnub_keys",variant:"h6",children:"PubNub Keys"}),Object(h.jsx)("br",{}),Object(h.jsx)(ft.a,{}),Object(h.jsx)("br",{}),Object(h.jsxs)(O.a,{justify:"space-between",container:!0,children:[Object(h.jsxs)(O.a,{item:!0,xs:12,sm:6,children:[Object(h.jsx)(v.a,{testid:"publish_key",variant:"h6",className:e.headings,children:"Publish Key"}),Object(h.jsx)(v.a,{className:e.values,children:r.publish_key?r.publish_key:""}),Object(h.jsx)("br",{}),Object(h.jsxs)(v.a,{testid:"secret_key",className:e.headings,children:["Secret Key",Object(h.jsx)(dt.a,{id:"maskableIcon",className:e.headings,onClick:function(){l((function(e){return!e}))},children:o?Object(h.jsx)(N.a,{}):Object(h.jsx)(S.a,{})})]}),Object(h.jsx)(v.a,{id:"maskableText",className:e.values,children:o?r.secret_key:r.secret_key&&"*".repeat(r.secret_key.length)})]}),Object(h.jsxs)(O.a,{item:!0,xs:12,sm:6,children:[Object(h.jsx)(v.a,{variant:"h6",testid:"subsciber_key",className:e.headings,children:"Subscribe Key"}),Object(h.jsx)(v.a,{className:e.values,children:r.subscribe_key?r.subscribe_key:""})]})]})]})})]})})]})},fr=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(en,{children:Object(h.jsx)(xr,{})})})};function Or(e){var t=rr();return Object(h.jsxs)("form",{onSubmit:e.formik.handleSubmit,children:[Object(h.jsxs)(Zn.a,{children:[Object(h.jsx)(v.a,{testid:"User_Id",className:t.subHeadingFont,children:"User ID"}),Object(h.jsx)(y.a,{id:"user_id",name:"user_id",placeholder:"Enter user ID",variant:"outlined",disabled:e.disabled,className:t.inputBox,autoComplete:"off",onChange:e.formik.handleChange,value:e.formik.values.user_id,error:e.formik.touched.user_id&&Boolean(e.formik.errors.user_id),helperText:e.formik.touched.user_id&&e.formik.errors.user_id}),Object(h.jsx)(v.a,{testid:"User_Name",className:t.subHeadingFont,children:"User Name"}),Object(h.jsx)(y.a,{id:"name",name:"name",placeholder:"Enter user name",variant:"outlined",className:t.inputBox,autoComplete:"off",onChange:e.formik.handleChange,value:e.formik.values.name,error:e.formik.touched.name&&Boolean(e.formik.errors.name),helperText:e.formik.touched.name&&e.formik.errors.name}),Object(h.jsx)(v.a,{testid:"Email",className:t.subHeadingFont,children:"Email Address"}),Object(h.jsx)(y.a,{id:"email",name:"email",placeholder:"Enter email address",variant:"outlined",className:t.inputBox,autoComplete:"off",onChange:e.formik.handleChange,value:e.formik.values.email,error:e.formik.touched.email&&Boolean(e.formik.errors.email),helperText:e.formik.touched.email&&e.formik.errors.email}),Object(h.jsx)(v.a,{testid:"Profile_Url",className:t.subHeadingFont,children:"Profile URL"}),Object(h.jsx)(y.a,{id:"profile_url",name:"profile_url",placeholder:"Enter Profile URL",variant:"outlined",className:t.inputBox,autoComplete:"off",onChange:e.formik.handleChange,value:e.formik.values.profile_url,error:e.formik.touched.profile_url&&Boolean(e.formik.errors.profile_url),helperText:e.formik.touched.profile_url&&e.formik.errors.profile_url}),Object(h.jsx)("br",{})]}),Object(h.jsxs)(Xn.a,{children:[Object(h.jsx)(k.a,{autoFocus:!0,className:t.cancelButton,onClick:e.handleClose,children:"CANCEL"}),Object(h.jsx)(k.a,{autoFocus:!0,className:t.addButton,type:"submit",color:"primary",disabled:e.userAlert.loading,startIcon:e.userAlert.loading?Object(h.jsx)(w.a,{className:t.loader,size:30}):null,children:Object(h.jsx)(v.a,{className:t.buttonText,children:e.buttonTitle})})]})]})}var vr=ir.b({email:ir.c("Enter your email").email("Enter a valid email"),name:ir.c("Enter your name").required("User name is required"),user_id:ir.c("Enter your user ID").required("User ID is required").min(3,"Must be min 3 characters").max(64,"Must be max 64 characters"),profile_url:ir.a((function(e){return/^data/.test(e)?ir.c().matches(/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@/?%\s]*)$/i,"Must be a valid data URI"):ir.c().url("Enter a valid URL")}))});function yr(e){var t=e.pubnubObject,a=e.isAdded,r=Object(n.useState)(!1),s=Object(f.a)(r,2),c=s[0],o=s[1],l=Object(n.useState)({success:{status:!1,msg:""},error:{status:!1,msg:""},loading:!1}),u=Object(f.a)(l,2),d=u[0],b=u[1],j=rr(),m=Object(sr.a)({initialValues:{email:"",name:"",user_id:"",profile_url:""},validationSchema:vr,enableReinitialize:!0,onSubmit:function(e){O(e)}}),g=function(){o(!1),m.resetForm()},O=function(e){b(Object(i.a)(Object(i.a)({},d),{},{success:{status:!1,msg:""},error:{status:!1,msg:""},loading:!0})),Object(x.a)(p.a.mark((function n(){var r,s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,We(t,e.user_id);case 3:if(!(r=n.sent)||!r.length){n.next=8;break}b(Object(i.a)(Object(i.a)({},d),{},{success:{status:!1,msg:""},error:{status:!0,msg:"User ID already exists!"},loading:!1})),n.next=21;break;case 8:return n.prev=8,n.next=11,te(t,e.name,e.email,e.user_id,e.profile_url);case 11:s=n.sent,g(),b(Object(i.a)(Object(i.a)({},d),{},{success:{status:!0,msg:"User added successfully"},error:{status:!1,msg:""},loading:!1})),a(s),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(8),g(),b(Object(i.a)(Object(i.a)({},d),{},{success:{status:!1,msg:""},error:{status:!0,msg:Lt(n.t0.status.errorData)},loading:!1}));case 21:n.next=26;break;case 23:n.prev=23,n.t1=n.catch(0),b(Object(i.a)(Object(i.a)({},d),{},{success:{status:!1,msg:""},error:{status:!0,msg:n.t1.message},loading:!1}));case 26:case"end":return n.stop()}}),n,null,[[0,23],[8,17]])})))()};return Object(h.jsxs)("div",{children:[Object(h.jsx)(k.a,{testid:"button_id",className:j.joinChannelButton,startIcon:Object(h.jsx)("img",{src:"/moderation-dashboard/images/plus.svg",alt:"add"}),onClick:function(){o(!0)},children:Object(h.jsx)(v.a,{testid:"add_user",className:j.buttonText,children:"Add user"})}),Object(h.jsxs)(Gn.a,{fullWidth:!0,onClose:g,"aria-labelledby":"customized-dialog-title",open:c,className:j.modalLayout,children:[Object(h.jsxs)(Qn.a,{id:"customized-dialog-title",onClose:g,disableTypography:!0,children:[Object(h.jsx)(v.a,{variant:"h6",className:j.headingFont,children:"Add User"}),c?Object(h.jsx)(dt.a,{"aria-label":"close",onClick:g,className:j.closeButton,children:Object(h.jsx)(nr.a,{})}):null]}),Object(h.jsx)(Or,{formik:m,userAlert:d,handleClose:g,buttonTitle:"ADD",disabled:!1})]}),d.error.status&&Object(h.jsx)(La,{msg:d.error.msg,status:"info"}),d.success.status&&Object(h.jsx)(La,{msg:d.success.msg,status:"success"})]})}function kr(e){var t=e.pubnubObject,a=e.open,r=e.setOpen,s=e.data,c=e.isUpdated,o=Object(n.useState)(""),l=Object(f.a)(o,2),u=l[0],d=l[1],b=Object(n.useState)(null),j=Object(f.a)(b,2),m=j[0],g=j[1],O=Object(n.useState)(""),y=Object(f.a)(O,2),k=y[0],w=y[1],C=Object(n.useState)(null),F=Object(f.a)(C,2),S=F[0],N=F[1],T=Object(n.useState)({success:{status:!1,msg:""},error:{status:!1,msg:""},loading:!1}),M=Object(f.a)(T,2),R=M[0],I=M[1],A=rr();Object(n.useEffect)((function(){d(s.name),g(s.email),w(s.id),N(s.profileUrl)}),[s]);var D=function(){r(!1)},P=Object(sr.a)({initialValues:{email:m||"",name:u,user_id:k,profile_url:S||""},enableReinitialize:!0,validationSchema:vr,onSubmit:function(e){L(e)}}),L=function(e){I(Object(i.a)(Object(i.a)({},R),{},{success:{status:!1,msg:""},error:{status:!1,msg:""},loading:!0})),Object(x.a)(p.a.mark((function a(){var n;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ie(t,e.name,e.email,e.user_id,e.profile_url);case 3:n=a.sent,D(),I(Object(i.a)(Object(i.a)({},R),{},{success:{status:!0,msg:"User updated successfully"},error:{status:!1,msg:""},loading:!1})),c(n),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),D(),I(Object(i.a)(Object(i.a)({},R),{},{success:{status:!1,msg:""},error:{status:!0,msg:Lt(a.t0.status.errorData)},loading:!1}));case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))()};return Object(h.jsxs)("div",{children:[Object(h.jsxs)(Gn.a,{fullWidth:!0,onClose:D,"aria-labelledby":"customized-dialog-title",open:a,className:A.modalLayout,children:[Object(h.jsxs)(Qn.a,{id:"customized-dialog-title",onClose:D,disableTypography:!0,children:[Object(h.jsx)(v.a,{variant:"h6",className:A.headingFont,children:"Update User Metadata"}),a?Object(h.jsx)(dt.a,{"aria-label":"close",onClick:D,className:A.closeButton,children:Object(h.jsx)(nr.a,{})}):null]}),Object(h.jsx)(Or,{formik:P,userAlert:R,handleClose:D,buttonTitle:"UPDATE",disabled:!0})]}),R.error.status&&Object(h.jsx)(La,{msg:R.error.msg,status:"info"}),R.success.status&&Object(h.jsx)(La,{msg:R.success.msg,status:"success"})]})}var wr=ir.b({reason:ir.c().required("Reason is required")});function Cr(e){var t=e.pubnub,a=e.open,r=e.setOpen,s=e.uuid,c=e.isUpdated,o=e.action,l=Object(n.useState)(""),u=Object(f.a)(l,2),d=u[0],b=u[1],j=Object(n.useState)({success:{status:!1,msg:""},error:{status:!1,msg:""},loading:!1}),m=Object(f.a)(j,2),g=m[0],O=m[1],C=rr(),F=Tt(),S=new Date,N=s.custom||{};Object(n.useEffect)((function(){b(s.id)}),[s]);var T=function(){M.resetForm(),r(!1)},M=Object(sr.a)({initialValues:{reason:""},enableReinitialize:!0,validationSchema:wr,onSubmit:function(e){R(e)}}),R=function(e){O(Object(i.a)(Object(i.a)({},g),{},{success:{status:!1,msg:""},error:{status:!1,msg:""},loading:!0})),N.reason=e.reason,N.flaggedBy=F&&F.email,N.flaggedAt=S,N.flag="flag"===o,Object(x.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$e(t,d,N);case 3:a=e.sent,T(),O(Object(i.a)(Object(i.a)({},g),{},{success:{status:!0,msg:"User ".concat(zt(o),"ged successfully.")},error:{status:!1,msg:""},loading:!1})),c(a),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),T(),O(Object(i.a)(Object(i.a)({},g),{},{success:{status:!1,msg:""},error:{status:!0,msg:Lt(e.t0.status.errorData)},loading:!1}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(Gn.a,{fullWidth:!0,onClose:T,"aria-labelledby":"customized-dialog-title",open:a,className:C.modalLayout,children:[Object(h.jsxs)(Qn.a,{id:"customized-dialog-title",onClose:T,disableTypography:!0,children:[Object(h.jsxs)(v.a,{variant:"h6",className:C.headingFont,children:[zt(o)," User"]}),Object(h.jsx)(dt.a,{"aria-label":"close",onClick:T,className:C.closeButton,children:Object(h.jsx)(nr.a,{})})]}),Object(h.jsxs)("form",{onSubmit:M.handleSubmit,children:[Object(h.jsxs)(Zn.a,{children:[Object(h.jsx)(v.a,{testid:"reason",className:C.subHeadingFont,children:"Reason"}),Object(h.jsx)(y.a,{id:"reason",name:"reason",placeholder:"Add Reason",variant:"outlined",className:C.inputBox,autoComplete:"off",onChange:M.handleChange,value:M.values.reason,error:M.touched.reason&&Boolean(M.errors.reason),helperText:M.touched.reason&&M.errors.reason}),Object(h.jsx)("br",{})]}),Object(h.jsxs)(Xn.a,{children:[Object(h.jsx)(k.a,{id:"cancel",autoFocus:!0,className:C.cancelButton,onClick:T,children:"CANCEL"}),Object(h.jsx)(k.a,{id:"submit",autoFocus:!0,className:C.addButton,type:"submit",color:"primary",disabled:g.loading,startIcon:g.loading?Object(h.jsx)(w.a,{className:C.loader,size:30}):null,children:Object(h.jsx)(v.a,{className:C.buttonText,children:"Submit"})})]})]})]}),g.error.status&&Object(h.jsx)(La,{msg:g.error.msg,status:"info"}),g.success.status&&Object(h.jsx)(La,{msg:g.success.msg,status:"success"})]})}function Fr(e){var t=e.pubnubObject,a=e.open,r=e.setOpen,s=e.uuid,c=e.action,o=Object(n.useState)(""),l=Object(f.a)(o,2),u=l[0],d=l[1],b=Object(n.useState)({success:{status:!1,msg:""},error:{status:!1,msg:""}}),j=Object(f.a)(b,2),m=j[0],g=j[1],O=er(),y=s.custom||{};Object(n.useEffect)((function(){d(s.id)}),[s]);var w=function(){r(!1)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(Gn.a,{testid:"DialogId",open:a,onClose:function(){return r(!1)},"aria-labelledby":"confirm-dialog",fullWidth:!0,maxWidth:"xs",className:O.confirmDialog,children:[Object(h.jsx)(Qn.a,{id:"confirm-dialog",children:e.title}),Object(h.jsx)(Zn.a,{children:e.children}),Object(h.jsxs)(Xn.a,{children:[Object(h.jsx)(k.a,{onClick:function(){r(!1),y.ban="ban"===c,g(Object(i.a)(Object(i.a)({},m),{},{success:{status:!1,msg:""},error:{status:!1,msg:""}})),Object(x.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$e(t,u,y);case 3:w(),g(Object(i.a)(Object(i.a)({},m),{},{success:{status:!0,msg:"User ".concat(zt(c),"ned successfully")},error:{status:!1,msg:""}})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),w(),g(Object(i.a)(Object(i.a)({},m),{},{success:{status:!1,msg:""},error:{status:!0,msg:Lt(e.t0.status.errorData)}}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},className:O.confirmButton,children:Object(h.jsx)(v.a,{children:" Yes"})}),Object(h.jsx)(k.a,{variant:"contained",onClick:function(){return e.setOpen(!1)},className:O.cancelButton,children:"Cancel"})]})]}),m.error.status&&Object(h.jsx)(La,{msg:m.error.msg,status:"info"}),m.success.status&&Object(h.jsx)(La,{msg:m.success.msg,status:"success"})]})}function Sr(e){var t=e.searchResult,a=e.setSearchableData,r=e.deleteUser,s=e.data,c=e.pubnub,i=e.filterBy,o=Object(n.useState)([]),l=Object(f.a)(o,2),u=l[0],d=l[1],b=Object(n.useState)(""),j=Object(f.a)(b,2),m=j[0],g=j[1],v=Object(n.useState)(!1),y=Object(f.a)(v,2),k=y[0],C=y[1],F=Object(n.useState)(!1),S=Object(f.a)(F,2),N=S[0],T=S[1],M=Object(n.useState)(!1),R=Object(f.a)(M,2),I=R[0],A=R[1],D=Object(n.useState)([]),P=Object(f.a)(D,2),L=P[0],E=P[1],B=Object(n.useState)([]),q=Object(f.a)(B,2),W=q[0],_=q[1],z=Object(n.useState)(""),K=Object(f.a)(z,2),H=K[0],V=K[1],Y=Object(n.useState)(0),J=Object(f.a)(Y,2),$=J[0],G=J[1],Z=Object(n.useState)(""),Q=Object(f.a)(Z,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(""),ne=Object(f.a)(ae,2),re=ne[0],se=ne[1],ce=Object(n.useState)(0),ie=Object(f.a)(ce,2),oe=ie[0],le=ie[1],ue=Object(n.useState)(!1),de=Object(f.a)(ue,2),be=de[0],je=de[1],he=Object(n.useState)(""),me=Object(f.a)(he,2),ge=me[0],pe=me[1],xe=Object(n.useState)(!1),fe=Object(f.a)(xe,2),Oe=fe[0],ve=fe[1];Object(n.useEffect)((function(){le(0),ye(c,"","",i)}),[s,W,i]),Object(n.useEffect)((function(){t.length&&d(t)}),[t]),Object(n.useEffect)((function(){a(u)}),[u]);var ye=function(e,t,a,n){d([]),C(!0),Object(x.a)(p.a.mark((function r(){var s,c,i;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,X(e,t,a,n);case 3:(s=r.sent).data.length||(C(!1),g("No User Metadata Found")),G(s.totalCount),se(s.prev),te(s.next),c=[],i={},s.data.map((function(e,t){return(i=e).updated=Pt(e.updated),i.uuid=e.id,c.push(i),!1})),d(c),U("PubNubUsers",c),C(!1),r.next=21;break;case 16:r.prev=16,r.t0=r.catch(0),C(!1),g("No User Metadata Found"),U("PubNubUsers",[]);case 21:case"end":return r.stop()}}),r,null,[[0,16]])})))()},ke=function(e){_(e)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Na,{data:u,headCells:[{id:"name",alignment:"left",label:"USER NAME",avatar:!0,user:!0},{id:"email",alignment:"left",label:"EMAIL ID"},{id:"updated",alignment:"left",label:"UPDATED ON"},{id:"icons",alignment:"left",icons:!0,user:!0}],message:m,editRow:function(e,t){A(!0),E(t)},deleteRow:function(e,t){T(!0),V(t)},flagUser:function(e,t){je(!0),pe("flag"),V(t)},banUser:function(e,t){ve(!0),pe("ban"),V(t)},unbanUser:function(e,t){ve(!0),pe("unban"),V(t)},unFlagUser:function(e,t){je(!0),pe("unflag"),V(t)},getNewPage:function(e){oe<e?(le(e),ye(c,ee,"","")):(le(oe-1),ye(c,"",re,""))},tableCount:$,number:oe}),k?Object(h.jsx)(O.a,{justify:"center",container:!0,children:Object(h.jsx)(w.a,{})}):null,Object(h.jsx)(tr,{title:"Are you sure?",open:N,setOpen:T,onConfirm:function(){r(H)},actionMessage:"Yes, Delete it",children:"You want to delete this user?"}),Object(h.jsx)(kr,{open:I,setOpen:A,pubnubObject:c,data:L,isUpdated:ke}),Object(h.jsxs)(Fr,{title:"Are you sure?",open:Oe,setOpen:ve,pubnubObject:c,uuid:H,isUpdated:ke,action:ge,children:["You want to ",ge," this user?"]}),Object(h.jsxs)(Cr,{open:be,setOpen:je,uuid:H,isUpdated:ke,pubnub:c,action:ge,children:["You want to ",ge," this user?"]})]})}var Nr=Object(M.a)({list:{width:400},title:{font:"normal normal medium 28px/38px Proxima Nova",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#414141",opacity:1},avatar:{background:"#FFFFFF 0% 0% no-repeat padding-box",border:"1px solid #6387ED67",borderRadius:"5px",opacity:1,height:"50px"},listText:{font:"var(--unnamed-font-style-normal) normal medium var(--unnamed-font-size-16)/var(--unnamed-line-spacing-24) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#414141",opacity:1},userType:{font:"var(--unnamed-font-style-normal) normal 600 var(--unnamed-font-size-16)/var(--unnamed-line-spacing-24) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#6387ED",opacity:1}}),Tr=a(495);function Mr(e){var t=Nr(),a=r.a.useState(!1),n=Object(f.a)(a,2),s=n[0],c=n[1],i=r.a.useState(!1),o=Object(f.a)(i,2),l=o[0],u=o[1],d=r.a.useState(!1),b=Object(f.a)(d,2),j=b[0],m=b[1],g=function(){c(!1)},p=function(t){"ban"!==t||l?"flag"!==t||j?(e.isFiltered("all"),u(!1),m(!1)):(u(!1),m(!0),e.isFiltered(t)):(m(!1),u(!0),e.isFiltered(t))};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(bt.a,{id:"openDrawer",variant:"square",onClick:function(){c(!0)},className:t.avatar,children:Object(h.jsx)(dt.a,{children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/filter.svg",alt:"filter"})})}),Object(h.jsx)(Tr.a,{anchor:"right",open:s,onClose:g,children:Object(h.jsxs)("div",{className:t.list,children:[Object(h.jsx)(xt.a,{pl:3,pt:4,pr:1,children:Object(h.jsxs)(O.a,{justify:"space-between",container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(v.a,{className:t.title,children:"Filters"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(k.a,{id:"drawer",onClick:g,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/times.svg",alt:"filter"})})})]})}),Object(h.jsx)(xt.a,{pl:3,pt:4,children:Object(h.jsx)(v.a,{testid:"UserType",className:t.userType,children:"User Type"})}),Object(h.jsxs)(Ua.a,{children:[Object(h.jsxs)(qa.a,{button:!0,onClick:function(){return p("ban")},testid:"banButton",children:[Object(h.jsx)(Wa.a,{children:Object(h.jsx)(an.a,{id:"banCheck",name:"banned_users",value:"ban",color:"primary",checked:l})}),Object(h.jsx)(_a.a,{children:Object(h.jsx)(v.a,{testid:"bannedUsers",className:t.listText,children:"Banned Users"})})]}),Object(h.jsxs)(qa.a,{button:!0,onClick:function(){return p("flag")},testid:"flagButton",children:[Object(h.jsx)(Wa.a,{children:Object(h.jsx)(an.a,{id:"flagCheck",name:"flagged_users",value:"flag",color:"primary",checked:j})}),Object(h.jsx)(_a.a,{children:Object(h.jsx)(v.a,{testid:"flaggedUsers",className:t.listText,children:"Flagged Users"})})]})]})]})})]})}var Rr=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)([]),c=Object(f.a)(s,2),o=c[0],l=c[1],u=hr().pubnub,d=Object(n.useState)(""),b=Object(f.a)(d,1)[0],j=Object(n.useState)(""),m=Object(f.a)(j,2),g=m[0],y=m[1],k=Object(n.useState)({success:{status:!1,msg:""},error:{status:!1,msg:""}}),w=Object(f.a)(k,2),C=w[0],F=w[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(la.a,{title:"Users"}),Object(h.jsxs)(O.a,{justify:"space-between",container:!0,children:[Object(h.jsx)(O.a,{item:!0,sm:4,children:Object(h.jsx)(xt.a,{pl:1,children:Object(h.jsx)(v.a,{testid:"title",variant:"h5",children:"Users"})})}),Object(h.jsx)(O.a,{item:!0,sm:8,children:Object(h.jsxs)(xt.a,{display:"flex",justifyContent:"flex-end",children:[Object(h.jsx)(xt.a,{ml:2,children:Object(h.jsx)(Da,{searched:b,requestSearch:function(e){F(Object(i.a)(Object(i.a)({},C),{},{success:{status:!1,msg:""},error:{status:!1,msg:""}})),Object(x.a)(p.a.mark((function t(){var a,n,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return F(Object(i.a)(Object(i.a)({},C),{},{success:{status:!1,msg:""},error:{status:!1,msg:""}})),t.prev=1,t.next=4,Ce(u,e);case 4:a=t.sent,n=[],s={},a.length||F(Object(i.a)(Object(i.a)({},C),{},{success:{status:!1,msg:""},error:{status:!0,msg:"No users found"}})),a.map((function(e,t){return(s=e).updated=Pt(e.updated),n.push(s),!1})),r(n),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),F(Object(i.a)(Object(i.a)({},C),{},{success:{status:!1,msg:""},error:{status:!0,msg:"Failed to filter user"}}));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()},cancelSearch:function(){r(!!localStorage.getItem("PubNubUsers")&&JSON.parse(localStorage.getItem("PubNubUsers")))},placeholder:"Search for user name"})}),Object(h.jsx)(xt.a,{ml:2,children:Object(h.jsx)(Mr,{isFiltered:function(e){var t="";"all"!==e&&(t="custom.".concat(e," == true")),y(t)}})}),Object(h.jsx)(xt.a,{ml:2,children:Object(h.jsx)(yr,{pubnubObject:u,isAdded:function(e){l(e)}})})]})})]}),Object(h.jsx)("br",{}),Object(h.jsx)(O.a,{container:!0,spacing:6,children:Object(h.jsx)(O.a,{item:!0,xs:12,children:Object(h.jsx)(Sr,{searchResult:a,setSearchableData:function(e){r(e)},deleteUser:function(e){e&&Object(x.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,se(u,e);case 3:l([]),F(Object(i.a)(Object(i.a)({},C),{},{success:{status:!0,msg:"User deleted successfully"},error:{status:!1,msg:""}})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),F(Object(i.a)(Object(i.a)({},C),{},{success:{status:!1,msg:""},error:{status:!0,msg:Lt(t.t0.status.errorData)}}));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},data:o,pubnub:u,filterBy:g})})}),C.error.status&&Object(h.jsx)(La,{msg:C.error.msg,status:"info"}),C.success.status&&Object(h.jsx)(La,{msg:C.success.msg,status:"success"})]})},Ir=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(en,{children:Object(h.jsx)(Rr,{})})})},Ar=a(27),Dr=Object(M.a)((function(e){return{root:{flexGrow:1},header:{opacity:1,background:"#F7F8FA 0% 0% no-repeat padding-box",height:"50px"},messages:{padding:e.spacing(2),opacity:1,border:"1px solid #F3F3F3",background:"#FFFFFF 0% 0% no-repeat padding-box",boxShadow:"0px 3px 6px #00000014",height:"57vh",overflow:"auto"},chat:{background:"#FFFFFF 0% 0% no-repeat padding-box",borderRadius:"0px 10px 10px 10px",opacity:1,height:"auto",width:"auto",border:"1px solid #DDDDDD",marginBottom:"5px",marginLeft:"8%",maxWidth:"40%"},values:{color:"#414141",textAlign:"left",opacity:1,font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-18)/var(--unnamed-line-spacing-23) var(--unnamed-font-family-proxima-nova)"},avatar:{background:"#EACAFF",color:"#BD59FF",borderRadius:"8px"},appName:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-16)/var(--unnamed-line-spacing-19) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",fontSize:"12px",color:"#C2C2C2",opacity:1},timeField:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) 11px/13px var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#C2C2C2",opacity:1,marginBottom:"10px",marginLeft:"8%"},channelMember:{background:"#FFFFFF 0% 0% no-repeat padding-box",borderRadius:"10px",opacity:1,height:"48px",width:"100%",marginBottom:"20px"},user:{font:"var(--unnamed-font-style-normal) normal 600 var(--unnamed-font-size-14)/var(--unnamed-line-spacing-17) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#4B5155",opacity:1,marginBottom:"10px",marginLeft:"3%"},chatText:{font:"var(--unnamed-font-style-normal) normal medium var(--unnamed-font-size-16)/var(--unnamed-line-spacing-19) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#414141",marginBottom:"10px",marginTop:"10px",marginLeft:"20px",marginRight:"20px",wordBreak:"break-word",whiteSpace:"pre-wrap"},members:{font:"var(--unnamed-font-style-normal) normal 600 var(--unnamed-font-size-14)/var(--unnamed-line-spacing-17) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#4B5155",opacity:1,margin:"10px 0px 10px 10px"},channelMembers:{padding:e.spacing(2),opacity:1,border:"1px solid #F3F3F3",background:"#FFFFFF 0% 0% no-repeat padding-box",boxShadow:"0px 3px 6px #00000014",maxHeight:"74vh",overflow:"auto"},totalCount:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-12)/var(--unnamed-line-spacing-15) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#414141",opacity:1,marginBottom:"10px"},userProfile:{borderRadius:"8px"},totalUsers:{background:"#C2C2C2 0% 0% no-repeat padding-box",borderRadius:"5px",opacity:1,font:"var(--unnamed-font-style-normal) normal 600 11px/13px var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#FFFFFF",height:"auto",width:"25px"},onlineUsers:{background:"#76C00D 0% 0% no-repeat padding-box",borderRadius:"5px",opacity:1,font:"var(--unnamed-font-style-normal) normal 600 11px/13px var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#FFFFFF",height:"auto",width:"25px"},alertMessage:{background:"transparent"},messagesCount:{background:"#E5EAF9 0% 0% no-repeat padding-box",borderRadius:"0px 0px 5px 5px",opacity:1,textTransform:"none"},messagesCountFont:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-12)/16px var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"center",color:"#6387ED",opacity:1,textTransform:"camelcase"},deletedChat:{font:"var(--unnamed-font-style-normal) normal medium var(--unnamed-font-size-16)/var(--unnamed-line-spacing-19) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"left",color:"#414141",marginBottom:"10px",marginTop:"10px",marginLeft:"20px",marginRight:"20px",textDecoration:"line-through"},messageContainer:{"& button":{display:"none"},"&:hover":{"& button":{display:"inline-block"}}},activeToggled:{background:"#6387ED 0% 0% no-repeat padding-box",borderRadius:"5px",opacity:1,font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-12)/16px Graphik",letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"center",color:"#FFFFFF",textTransform:"none","&:hover":{backgroundColor:"#6387ED"}},disableToggled:{background:"#E5EAF9 0% 0% no-repeat padding-box",borderRadius:"5px",opacity:1,letterSpacing:"var(--unnamed-character-spacing-0)",textAlign:"center",font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-12)/16px Graphik",color:"#6387ED",textTransform:"none","&:hover":{backgroundColor:"#E5EAF9"}},messageBox:{background:"#F7F8FA 0% 0% no-repeat padding-box",border:"1px solid #DBE5ED",borderRadius:"8px 8px 0px 0px",opacity:1,height:"auto",borderRight:"#6387ED"},editMessageHeader:{font:"var(--unnamed-font-style-normal) normal 600 var(--unnamed-font-size-16)/var(--unnamed-line-spacing-19) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",color:"#414141",opacity:1,marginTop:"10px",marginLeft:"20px"},editMessageFont:{font:"var(--unnamed-font-style-normal) normal 600 var(--unnamed-font-size-16)/var(--unnamed-line-spacing-19) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",color:"#414141",opacity:1,marginTop:"10px",marginLeft:"20px",marginBottom:"10px",wordBreak:"break-word",whiteSpace:"pre-wrap"},image:{maxWidth:"240px",maxHeight:"165px",width:"100%",height:"100%",objectFit:"cover",border:"1px solid #DDDDDD",borderRadius:"0px 10px 10px 10px"},imageIcon:{position:"absolute",top:"10px",right:"10px"},imageContainer:{padding:"0px",cursor:"default"}}})),Pr=a(481),Lr=Object(fa.a)((function(e){return{badge:{backgroundColor:"#76C00D",color:"#76C00D",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",border:"1px solid currentColor",content:'""'}}}}))(Pr.a),Er=Object(fa.a)((function(e){return{badge:{backgroundColor:"#C2C2C2",color:"#C2C2C2",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",border:"1px solid currentColor",content:'""'}}}}))(Pr.a),Br=function(e){var t=er(),a=Object(n.useState)({success:{status:!1,msg:""},error:{status:!1,msg:""}}),r=Object(f.a)(a,2),s=r[0],c=r[1],o=Vt(),l=e.user.custom||{},u=e.user.custom&&e.user.custom.mutedChannels,d=e.user.custom&&e.user.custom.blockedChannels,b=function(){if(c(Object(i.a)(Object(i.a)({},s),{},{success:{status:!1,msg:""},error:{status:!1,msg:""}})),"mute"===e.action||"unmute"===e.action){var t=function(){if(u){var t=u.split(",");"mute"===e.action?t.push(o):t=t.filter((function(e){return e!==o})),u=t.join(",")}else u=o;return u}();l.mutedChannels=t}if("block"===e.action||"unblock"===e.action){var a=function(){if(d){var t=d.split(",");"block"===e.action?t.push(o):t=t.filter((function(e){return e!==o})),d=t.join(",")}else d=o;return d}();l.blockedChannels=a}Object(x.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$e(e.pubnub,e.user.id,l);case 3:a=t.sent,e.updated(a,e.action),c(Object(i.a)(Object(i.a)({},s),{},{success:{status:!0,msg:"Successfully updated"},error:{status:!1,msg:""}})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),c(Object(i.a)(Object(i.a)({},s),{},{success:{status:!1,msg:""},error:{status:!0,msg:"Failed to add metadata"}}));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(Gn.a,{testid:"DialogId",open:e.open,onClose:function(){return e.setOpen(!1)},"aria-labelledby":"confirm-dialog",fullWidth:!0,maxWidth:"xs",className:t.confirmDialog,children:[Object(h.jsx)(Qn.a,{id:"confirm-dialog",children:e.title}),Object(h.jsx)(Zn.a,{children:e.children}),Object(h.jsxs)(Xn.a,{children:[Object(h.jsx)(k.a,{onClick:function(){e.setOpen(!1),b()},className:t.confirmButton,children:Object(h.jsxs)(v.a,{children:["Yes, ",zt(e.action)," them"]})}),Object(h.jsx)(k.a,{variant:"contained",onClick:function(){return e.setOpen(!1)},className:t.cancelButton,children:"Cancel"})]})]}),s.error.status&&Object(h.jsx)(La,{msg:s.error.msg,status:"info"}),s.success.status&&Object(h.jsx)(La,{msg:s.success.msg,status:"success"})]})},Ur=a(229);function qr(e){return Object(h.jsxs)(h.Fragment,{children:[e.membersLength>99&&e.membersLength<e.totalCount?Object(h.jsx)(Ur.a,{onEnter:e.fetchChannelsMembersOnScroll}):null,e.loading?Object(h.jsx)(O.a,{justify:"center",container:!0,children:Object(h.jsx)(w.a,{})}):null]})}function Wr(e){var t=Dr(),a=Object(n.useState)([]),r=Object(f.a)(a,2),s=r[0],c=r[1],i=Object(n.useState)(0),o=Object(f.a)(i,2),l=o[0],u=o[1],d=Object(n.useState)(!1),b=Object(f.a)(d,2),j=b[0],m=b[1],g=Object(n.useState)(!1),y=Object(f.a)(g,2),k=y[0],w=y[1],C=Object(n.useState)([]),F=Object(f.a)(C,2),S=F[0],N=F[1],T=Object(n.useState)(""),M=Object(f.a)(T,2),R=M[0],I=M[1],A=Object(n.useState)(""),D=Object(f.a)(A,2),P=D[0],L=D[1],E=Object(n.useState)(!1),B=Object(f.a)(E,2),U=B[0],q=B[1];Object(n.useEffect)((function(){W()}),[e.channelMembers]),Object(n.useEffect)((function(){L(e.page)}),[e.page]);var W=function(){Object(x.a)(p.a.mark((function t(){var a,n,r,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Re(e.pubnub,e.channelName);case 3:a=t.sent,u(a.length),e.channelMembers.map((function(t,n){return e.channelMembers[n].mute=!1,e.channelMembers[n].block=!1,Xt(t,e.channelName)&&(e.channelMembers[n].mute=!0),Zt(t,e.channelName)&&(e.channelMembers[n].block=!0),a.map((function(a,r){return t.uuid.id===a.uuid&&(e.channelMembers[n].status="online"),!1})),!1})),n=[],a.map((function(t,a){var r={uuid:{name:null,profileUrl:null,id:null},status:"online",actionsDisable:!0,toolTipTitle:"User not a member of channel"};return e.channelMembers.filter((function(e){return e.uuid.id===t.uuid})).length||(r.uuid.id=t.uuid,n.push(r)),!1})),r=Object(Ar.a)(new Set(n)),s=[].concat(Object(Ar.a)(r),Object(Ar.a)(e.channelMembers)),c(s),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,13]])})))()};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(O.a,{children:[Object(h.jsx)(v.a,{className:t.members,children:"Members"}),Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{children:Object(h.jsx)(xt.a,{mr:1,ml:1,mb:2,children:Object(h.jsx)(bt.a,{variant:"square",className:t.onlineUsers,children:l})})}),Object(h.jsx)(xt.a,{children:Object(h.jsx)("small",{className:t.totalCount,children:"Online Users"})}),Object(h.jsx)(O.a,{children:Object(h.jsx)(xt.a,{mr:1,mb:2,ml:1,children:Object(h.jsx)(bt.a,{variant:"square",className:t.totalUsers,children:s.length})})}),Object(h.jsx)(xt.a,{children:Object(h.jsx)("small",{className:t.totalCount,children:"Total Users"})})]}),null===s||void 0===s?void 0:s.map((function(a,n){return Object(h.jsxs)(O.a,{justify:"flex-start",container:!0,className:t.channelMember,onClick:function(){return t=a,void(k||e.selectedMemberDetail(t));var t},children:[Object(h.jsx)(xt.a,{mr:1,children:a.status?Object(h.jsx)(Lr,{variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(h.jsx)(bt.a,{variant:"square",className:t.userProfile,src:Kt(a.uuid.profileUrl)})}):Object(h.jsx)(Er,{variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(h.jsx)(bt.a,{variant:"square",className:t.userProfile,src:Kt(a.uuid.profileUrl)})})}),Object(h.jsxs)(O.a,{item:!0,sm:6,xs:12,md:6,children:[Object(h.jsx)("small",{className:t.values,children:a.uuid.name?zt(a.uuid.name):a.uuid.id.substring(0,12)+".."||!1}),Object(h.jsx)("br",{}),Object(h.jsx)("small",{className:t.appName,children:a.status?a.status:"offline"})]}),Object(h.jsxs)(xt.a,{ml:1,children:[a.mute?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Oa,{title:"Unmute",children:Object(h.jsx)("span",{children:Object(h.jsx)(dt.a,{edge:"start",onClick:function(e){return t=a.uuid,I("unmute"),m(!0),void N(t);var t},onMouseOver:function(){return w(!0)},onMouseOut:function(){return w(!1)},disabled:a.actionsDisable,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/mute.svg",alt:"unmute"})})})})}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Oa,{title:a.toolTipTitle||"Mute",children:Object(h.jsx)("span",{children:Object(h.jsx)(dt.a,{edge:"start",onClick:function(e){return t=a.uuid,I("mute"),m(!0),void N(t);var t},onMouseOver:function(){return w(!0)},onMouseOut:function(){return w(!1)},disabled:a.actionsDisable,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/unmute.svg",alt:"mute",style:{width:"20px",height:"16px"}})})})})}),a.block?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Oa,{title:"Unblock",children:Object(h.jsx)("span",{children:Object(h.jsx)(dt.a,{edge:"start",onClick:function(e){return t=a.uuid,I("unblock"),m(!0),void N(t);var t},onMouseOver:function(){return w(!0)},onMouseOut:function(){return w(!1)},disabled:a.actionsDisable,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/block.svg",alt:"unblock"})})})})}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Oa,{title:a.toolTipTitle||"Block",children:Object(h.jsx)("span",{children:Object(h.jsx)(dt.a,{edge:"start",onClick:function(e){return t=a.uuid,I("block"),m(!0),void N(t);var t},onMouseOver:function(){return w(!0)},onMouseOut:function(){return w(!1)},disabled:a.actionsDisable,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/unblock.svg",alt:"block"})})})})})]})]},n)}))]}),Object(h.jsxs)(Br,{open:j,user:S,title:"Are you sure?",setOpen:m,pubnub:e.pubnub,action:R,updated:function(e,t){var a=s.filter((function(t){return t.uuid.id!==e.id})),n=s.filter((function(t){return t.uuid.id.includes(e.id)}));switch(t){case"mute":n[0].mute=!0;break;case"unmute":n[0].mute=!1;break;case"block":n[0].block=!0;break;case"unblock":n[0].block=!1}var r=s.findIndex((function(t){return t.uuid.id.includes(e.id)}));a.splice(r,0,n[0]),c(a)},children:["You want to ",R," this user?"]}),Object(h.jsx)(qr,{loading:U,membersLength:s.length,fetchChannelsMembersOnScroll:function(){q(!0),Object(x.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Te(e.pubnub,e.channelName,P);case 3:a=t.sent,c((function(e){return[].concat(Object(Ar.a)(e),Object(Ar.a)(a.data))})),L(a.next),q(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),q(!1);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},totalCount:e.totalCount})]})}var _r=Object(M.a)((function(e){return{sectionHeading:{font:"font: var(--unnamed-font-style-normal) normal 600 var(--unnamed-font-size-18)/var(--unnamed-line-spacing-23) var(--unnamed-font-family-proxima-nova)",color:"#414141",opacity:1,letterSpacing:"var(--unnamed-character-spacing-0)",fontWeight:700},profilePicture:{width:"100%"},name:{fontSize:"15px",marginTop:"15px",marginBottom:"25px",fontWeight:700,font:"font: var(--unnamed-font-style-normal) normal 600 var(--unnamed-font-size-18)/var(--unnamed-line-spacing-23) var(--unnamed-font-family-proxima-nova)",letterSpacing:"0px",color:"#414141",opacity:1},label:{color:"#C2C2C2",fontSize:"15px",font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-12)/var(--unnamed-line-spacing-15) var(--unnamed-font-family-proxima-nova)",letterSpacing:"-1px"},labelItem:{fontSize:"15px"},containerRoot:{padding:"10px"},closeIcon:{background:"transparent url(images/closeBg.svg) 0% 0% no-repeat padding-box;",padding:"12px 12px 10px 12px",borderRadius:"5px"},blockIcon:{background:"transparent url(images/greyBg.svg) 0% 0% no-repeat padding-box;",padding:"12px 12px 10px 12px",borderRadius:"5px"},online:{height:"10px",width:"10px",marginLeft:"2px",backgroundColor:"#76C00D",borderRadius:"50%",display:" inline-block"}}})),zr=function(e){var t=e.member,a=e.toggleMemberDetails,r=e.pubnub,s=_r(),c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],u=Object(n.useState)([]),d=Object(f.a)(u,2),b=d[0],j=d[1],m=Object(n.useState)(""),g=Object(f.a)(m,2),p=g[0],x=g[1],y=Object(n.useState)(!1),k=Object(f.a)(y,2),w=k[0],C=k[1],F=Object(n.useState)(!1),S=Object(f.a)(F,2),N=S[0],T=S[1];Object(n.useEffect)((function(){t.block&&T(t.block),t.mute&&C(t.mute)}),[t]);return t?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O.a,{container:!0,justify:"flex-start",children:Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(dt.a,{onClick:function(){return a(!1)},children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/Button-Arrow.svg",alt:"toggle"})})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{pt:1,pl:1,children:Object(h.jsx)(v.a,{variant:"body2",className:s.sectionHeading,children:"More Details"})})})]})})}),Object(h.jsx)("br",{}),Object(h.jsxs)(O.a,{container:!0,justify:"center",children:[Object(h.jsx)(O.a,{sm:6,md:6,item:!0,children:Object(h.jsx)("img",{src:Kt(t.uuid.profileUrl),className:s.profilePicture,alt:"profile"})}),Object(h.jsx)(O.a,{sm:12,md:12,item:!0,children:Object(h.jsxs)(v.a,{variant:"h6",align:"center",className:s.name,children:[t.uuid.name||t.uuid.id," ",t.status&&Object(h.jsx)("span",{className:s.online})]})}),Object(h.jsxs)(O.a,{container:!0,justify:"center",children:[Object(h.jsx)(O.a,{sm:4,md:4,lg:3,item:!0,children:w?Object(h.jsx)(Oa,{title:"UnMute",children:Object(h.jsx)("span",{children:Object(h.jsx)(dt.a,{"aria-label":"notification",size:"small",onClick:function(e){return a=t.uuid,x("unmute"),l(!0),void j(a);var a},disabled:t.actionsDisable,children:Object(h.jsx)("div",{className:s.closeIcon,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/mute.svg",alt:"unmute"})})})})}):Object(h.jsx)(Oa,{title:"Mute",children:Object(h.jsx)("span",{children:Object(h.jsx)(dt.a,{"aria-label":"notification",size:"small",onClick:function(e){return a=t.uuid,x("mute"),l(!0),void j(a);var a},disabled:t.actionsDisable,children:Object(h.jsx)("div",{className:s.blockIcon,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/unmute.svg",alt:"mute",style:{width:"20px",height:"16px"}})})})})})}),Object(h.jsx)(O.a,{sm:4,md:4,lg:3,item:!0,children:N?Object(h.jsx)(Oa,{title:"UnBlock",children:Object(h.jsx)("span",{children:Object(h.jsx)(dt.a,{"aria-label":"close",size:"small",onClick:function(e){return a=t.uuid,x("unblock"),l(!0),void j(a);var a},disabled:t.actionsDisable,children:Object(h.jsx)("div",{className:s.closeIcon,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/times-circle.svg",alt:"block"})})})})}):Object(h.jsx)(Oa,{title:"Block",children:Object(h.jsx)("span",{children:Object(h.jsx)(dt.a,{"aria-label":"close",size:"small",onClick:function(e){return a=t.uuid,x("block"),l(!0),void j(a);var a},disabled:t.actionsDisable,children:Object(h.jsx)("div",{className:s.blockIcon,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/unblock.svg",alt:"block"})})})})})}),Object(h.jsx)(O.a,{})]}),Object(h.jsxs)(O.a,{container:!0,justify:"flex-start",spacing:2,className:s.containerRoot,children:[Object(h.jsxs)(O.a,{item:!0,sm:12,md:12,children:[Object(h.jsx)(v.a,{testid:"nick_name",className:s.label,children:"NICK NAME"}),Object(h.jsx)(v.a,{className:s.labelItem,children:t.uuid.name})]}),Object(h.jsxs)(O.a,{item:!0,sm:12,md:12,children:[Object(h.jsx)(v.a,{testid:"created_at",className:s.label,children:"CREATED DATE"}),Object(h.jsx)(v.a,{className:s.labelItem,children:St()(t.updated).format("MMMM DD, YYYY hh:mm a")})]}),Object(h.jsxs)(O.a,{item:!0,sm:12,md:12,children:[Object(h.jsx)(v.a,{testid:"email",className:s.label,children:"EMAIL ADDRESS"}),Object(h.jsx)(v.a,{className:s.labelItem,children:t.uuid.email})]})]})]}),Object(h.jsxs)(Br,{open:o,user:b,title:"Are you sure?",setOpen:l,pubnub:r,action:p,updated:function(e,t){switch(t){case"mute":C(!0);break;case"unmute":C(!1);break;case"block":T(!0);break;case"unblock":T(!1)}},children:["You want to ",p," this user?"]})]}):Object(h.jsx)(h.Fragment,{})},Kr=function(e){var t=e.title,a=e.children,n=e.open,r=e.setOpen,s=e.pubnub,c=e.channel,i=e.message,o=er();return Object(h.jsxs)(Gn.a,{id:"dialog",open:n,onClose:function(){return r(!1)},"aria-labelledby":"confirm-dialog",fullWidth:!0,maxWidth:"xs",className:o.confirmDialog,children:[Object(h.jsx)(Qn.a,{id:"confirm-dialog",children:t}),Object(h.jsx)(Zn.a,{children:a}),Object(h.jsxs)(Xn.a,{children:[Object(h.jsx)(k.a,{id:"undo",onClick:function(){r(!1),Object(x.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,He(s,c,i.timetoken,i.actionToken);case 3:e.updated(i.timetoken,i.actionToken,"undo"),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})))()},className:o.confirmButton,children:Object(h.jsx)(v.a,{children:" Yes"})}),Object(h.jsx)(k.a,{id:"close",variant:"contained",onClick:function(){return r(!1)},className:o.cancelButton,children:"Cancel"})]})]})},Hr=function(e){var t=e.pubnub,a=e.channel,r=e.message,s=Object(n.useState)(""),c=Object(f.a)(s,2),o=c[0],l=c[1],u=Object(n.useState)(!0),d=Object(f.a)(u,2),b=d[0],j=d[1],m=Object(n.useState)(!1),g=Object(f.a)(m,2),w=g[0],F=g[1],S=Object(n.useState)(""),N=Object(f.a)(S,2),T=N[0],M=N[1],R=Dr(),I=Object(n.useState)({success:{status:!1,msg:""},error:{status:!1,msg:""}}),A=Object(f.a)(I,2),D=A[0],P=A[1];Object(n.useEffect)((function(){if(r.text){var e=r.actions&&r.actions.updated&&r.actions.updated[Object.keys(r.actions.updated)[0]];e&&M(e[0].actionTimetoken),l(r.text),j(!1),F(!0)}}),[r]);return Object(h.jsxs)(h.Fragment,{children:[w?Object(h.jsx)(xt.a,{className:R.messageBox,children:Object(h.jsxs)(O.a,{justify:"space-between",container:!0,children:[Object(h.jsxs)(O.a,{item:!0,children:[Object(h.jsx)(v.a,{className:R.editMessageHeader,children:"Edit Message"}),Object(h.jsx)(v.a,{className:R.editMessageFont,children:r.text})]}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(dt.a,{id:"close",onClick:function(){F(!1),j(!0),l(""),e.updated(r.timetoken,r.actionToken,"updated","")},children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/close.svg",alt:"close"})})})]})}):null,e.messagesLength?Object(h.jsx)(y.a,{InputProps:{endAdornment:Object(h.jsx)(C.a,{position:"end",children:Object(h.jsx)(k.a,{onClick:function(){P(Object(i.a)(Object(i.a)({},D),{},{success:{status:!1,msg:""},error:{status:!1,msg:""}})),Object(x.a)(p.a.mark((function n(){var s;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!T){n.next=4;break}return n.next=4,He(t,a,r.timetoken,T);case 4:return n.next=6,Ye(t,a,r.timetoken,o);case 6:s=n.sent,l(""),j(!0),F(!1),e.updated(r.timetoken,r.actionToken,"updated",s),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),P(Object(i.a)(Object(i.a)({},D),{},{success:{status:!1,msg:""},error:{status:!0,msg:"Failed to edit message"}}));case 16:case"end":return n.stop()}}),n,null,[[0,13]])})))()},children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/send-button.svg",alt:"edit"})})})},id:"message",name:"message",placeholder:"Enter your message here",variant:"outlined",fullWidth:!0,value:o,onChange:function(e){l(e.target.value)},autoComplete:"off",disabled:b}):null,D.error.status&&Object(h.jsx)(La,{msg:D.error.msg,status:"info"})]})},Vr=function(e){var t,a=e.message,n=e.confirmDelete,r=e.updateMessage,s=e.confirmUndo,c=e.index,i=e.toggledVal,o=Dr();return Object(h.jsxs)(h.Fragment,{children:["chat"===i&&Object(h.jsx)(O.a,{container:!0,className:o.messageContainer,children:a.actions&&("deleted"===a.actions||a.actions.deleted)?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{className:o.chat,style:{backgroundColor:c%2!==0?"#FFFFFF":"#EEF3FF"},children:Object(h.jsx)(v.a,{className:o.deletedChat,children:a.text})}),Object(h.jsx)(xt.a,{ml:2,children:Object(h.jsx)(Oa,{title:"Undo",children:Object(h.jsx)(dt.a,{id:"undoIcon",edge:"start",onClick:function(e){return s(e,a)},children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/undo.svg",alt:"delete"})})})})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("span",{className:o.chat,style:{backgroundColor:c%2!==0?"#FFFFFF":"#EEF3FF"},children:[a.text&&Object(h.jsx)(v.a,{className:o.chatText,children:a.text}),a.file&&a.file.url&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(bt.a,{src:a.file.url,className:o.image})})]}),Object(h.jsxs)(xt.a,{ml:2,children:[Object(h.jsx)(Oa,{title:"Edit",children:Object(h.jsx)(dt.a,{id:"updateIcon",edge:"start",label:"edit",onClick:function(e){return r(e,a)},children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/edit-message.svg",alt:"edit"})})}),Object(h.jsx)(Oa,{title:"Delete",children:Object(h.jsx)(dt.a,{id:"deleteIcon",edge:"start",label:"delete",onClick:function(e){return n(e,a)},children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/delete-message.svg",alt:"delete"})})})]})]})}),"banned"===i&&Object(h.jsx)(O.a,{container:!0,children:Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("span",{className:o.chat,style:{backgroundColor:c%2!==0?"#FFFFFF":"#EEF3FF"},children:[Object(h.jsx)(v.a,{className:o.chatText,children:Object(h.jsx)(Oa,{title:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(v.a,{children:(t=a.reason,t?"Reason: "+t:null)}),Object(h.jsx)("br",{}),Object(h.jsx)(v.a,{children:Gt(a.moderatedMessage)})]}),children:Object(h.jsx)(v.a,{className:o.chatText,children:a.originalMessage})})}),a.image&&Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(dt.a,{className:o.imageContainer,children:[Object(h.jsx)("img",{className:o.image,src:a.image,alt:"sentImage"}),a.imageReason&&Object(h.jsx)(Oa,{title:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(v.a,{children:"Reason: ".concat(a.imageReason[0]&&a.imageReason[0].text)})}),placement:"right-start",children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info.svg",alt:"profilePicture",className:o.imageIcon})})]})})]})})})]})};function Yr(e){var t=Dr(),a=Object(n.useState)(!1),r=Object(f.a)(a,2),s=r[0],c=r[1],i=Object(n.useState)([]),o=Object(f.a)(i,2),l=o[0],u=o[1],d=Object(n.useState)([]),b=Object(f.a)(d,2),j=b[0],m=b[1],g=Object(n.useState)(!1),y=Object(f.a)(g,2),k=y[0],C=y[1],F=function(e,t){c(!0),u(t)},S=function(e,t){C(!0),u(t)},N=function(t,a){e.setMessageToEdit(a)},T=Object(n.useRef)(null);return Object(n.useEffect)((function(){m(e.messages),setTimeout((function(){var e;null===(e=T.current)||void 0===e||e.scrollIntoView()}),100)}),[e.messages]),Object(h.jsxs)(h.Fragment,{children:[j.length||e.isLoading?Object(h.jsxs)(O.a,{item:!0,className:t.messages,children:[j.map((function(a,n){return Object(h.jsxs)("div",{children:["chat"===e.toggledVal&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(xt.a,{children:Object(h.jsx)(bt.a,{variant:"square",src:Kt(a.profileUrl)})}),Object(h.jsx)(v.a,{className:t.user,children:Ht(a.name)})]}),Object(h.jsx)(Vr,{id:"messageContent",message:a,confirmDelete:F,updateMessage:N,confirmUndo:S,index:n,toggledVal:e.toggledVal}),Object(h.jsx)(v.a,{className:t.timeField,children:a.time})]}),"banned"===e.toggledVal&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(xt.a,{children:Object(h.jsx)(bt.a,{variant:"square",src:Kt(a.profileUrl)})}),Object(h.jsx)(v.a,{className:t.user,children:Ht(a.name)})]}),Object(h.jsx)(Vr,{message:a,toggledVal:e.toggledVal,index:n}),Object(h.jsx)(v.a,{className:t.timeField,children:a.time})]})]},n)})),Object(h.jsx)("div",{ref:T})]}):Object(h.jsx)(Xe.a,{severity:"info",className:t.alertMessage,children:"No recent messages found"}),Object(h.jsx)(tr,{id:"delete",title:"Are you sure?",open:s,setOpen:c,onConfirm:function(){Object(x.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ze(e.pubnub,e.channel,l.timetoken);case 3:a=t.sent,e.updated(l.timetoken,a.actionTimetoken),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},actionMessage:"Yes, Delete it",children:"You can always undo this action"}),Object(h.jsx)(Kr,{title:"Are you sure?",open:k,setOpen:C,channel:e.channel,pubnub:e.pubnub,message:l,updated:e.updated,children:"You want to recover the message"}),e.isLoading?Object(h.jsx)(O.a,{justify:"center",container:!0,children:Object(h.jsx)(xt.a,{pt:3,children:Object(h.jsx)(w.a,{})})}):null,Object(h.jsx)(Hr,{message:e.messageToEdit,channel:e.channel,pubnub:e.pubnub,updated:e.updated,messagesLength:j.length})]})}function Jr(e){var t=Dr(),a=Object(n.useState)(0),r=Object(f.a)(a,2),s=r[0],c=r[1],o=Object(n.useState)({success:{status:!1,msg:""},error:{status:!1,msg:""}}),l=Object(f.a)(o,2),u=l[0],d=l[1],b=1e4*(new Date).setHours(0,0,0,0);return Object(n.useEffect)((function(){d(Object(i.a)(Object(i.a)({},u),{},{success:{status:!1,msg:""},error:{status:!1,msg:""}})),Object(x.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Pe(e.pubnub,e.channelName,b);case 3:a=t.sent,c(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),d(Object(i.a)(Object(i.a)({},u),{},{success:{status:!1,msg:""},error:{status:!0,msg:t.t0.message}}));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}),[e.channelName]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(v.a,{className:t.messagesCountFont,children:["Today(",s,")"]}),u.error.status&&Object(h.jsx)(La,{msg:u.error.msg,status:"info"})]})}function $r(e){var t=Dr();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(k.a,{id:"chat",onClick:function(){e.setToggledVal("chat")},className:"chat"===e.toggledVal?t.activeToggled:t.disableToggled,children:"Chat"}),Object(h.jsx)(k.a,{id:"ban",onClick:function(){e.setToggledVal("banned")},className:"banned"===e.toggledVal?t.activeToggled:t.disableToggled,children:"Banned"})]})}var Gr=function(){var e=Object(n.useRef)(!0),t=Dr(),a=Object(b.h)(),r=hr().pubnub,s=Object(n.useState)([]),c=Object(f.a)(s,2),i=c[0],o=c[1],l=Object(n.useState)(!!localStorage.getItem("PubNubChannelMembers")&&JSON.parse(localStorage.getItem("PubNubChannelMembers"))),u=Object(f.a)(l,2),d=u[0],j=u[1],m=Object(n.useState)([]),g=Object(f.a)(m,2),v=g[0],y=g[1],w=Object(n.useState)(!1),C=Object(f.a)(w,2),F=C[0],S=C[1],N=Object(n.useState)(),T=Object(f.a)(N,2),M=T[0],R=T[1],I=Object(n.useState)(!1),A=Object(f.a)(I,2),D=A[0],P=A[1],L=Object(n.useState)([]),E=Object(f.a)(L,2),B=E[0],q=E[1],W=Object(n.useState)("chat"),_=Object(f.a)(W,2),z=_[0],K=_[1],H=Object(n.useState)(""),V=Object(f.a)(H,2),Y=V[0],J=V[1],$=Object(n.useState)(0),G=Object(f.a)($,2),X=G[0],Z=G[1],Q=Object(n.useState)(""),ee=Object(f.a)(Q,2),te=ee[0],ae=ee[1];Object(n.useEffect)((function(){ne(),U("PubNubSelectedChannel",a.state.channel),J(a.state.channel),Object(x.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ae(r,a.state.channel);case 3:t=e.sent,y(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),Object(n.useEffect)((function(){"chat"===z?J(a.state.channel):"banned"===z&&J("banned."+a.state.channel)}),[z]),Object(n.useEffect)((function(){e.current?e.current=!1:Y&&re()}),[d]),Object(n.useEffect)((function(){Y&&!F&&re()}),[Y]);var ne=function(){S(!0),Object(x.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Te(r,a.state.channel);case 3:t=e.sent,U("PubNubChannelMembers",t.data),j(t.data),Z(t.totalCount),ae(t.next),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))()},re=function(){o([]),Object(x.a)(p.a.mark((function e(){var t,a,n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de(r,Y);case 3:t=e.sent,a=[],n={},s=[],t&&t.map((function(e,t){(n=e.message).time=_t(e.timetoken),n.timetoken=e.timetoken,n.actions=e.actions,n.actionToken=e.actions&&e.actions.deleted&&e.actions.deleted["."][0].actionTimetoken,n.text=ta(e,n);var c=e.uuid||e.message.senderUuid,i=c&&d&&d.filter((function(e){return e.uuid.id===c}));return i&&i.length?(n.name=zt(i[0].uuid.name||i[0].uuid.id),n.profileUrl=i[0].uuid.profileUrl):c&&(n.name=c),ea(n),s=Qt(n,e,r,Y),a.push(s),!1})),o(Object(Ar.a)(new Set(a))),S(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),S(!1);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},se=function(e){var t={},a=e.publisher||e.message&&e.message.senderUuid,n=a&&d&&d.filter((function(e){return e.uuid.id===a}));if(t=e.message||e,n&&n.length?(t.name=n[0].uuid.name||n[0].uuid.id,t.profileUrl=n[0].uuid.profileUrl):a&&(t.name=a),e&&e.file&&e.file.id&&e.file.name&&t.message.file.url){var s=r.getFileUrl({channel:Y,id:e.file.id,name:e.file.name});t.file.url=s}t.time=_t(e.timetoken),t.timetoken=e.timetoken,ea(t),o((function(e){return[].concat(Object(Ar.a)(e),[t])}))},ce={message:se,file:se},ie=function(){r.removeListener(ce),r.unsubscribeAll()};Object(n.useEffect)((function(){if(Y)return r.addListener(ce),r.subscribe({channels:[Y]}),ie}),[d,Y]);var oe;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(la.a,{title:"Messages"}),Object(h.jsxs)(O.a,{justify:"space-between",container:!0,spacing:1,children:[Object(h.jsxs)(O.a,{item:!0,sm:9,children:[Object(h.jsx)(O.a,{justify:"space-between",container:!0,children:Object(h.jsxs)(O.a,{item:!0,sm:12,className:t.header,children:[Object(h.jsxs)(O.a,{justify:"flex-start",container:!0,children:[Object(h.jsx)(xt.a,{mr:1,children:Object(h.jsx)(bt.a,{className:t.avatar,variant:"square",children:Dt(a.state.channel)})}),Object(h.jsxs)(O.a,{item:!0,sm:8,xs:12,md:8,children:["chat"===z&&Object(h.jsxs)("small",{className:t.values,children:[a.state.channel," (",v.name,")"]}),"banned"===z&&Object(h.jsxs)("small",{className:t.values,children:[a.state.channel," - Banned (",v.name,")"]}),Object(h.jsx)("br",{}),Object(h.jsx)("small",{className:t.appName,children:(oe=v.description,oe&&oe.length>70?oe.substring(0,68)+"...":oe)})]}),Object(h.jsx)(O.a,{item:!0,sm:3,md:3,lg:3,children:Object(h.jsxs)(O.a,{justify:"space-between",container:!0,children:[Object(h.jsx)(O.a,{item:!0}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{mt:1,children:Object(h.jsx)($r,{toggledVal:z,setToggledVal:K})})})]})})]}),"chat"===z&&Object(h.jsx)(xt.a,{mt:1,children:Object(h.jsx)(O.a,{justify:"center",container:!0,children:Object(h.jsx)(k.a,{disabled:!0,className:t.messagesCount,children:Object(h.jsx)(Jr,{channelName:a.state.channel,pubnub:r})})})})]})}),Object(h.jsx)(O.a,{item:!0,sm:12,children:Object(h.jsx)(Yr,{messages:i,isLoading:F,pubnub:r,channel:a.state.channel,updated:function(e,t,a,n){var r=i.filter((function(t){return t.timetoken!==e})),s=i.filter((function(t){return t.timetoken.includes(e)}));a?("undo"===a&&(s[0].actions=""),"updated"===a&&n?(q([]),s[0].text=n.value):"updated"===a&&q([])):(s[0].actions="deleted",s[0].actionToken=t);var c=i.findIndex((function(t){return t.timetoken.includes(e)}));r.splice(c,0,s[0]),o(r)},messageToEdit:B,setMessageToEdit:q,toggledVal:z})})]}),Object(h.jsxs)(O.a,{item:!0,sm:3,className:t.channelMembers,children:[!D&&Object(h.jsx)(Wr,{channelMembers:d,pubnub:r,selectedMemberDetail:function(e){return R(e),void P(!0)},channelName:a.state.channel,totalCount:X,page:te}),D&&Object(h.jsx)(zr,{toggleMemberDetails:function(e){return P(e)},member:M,pubnub:r})]})]})]})},Xr=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(en,{children:Object(h.jsx)(Gr,{})})})},Zr=Object(M.a)((function(e){return{labelText:{color:"#606060"},card:{padding:"20px"},cancel:{width:"150px",margin:"3px",height:"37px",boxShadow:"0px 0px 0px white",backgroundColor:"white",border:"1px solid #707070",borderRadius:"8px",opacity:1,font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) 13px/16px var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",color:"#707070",fontSize:"13px"},save:{background:"#6387ED 0% 0% no-repeat padding-box",borderRadius:"8px",opacity:1,color:"white",width:"150px",margin:"8px",height:"37px",fontSize:"13px","&:hover":{background:"#6387ED 0% 0% no-repeat padding-box",color:"white"}},testText:{font:"var(--unnamed-font-style-normal) normal var(--unnamed-font-weight-normal) var(--unnamed-font-size-16)/var(--unnamed-line-spacing-19) var(--unnamed-font-family-proxima-nova)",letterSpacing:"var(--unnamed-character-spacing-0)",textDecoration:"underline",color:"#6387ED",cursor:"pointer",opacity:1,"&:hover":{background:"#E7EDFF",color:"#6387ED"}},loader:{marginRight:"5px",color:"white"},loaderLoading:{marginRight:"5px"},reroute:{textTransform:"none",marginLeft:"8px",backgroundColor:"#FCF0EF",color:"#FB6340",marginTop:"5px"},infoIcon:{padding:"3px 0px 0px 5px"}}})),Qr=function(e){var t=e.state,a=Ra();return Object(h.jsx)(O.a,{container:!0,justify:"flex-start",spacing:3,children:Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(xt.a,{className:t.initialLoading?a.methodNotSelected:a.methodSelected,children:[Object(h.jsx)(O.a,{container:!0,justify:"center",children:Object(h.jsx)(xt.a,{p:1,children:Object(h.jsx)("img",{alt:"",src:t.initialLoading?"/moderation-dashboard/images/automatic-detection.svg":"/moderation-dashboard/images/automatic-profanity-selected.svg"})})}),Object(h.jsx)(v.a,{testid:"autoDetection",variant:"body1",align:"center",children:"Automatic Detection"})]})})})},es=function(e){var t=e.setState,a=e.state,n=e.name;return function(e,r){"channelId"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{channelOnChange:!0,channelId:e.target.value})):"toolForImageModeration"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{toolForImageModeration:e.target.value})):"sightengineAPIUser"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{sightengineAPIUser:e.target.value,sightengineAPIUserError:!1})):"sightengineAPIKey"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{sightengineAPIKey:e.target.value,sightengineAPIKeyError:!1})):"sightengineWorkflowId"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{sightengineWorkflowId:e.target.value,sightengineWorkflowIdError:!1})):"reRouteMessages"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{reRouteMessages:e.target.checked})):"sightengineRiskFactorThreshold"===n?t(Object(i.a)(Object(i.a)({},a),{},{sightengineRiskFactorThreshold:r})):"imageModerationToggle"===e.target.name?t(Object(i.a)(Object(i.a)({},a),{},{imageModerationToggle:e.target.value})):"applyToAllChannelIds"===n&&(e.target.checked?t((function(t){return Object(i.a)(Object(i.a)({},t),{},{applyToAllChannelIds:e.target.checked,channelId:"*"})})):t(Object(i.a)(Object(i.a)({},a),{},{applyToAllChannelIds:e.target.checked})))}},ts=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{children:"Please follow steps listed "}),Object(h.jsx)("a",{style:{fontWeight:600,color:"black",textDecorationLine:"none"},href:"https://sightengine.com/docs/image-moderation-workflows",children:"here"}),Object(h.jsx)("span",{children:" and input values"})]}),as=function(e){var t=e.state,a=e.setState,n=e.handleSave,r=Zr(),s=$t(t.applyToAllChannelIds),c=$t(t.reRouteMessages);return t.initialLoading?Object(h.jsx)(h.Fragment,{}):Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(tn.a,{className:r.card,children:[Object(h.jsxs)(xt.a,{children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)("label",{testid:"Channel_ID",className:r.labelText,children:"Channel ID"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{className:r.infoIcon,children:Object(h.jsx)(Oa,{title:"Note: Please add a Channel ID or a Channel pattern. eg. channel.* OR pubNub. Channel ID pattern applies to BOTH text & image moderation if both are enabled.",children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info-circle.svg",alt:"info-circle"})})})})]}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(y.a,{id:"channelId",variant:"outlined",name:"channelId",error:t.channelIdError,disabled:s||t.channelIdDisabled,placeholder:"channel ID",value:t.channelId,onChange:es({setState:a,state:t}),size:"small",fullWidth:!0})})]}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(O.a,{container:!0,justify:"flex-start",children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(an.a,{id:"checkBox",checked:s,onChange:es({setState:a,state:t,name:"applyToAllChannelIds"}),disabled:t.channelIdDisabled})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{pt:1,pl:1,children:Object(h.jsx)(v.a,{testid:"Apply_All",variant:"body1",children:"Apply to All Channel IDs"})})})]})}),Object(h.jsx)("br",{}),Object(h.jsx)(O.a,{container:!0,justify:"flex-start",children:Object(h.jsxs)(O.a,{item:!0,sm:12,children:[Object(h.jsx)("label",{id:"SelectTool",className:r.labelText,children:"Select third party tool for Automatic Detection"}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(nn.a,{size:"small",fullWidth:!0,children:Object(h.jsx)(rn.a,{id:"ImageModerationTool",variant:"outlined",value:t.toolForImageModeration,name:"toolForImageModeration",onChange:es({setState:a,state:t}),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null},children:Object(h.jsx)(Ot.a,{value:"sightengine",children:"SightEngine"})})})})]})}),Object(h.jsx)("br",{}),Object(h.jsxs)(xt.a,{pt:1,children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)("label",{testId:"ApiUser",className:r.labelText,children:"Sightengine API User"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{className:r.infoIcon,children:Object(h.jsx)(Oa,{title:ts,interactive:!0,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info-circle.svg",alt:"info-circle"})})})})]}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(y.a,{id:"sightEngineAPIUser",variant:"outlined",name:"sightengineAPIUser",error:t.sightengineAPIUserError,helperText:t.sightengineAPIUserError&&"Sightengine API User is required",value:t.sightengineAPIUser,onChange:es({setState:a,state:t}),size:"small",placeholder:"Sightengine API User",fullWidth:!0})})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(xt.a,{pt:1,children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)("label",{testId:"Api_Key",className:r.labelText,children:"Sightengine API Key"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{className:r.infoIcon,children:Object(h.jsx)(Oa,{title:ts,interactive:!0,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info-circle.svg",alt:"info-circle"})})})})]}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(y.a,{id:"apiKey",variant:"outlined",name:"sightengineAPIKey",error:t.sightengineAPIKeyError,helperText:t.sightengineAPIKeyError&&"Sightengine API Key is required",value:t.sightengineAPIKey,onChange:es({setState:a,state:t}),size:"small",fullWidth:!0,placeholder:"Sightengine API Key"})})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(xt.a,{pt:1,children:[Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)("label",{testId:"workFlowId",className:r.labelText,children:"Sightengine Workflow ID"})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{className:r.infoIcon,children:Object(h.jsx)(Oa,{title:ts,interactive:!0,children:Object(h.jsx)("img",{src:"/moderation-dashboard/images/info-circle.svg",alt:"info-circle"})})})})]}),Object(h.jsx)(xt.a,{pt:1,mb:2,children:Object(h.jsx)(y.a,{id:"sightEngineWorkflowId",name:"sightengineWorkflowId",variant:"outlined",size:"small",error:t.sightengineWorkflowIdError,helperText:t.sightengineWorkflowIdError&&"Sightengine Workflow ID is required",value:t.sightengineWorkflowId,onChange:es({setState:a,state:t}),fullWidth:!0,placeholder:"Sightengine Workflow ID"})})]}),Object(h.jsx)("br",{}),Object(h.jsx)(O.a,{container:!0,justify:"space-between",spacing:6,children:Object(h.jsx)(O.a,{item:!0,sm:6,xs:12,md:6,lg:6,children:Object(h.jsxs)(xt.a,{children:[Object(h.jsx)("label",{testId:"riskFactor",className:r.labelText,children:"Sightengine Risk Factor"}),Object(h.jsx)(xt.a,{pt:1,children:Object(h.jsx)(jn,{id:"riskFactorSlider",value:t.sightengineRiskFactorThreshold,onChange:es({setState:a,state:t,name:"sightengineRiskFactorThreshold"})})})]})})}),Object(h.jsx)("br",{}),Object(h.jsxs)(O.a,{container:!0,children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(O.a,{container:!0,justify:"flex-start",children:[Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(an.a,{id:"reRouteCheckBox",name:"reRouteMessages",checked:c,onChange:es({setState:a,state:t})})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{pt:1,pl:1,children:Object(h.jsx)(v.a,{testid:"reRouteMsg",variant:"body1",children:"Route messages to"})})})]})}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsx)(xt.a,{children:Object(h.jsx)(sn.a,{className:r.reroute,label:"banned."+t.channelId})})})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(O.a,{container:!0,justify:"space-between",spacing:3,children:[Object(h.jsx)(O.a,{item:!0}),Object(h.jsx)(O.a,{item:!0,children:Object(h.jsxs)(k.a,{id:"save",className:r.save,disabled:t.saveLoading,onClick:n,variant:"contained",children:[t.saveLoading?Object(h.jsx)(w.a,{size:25,thickness:4,color:"primary",className:r.loader}):Object(h.jsx)(h.Fragment,{}),"Save"]})})]})]})})},ns=function(){var e=Zr(),t=Object(n.useState)({applyToAllChannelIds:!0,initialLoading:!0,imageModerationToggle:"",channelId:"*",channelIdError:!1,sightengineAPIUserError:!1,sightengineAPIKeyError:!1,sightengineWorkflowIdError:!1,channelOnChange:!1,toolForImageModeration:"sightengine",sightengineAPIUser:"",sightengineAPIKey:"",sightengineWorkflowId:"",sightengineRiskFactorThreshold:"",reRouteMessages:"",error:{status:!1,msg:""},successMsg:"",errorMsg:"",successStatus:!1,errorStatus:!1,saveLoading:!1,channelIdDisabled:!1}),a=Object(f.a)(t,2),r=a[0],s=a[1],c=$t(r.imageModerationToggle);Object(n.useEffect)((function(){var e=Rt(),t=B("token");Object(x.a)(p.a.mark((function a(){var n,c,o,l,u,d,b,j,h,m,g,x,f,O;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=14;break}return a.prev=1,a.next=4,je(e.id,t,!0);case 4:n=a.sent,c=zn(e,n),o=Vn(e,n),l=o.findImageFunction,u=o.eventHandler,l.length&&u.length>0?(d=qt(u[0].code),b=d.imageModerationToggle,j=d.toolForImageModeration,h=d.sightengineAPIUser,m=d.sightengineAPIKey,g=d.applyToAllChannelIds,x=d.sightengineWorkflowId,f=d.sightengineRiskFactorThreshold,O=d.reRouteMessages,s((function(e){return{imageModerationToggle:b,initialLoading:!1,channelId:u[0].channels,toolForImageModeration:j,applyToAllChannelIds:g,sightengineAPIUser:h,sightengineAPIKey:m,sightengineWorkflowId:x,sightengineRiskFactorThreshold:f,reRouteMessages:O,channelIdDisabled:c.textModerationToggle}}))):s(Object(i.a)(Object(i.a)({},r),{},{initialLoading:!1,channelIdDisabled:c.textModerationToggle})),c.textModerationToggle&&c.textChannelId&&c.textChannelId!==r.channelId&&s((function(e){return Object(i.a)(Object(i.a)({},e),{},{channelId:c.textChannelId,channelIdDisabled:c.textModerationToggle})})),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),s((function(e){return{initialLoading:!1}}));case 14:case"end":return a.stop()}}),a,null,[[1,11]])})))()}),[]),Object(n.useEffect)((function(){r.channelOnChange&&(0===r.channelId.length?s((function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!0,saveLoading:!1,channelIdError:!0,errorMsg:"Channel name is required",successMsg:"",successStatus:!1})})):s((function(e){return Object(i.a)(Object(i.a)({},e),{},{errorStatus:!1,saveLoading:!1,errorMsg:"",successMsg:"",channelIdError:!1,successStatus:!1})})))}),[r.channelId,r.applyToAllChannelIds,r.channelOnChange]);var o=function(){var e=Object(x.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!r.errorStatus){e.next=3;break}return e.abrupt("return");case 3:if(0!==r.channelId.length){e.next=5;break}return e.abrupt("return",s(Object(i.a)(Object(i.a)({},r),{},{errorStatus:!0,channelIdError:!0,errorMsg:"Channel Id is required.",successStatus:!1,successMsg:""})));case 5:if(r.sightengineAPIUser.trim().length){e.next=7;break}return e.abrupt("return",s(Object(i.a)(Object(i.a)({},r),{},{sightengineAPIUserError:!0})));case 7:if(r.sightengineAPIKey.trim().length){e.next=9;break}return e.abrupt("return",s(Object(i.a)(Object(i.a)({},r),{},{sightengineAPIKeyError:!0})));case 9:if(r.sightengineWorkflowId.trim().length){e.next=11;break}return e.abrupt("return",s(Object(i.a)(Object(i.a)({},r),{},{sightengineWorkflowIdError:!0})));case 11:if(s((function(e){return Object(i.a)(Object(i.a)({},e),{},{saveLoading:!0})})),a=B("token"),!(n=Rt())){e.next=23;break}return e.prev=15,e.next=18,Hn(n,a,{state:r,setState:s});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(15),s(Object(i.a)(Object(i.a)({},r),{},{errorStatus:!0,saveLoading:!1,errorMsg:e.t0.message,successMsg:"",successStatus:!1}));case 23:case"end":return e.stop()}}),e,null,[[15,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[r.successStatus&&Object(h.jsx)(La,{status:"success",msg:r.successMsg}),r.errorStatus&&Object(h.jsx)(La,{status:"error",msg:r.errorMsg}),Object(h.jsxs)(v.a,{testid:"title",variant:"h6",className:e.title,children:["Image Moderation",Object(h.jsx)(vn,{checked:c,onChange:function(e){s(Object(i.a)(Object(i.a)({},r),{},{imageModerationToggle:e.target.checked}))}})]}),Object(h.jsx)("br",{}),Object(h.jsx)(v.a,{testid:"subTitle",className:e.subTitle,children:"Profanity detection method"}),Object(h.jsx)(Qr,{state:r}),r.initialLoading&&Object(h.jsx)(O.a,{container:!0,justify:"center",children:Object(h.jsx)(w.a,{size:65,thickness:4,color:"primary",className:e.loaderLoading})}),Object(h.jsx)("br",{}),Object(h.jsx)(as,{state:r,handleSave:o,setState:s}),Object(h.jsx)("br",{})]})},rs=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(en,{children:Object(h.jsx)(ns,{})})})},ss=function(){return Object(h.jsx)(d.a,{basename:"/moderation-dashboard",children:Object(h.jsxs)(b.d,{children:[Object(h.jsx)(ct,{path:"/",exact:!0,component:tt}),Object(h.jsx)(rt,{path:"/accounts",exact:!0,component:$n}),Object(h.jsx)(rt,{path:"/dashboard",exact:!0,component:Ba}),Object(h.jsx)(rt,{path:"/text-moderation",exact:!0,component:Jn}),Object(h.jsx)(rt,{path:"/channels",exact:!0,component:gr}),Object(h.jsx)(rt,{path:"/overview",exact:!0,component:fr}),Object(h.jsx)(rt,{path:"/users",exact:!0,component:Ir}),Object(h.jsx)(rt,{path:"/channels/messages",exact:!0,component:Xr}),Object(h.jsx)(rt,{path:"/image-moderation",exact:!0,component:rs})]})})},cs=Object(o.c)(Object(i.a)(Object(i.a)({},Object(l.a)()),{},{insertionPoint:document.getElementById("jss-insertion-point")})),is=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(u.b,{jss:cs,children:Object(h.jsx)(ss,{})})})},os=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,496)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};a(399);c.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(is,{})}),document.getElementById("root")),os()}},[[400,1,2]]]);
//# sourceMappingURL=main.1710036f.chunk.js.map